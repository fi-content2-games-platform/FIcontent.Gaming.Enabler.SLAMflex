<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SLAMflex SE: libSLAMflex -  android project/jni/Tracker.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../thumbnail.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SLAMflex SE
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SLAMflex provides detection and tracking of dominant planes for smartphone devices. This plane can then be used to show AR content relative to the plane orientation. The detection of plane is performed in the field of view of the smartphone camera. In subsequent frames it is tracked. The interface returns the plane position and orientation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_64138f433da6323d37c35d94c20fed44.html">libSLAMflex -  android project</a></li><li class="navelem"><a class="el" href="../../dir_f496a2d090f5040e1d0b8f142d0646a8.html">jni</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tracker.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d8c/a00600.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2008 Isis Innovation Limited</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//#import &lt;OpenGLES/ES1/gl.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//#import &lt;OpenGLES/ES1/glext.h&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/db2/a00601.html">Tracker.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d8b/a00547.html">MEstimator.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d9b/a00577.html">ShiTomasi.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dde/a00587.html">SmallMatrixOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d95/a00556.html">PatchFinder.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d0a/a00602.html">TrackerData.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d4d/a00519.html">globals.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d75/a00604.html">utility.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dfb/a00512.html">fast_corner.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dc0/a00611.html">vision.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d6e/a00613.html">wls.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../de/d85/a00618.html">CVD</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d4/d2a/a00632.html">std</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// The constructor mostly sets up interal reference variables</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// to the other classes..</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a0139a15490ed227e3355d4518e45ee6e">   28</a></span>&#160;<a class="code" href="../../db/d4f/a00420.html#a0139a15490ed227e3355d4518e45ee6e">Tracker::Tracker</a>(<a class="code" href="../../d7/da0/a00198.html">ImageRef</a> irVideoSize, <span class="keyword">const</span> <a class="code" href="../../d0/d33/a00027.html">ATANCamera</a> &amp;c, <a class="code" href="../../d4/d08/a00237.html">Map</a> &amp;m, <a class="code" href="../../da/d2e/a00238.html">MapMaker</a> &amp;mm) :</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;mMap(m),</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;mMapMaker(mm),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;mCamera(c),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;mRelocaliser(mMap, mCamera),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;mirSize(irVideoSize)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a9ec9520a915b479c66d6c36402a48d75">bFixed</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="../../d2/de1/a00421.html#a36f459fef07a976b57372c6d8c28b845">TrackerData::irImageSize</a> = <a class="code" href="../../db/d4f/a00420.html#adfbbd9b705f13deafc64fc0495b8b2f4">mirSize</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a> = NULL;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a> = NULL;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Most of the initialisation is done in Reset()</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d1/d8c/a00600.html#a93df586419976747bcc19216ddcf69b8">   44</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">string</span> <a class="code" href="../../d1/d8c/a00600.html#a93df586419976747bcc19216ddcf69b8">tostr</a>(<span class="keywordtype">string</span> w, <span class="keyword">const</span> T&amp; t) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    ostringstream os;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    os&lt;&lt;w&lt;&lt;t;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> os.str();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a17e5929ebbfd063d46bc47c2e84beaaa">   49</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a17e5929ebbfd063d46bc47c2e84beaaa">Tracker::StartTracking</a>() </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a71624b9805dd120f82c9830fc6fc6390">   54</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a71624b9805dd120f82c9830fc6fc6390">Tracker::StopTracking</a>()</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#aefdb4685736ca3ce1c594f99e53940d7">   60</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#aefdb4685736ca3ce1c594f99e53940d7">Tracker::SetSendMessageToUnity</a>(<a class="code" href="../../d7/ddb/a00361.html">SendMessage</a> sm)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a> = sm;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a8773d0381bfa14a6a7f775f9844c5071">   65</a></span>&#160;<a class="code" href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5">DetectionState</a> <a class="code" href="../../db/d4f/a00420.html#a8773d0381bfa14a6a7f775f9844c5071">Tracker::GetCurrentDetectionState</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">currentState</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// Resets the tracker, wipes the map.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// This is the main Reset-handler-entry-point of the program! Other classes&#39; resets propagate from here.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// It&#39;s always called in the Tracker&#39;s thread, often as a GUI command.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">   74</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Tracker::Reset</a>()</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Tracker resetting...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a>(<a class="code" href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>, <span class="stringliteral">&quot;Info: %s&quot;</span>, <span class="stringliteral">&quot;Tracker resetting...&quot;</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">mbDidCoarse</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb">GOOD</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#af5e6aa40e2ad54898e7c101c13024a15">mnLostFrames</a> = 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a4a2bc67bb156bf730a8bf5c060787edd">mdMSDScaledVelocityMagnitude</a> = 0;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">dSceneDepthMean</a> = 1.0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a666d792dbb1302b0ebfc38f2d8355e76">dSceneDepthSigma</a> = 1.0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">mnInitialStage</a> = <a class="code" href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a13c4ee06a0ff51b4afdd22c386024577">TRAIL_TRACKING_NOT_STARTED</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.clear();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>.<a class="code" href="../../d0/d33/a00027.html#a700b037d4c41f7aa2ab1b42ed57759b8">SetImageSize</a>(<a class="code" href="../../db/d4f/a00420.html#adfbbd9b705f13deafc64fc0495b8b2f4">mirSize</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a10f009ec03cf0da1e9d2d22445f492b6">mMeasurements</a>.clear();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aecbcf286d0acc18dcf4d1a4e2f29951f">mnLastKeyFrameDropped</a> = -20;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9333d0a0755ed26a3734326089abe67f">mnFrame</a>=0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a> = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a211af2d79bae2e17c9c06a587b7b477b">mbJustRecoveredSoUseCoarse</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a> = 10;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a2a3192b83974be4231d6b47a60397bd5">thresholdReached</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">currentState</a> = <a class="code" href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5ab68c130eb6caa378c2c394e9054bbb63">Finished</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Tell the MapMaker to reset itself.. </span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// this may take some time, since the mapmaker thread may have to wait</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// for an abort-check during calculation, so sleep while waiting.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// MapMaker will also clear the map.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#a132fc4c7223676386cb8da420b151796">RequestReset</a>();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">while</span>(!<a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#a63ec8516f1baefda696eeca0f7a2f376">ResetDone</a>())</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        usleep(10);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Tracker reset.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a>(<a class="code" href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>, <span class="stringliteral">&quot;Info: %s&quot;</span>, <span class="stringliteral">&quot;Tracker reset.&quot;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#a5a856797c959c03cb9b014100c607e8a">SendStringToUnity</a>(<span class="stringliteral">&quot;Tracker_Reset&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#ae369e0d888daa6e3a459228ed1da1a52">  110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#ae369e0d888daa6e3a459228ed1da1a52">Tracker::TrackFrame</a>(<a class="code" href="../../d7/d6e/a00190.html">Image&lt;byte&gt;</a> &amp;imFrame, uint hnd,<span class="keywordtype">bool</span> bDraw)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a8694e6f2988217135773cdc6f7fa9d8e">mbDraw</a> = bDraw;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a>.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">currentState</a> = <a class="code" href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5ac37ab8a82be99e808fa5ecf053075b08">Started</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// Take the input video image, and convert it into the tracker&#39;s keyframe struct</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// This does things like generate the image pyramid and find FAST corners</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a10f009ec03cf0da1e9d2d22445f492b6">mMeasurements</a>.clear();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Finding corners</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">int</span> numCrns;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    numCrns = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a6fcc56f00575edb572beb77eb85a7d36">MakeKeyFrame_Lite</a>(imFrame, <a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/d4d/a00519.html#a5c1f648910e022753bf99e7179c6cd61">UseNumberOfCornersAdjustment</a>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> (numCrns &gt; (<a class="code" href="../../dd/d4d/a00519.html#adec0370f2381b38ea59fbb64ff11b794">DesiredNumberOfCorners</a> + <a class="code" href="../../dd/d4d/a00519.html#a004eaa32e2c80b0a08f55a178cc5cfc9">DesiredNumberOfCornersOffset</a>))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a>+=5;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numCrns &lt; (<a class="code" href="../../dd/d4d/a00519.html#adec0370f2381b38ea59fbb64ff11b794">DesiredNumberOfCorners</a> - <a class="code" href="../../dd/d4d/a00519.html#a004eaa32e2c80b0a08f55a178cc5cfc9">DesiredNumberOfCornersOffset</a>))</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a> &gt; 14)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a> -= 5;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// Update the small images for the rotation estimator</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span> gvdSBIBlur = <a class="code" href="../../dd/d4d/a00519.html#a1f3bff50522c88f197e2c7b5cde04606">TrackerRotationEstimatorBlur</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> gvnUseSBI = <a class="code" href="../../dd/d4d/a00519.html#abaf66dc896ddcd855c1813866955a7f9">TrackerUseRotationEstimator</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a096b92ff1d7ca7547032e890f90d6bcd">mbUseSBIInit</a> = gvnUseSBI;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a>)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a> = <span class="keyword">new</span> <a class="code" href="../../db/d95/a00391.html">SmallBlurryImage</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, gvdSBIBlur);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a> = <span class="keyword">new</span> <a class="code" href="../../db/d95/a00391.html">SmallBlurryImage</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, gvdSBIBlur);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keyword">delete</span>  <a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a> = <a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a> = <span class="keyword">new</span> <a class="code" href="../../db/d95/a00391.html">SmallBlurryImage</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, gvdSBIBlur);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// From now on we only use the keyframe struct!</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9333d0a0755ed26a3734326089abe67f">mnFrame</a>++;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::ostringstream points;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    points &lt;&lt; <span class="stringliteral">&quot;Corners: &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size() &lt;&lt; <span class="stringliteral">&quot;  Barrier: &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">threshold</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#a5a856797c959c03cb9b014100c607e8a">SendStringToUnity</a>(points.str().c_str());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">//Sending corners to Unity3D for rendering</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../dd/d4d/a00519.html#adea5c9cfe402bb104f588fbaebae1c25">SendArrayOfPointsForCornersTex</a>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">int</span> crnrs [<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size()];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size(); i++)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            crnrs[i]=(-640*(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>[i].y-480))+<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>[i].x;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#aac0c506e8bf945d15a39f63fc785ee9a">SendArrayOfPoints</a>(crnrs, <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size());</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// Decide what to do - if there is a map, try to track the map ...</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">mMap</a>.<a class="code" href="../../d4/d08/a00237.html#a81c598897a9b30ece4f2a9acffaa6572">IsGood</a>())</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span>(1)<span class="comment">//mnLostFrames &lt; 3)  // .. but only if we&#39;re not lost!</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">//          cout &lt;&lt; &quot;----Map is good----&quot;&lt;&lt;endl;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a096b92ff1d7ca7547032e890f90d6bcd">mbUseSBIInit</a>)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#a6dc43439a13840577171ab415ee09855">CalcSBIRotation</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#aebcd5315208505a06ec6769432afe678">ApplyMotionModel</a>();       <span class="comment">// </span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ab1aa69f8ff571ded66dadc5d03995bce">TrackMap</a>();               <span class="comment">//  These three lines do the main tracking work.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ab9b0b18e15987c60173971c470e98a9e">UpdateMotionModel</a>();      <span class="comment">// </span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ad6c77bd6b694f4fe2f69eb4de7d14a41">AssessTrackingQuality</a>();  <span class="comment">//  Check if we&#39;re lost or if tracking is poor.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            { <span class="comment">// Provide some feedback for the user:</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;Tracking Map, quality &quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> == <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb">GOOD</a>)  <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;good.&quot;</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> == <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629aa2af2d37e4471913c07b1164c260dc29">DODGY</a>) <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;poor.&quot;</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> == <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">BAD</a>)   <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;bad.&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot; Found:&quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>; i++) <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[i] &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">manMeasAttempted</a>[i];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="comment">//      mMessageForUser &lt;&lt; &quot; Found &quot; &lt;&lt; mnMeasFound &lt;&lt; &quot; of &quot; &lt;&lt; mnMeasAttempted &lt;&lt;&quot;. (&quot;;</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot; Map: &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">mMap</a>.<a class="code" href="../../d4/d08/a00237.html#a7a2a1024fff77881aaac79ec166f824c">vpPoints</a>.size() &lt;&lt; <span class="stringliteral">&quot;P, &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">mMap</a>.<a class="code" href="../../d4/d08/a00237.html#a54fcd84b47c4ddfe95dfb100279d3b50">vpKeyFrames</a>.size() &lt;&lt; <span class="stringliteral">&quot;KF&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="comment">// Heuristics to check if a key-frame should be added to the map:</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> == <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb">GOOD</a> &amp;&amp;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;               <a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#ae0efe8db35ef6dca5309bdd1d061906d">NeedNewKeyFrame</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>) &amp;&amp;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;               <a class="code" href="../../db/d4f/a00420.html#a9333d0a0755ed26a3734326089abe67f">mnFrame</a> - <a class="code" href="../../db/d4f/a00420.html#aecbcf286d0acc18dcf4d1a4e2f29951f">mnLastKeyFrameDropped</a> &gt; 20  &amp;&amp;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;               <a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#ab6bd69f268aa8f05416c5071b93d5731">QueueSize</a>() &lt; 3)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot; Adding key-frame.&quot;</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#a180b9032fc676cd575876a6ed33c0772">AddNewKeyFrame</a>();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <a class="code" href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a>(<a class="code" href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>, <span class="stringliteral">&quot;Info_Key-Frame: %s&quot;</span>, <span class="stringliteral">&quot;Adding key-frame&quot;</span>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            };</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">else</span>  <span class="comment">// what if there is a map, but tracking has been lost?</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;** Attempting recovery **.&quot;</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a0e8b040d9087445d8da41affbaa8e4bc">AttemptRecovery</a>())</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ab1aa69f8ff571ded66dadc5d03995bce">TrackMap</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#ad6c77bd6b694f4fe2f69eb4de7d14a41">AssessTrackingQuality</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3,3,double&gt;</a> rotMatrix = <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>.<a class="code" href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">get_rotation</a>().get_matrix();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3, double&gt;</a> transVector = <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>.<a class="code" href="../../df/d73/a00358.html#a0284c7cd9479da896ab29d6c62c41844">get_translation</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordtype">float</span> heading, attitude, bank = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a784953d787bbb4ee4eb5c19b7562e605">GetEulerAnglesFromRotationMatrix</a>(rotMatrix, heading , attitude, bank);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        std::ostringstream data;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        data &lt;&lt;<a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(bank)+180&lt;&lt;<span class="stringliteral">&quot;;&quot;</span>&lt;&lt;<a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(attitude)&lt;&lt;<span class="stringliteral">&quot;;&quot;</span>&lt;&lt;<a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(heading)&lt;&lt;<span class="stringliteral">&quot;:&quot;</span>&lt;&lt;transVector[0]&lt;&lt;<span class="stringliteral">&quot;;&quot;</span>&lt;&lt;transVector[1]&lt;&lt;<span class="stringliteral">&quot;;&quot;</span>&lt;&lt;transVector[2]&lt;&lt;endl;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#afe587d9840262ee7407234d4f6e9e132">SendPoseToUnity</a>(<a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(bank)+180, <a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(attitude), <a class="code" href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">RadiansToDegrees</a>(heading), transVector[0], transVector[1], transVector[2]);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;       <span class="comment">// LOGV(LOG_TAG, &quot;Pose: %s&quot;, data.str().c_str());</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">currentState</a> = <a class="code" href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5a5ddff473d1ee827cd541212a489edbe3">InProgres</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// If there is no map, try to make one.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a> &lt;&lt; <span class="stringliteral">&quot;Track for initial map&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a66c4bc51f37a922b6b2ccac164cf6e02">TrackForInitialMap</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// GUI interface</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">while</span>(!<a class="code" href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">mvQueuedCommands</a>.empty())</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#aaac664e77886fd25b7b13adf9663d3e7">GUICommandHandler</a>(<a class="code" href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">mvQueuedCommands</a>.begin()-&gt;sCommand, <a class="code" href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">mvQueuedCommands</a>.begin()-&gt;sParams);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">mvQueuedCommands</a>.erase(<a class="code" href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">mvQueuedCommands</a>.begin());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;};</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a784953d787bbb4ee4eb5c19b7562e605">  254</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a784953d787bbb4ee4eb5c19b7562e605">Tracker::GetEulerAnglesFromRotationMatrix</a>(<a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3,3, double&gt;</a>  &amp;m, <span class="keywordtype">float</span> &amp;heading, <span class="keywordtype">float</span> &amp;attitude, <span class="keywordtype">float</span> &amp;bank) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Assuming the angles are in radians.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (m(1,0) &gt; 0.998) { <span class="comment">// singularity at north pole</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        heading = atan2(m(0,2),m(2,2));</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        attitude = M_PI_2;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        bank = 0;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (m(1,0) &lt; -0.998) { <span class="comment">// singularity at south pole</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        heading = atan2(m(0,2),m(2,2));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        attitude = - M_PI_2;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        bank = 0;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    heading = atan2(-m(2,0),m(0,0));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    bank = atan2(-m(1,2),m(1,1));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    attitude = asin(m(1,0));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// Try to relocalise in case tracking was lost.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// Returns success or failure as a bool.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// Actually, the SBI relocaliser will almost always return true, even if</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// it has no idea where it is, so graphics will go a bit </span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// crazy when lost. Could use a tighter SSD threshold and return more false,</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// but the way it is now gives a snappier response and I prefer it.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a0e8b040d9087445d8da41affbaa8e4bc">  279</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../db/d4f/a00420.html#a0e8b040d9087445d8da41affbaa8e4bc">Tracker::AttemptRecovery</a>()</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">bool</span> bRelocGood = <a class="code" href="../../db/d4f/a00420.html#ad3bb52cd277a54734bcecb8a758a0992">mRelocaliser</a>.<a class="code" href="../../db/d53/a00321.html#ac663c7c22b41f2fd7b21c1734575afd8">AttemptRecovery</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>(!bRelocGood)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> se3Best = <a class="code" href="../../db/d4f/a00420.html#ad3bb52cd277a54734bcecb8a758a0992">mRelocaliser</a>.<a class="code" href="../../db/d53/a00321.html#a533accc88500edadd36aec5f669906e6">BestPose</a>();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a> = <a class="code" href="../../db/d4f/a00420.html#a395f0be90e6fe8592e1976a020677ecf">mse3StartPos</a> = se3Best;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a> = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a211af2d79bae2e17c9c06a587b7b477b">mbJustRecoveredSoUseCoarse</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// GUI interface. Stuff commands onto the back of a queue so the tracker handles</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">// them in its own thread at the end of each frame. Note the charming lack of</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// any thread safety (no lock on mvQueuedCommands).</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#ac80746f367622088267855457649e396">  295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#ac80746f367622088267855457649e396">Tracker::GUICommandCallBack</a>(<span class="keywordtype">void</span>* ptr, <span class="keywordtype">string</span> sCommand, <span class="keywordtype">string</span> sParams)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="../../d7/df7/a00058.html">Command</a> c;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    c.<a class="code" href="../../d7/df7/a00058.html#a63ca3025eb98136d2b84043dcf3feee6">sCommand</a> = sCommand;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    c.<a class="code" href="../../d7/df7/a00058.html#aae67cadf43ece5117abad14db33bac9e">sParams</a> = sParams;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    ((<a class="code" href="../../db/d4f/a00420.html">Tracker</a>*) ptr)-&gt;mvQueuedCommands.push_back(c);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// This is called in the tracker&#39;s own thread.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#aaac664e77886fd25b7b13adf9663d3e7">  304</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#aaac664e77886fd25b7b13adf9663d3e7">Tracker::GUICommandHandler</a>(<span class="keywordtype">string</span> sCommand, <span class="keywordtype">string</span> sParams)  <span class="comment">// Called by the callback func..</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span>(sCommand==<span class="stringliteral">&quot;Reset&quot;</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// KeyPress commands are issued by GLWindow</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span>(sCommand==<span class="stringliteral">&quot;KeyPress&quot;</span>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span>(sParams == <span class="stringliteral">&quot;Space&quot;</span>)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sParams == <span class="stringliteral">&quot;r&quot;</span>)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sParams == <span class="stringliteral">&quot;q&quot;</span> || sParams == <span class="stringliteral">&quot;Escape&quot;</span>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="comment">//GUI.ParseLine(&quot;quit&quot;);</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span>((sCommand==<span class="stringliteral">&quot;PokeTracker&quot;</span>))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a> &lt;&lt; <span class="stringliteral">&quot;! Tracker::GUICommandHandler: unhandled command &quot;</span>&lt;&lt; sCommand &lt;&lt; endl;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    exit(1);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">// Routine for establishing the initial map. This requires two spacebar presses from the user</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">// to define the first two key-frames. Salient points are tracked between the two keyframes</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">// using cheap frame-to-frame tracking (which is very brittle - quick camera motion will</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// break it.) The salient points are stored in a list of `Trail&#39; data structures.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">// What action TrackForInitialMap() takes depends on the mnInitialStage enum variable..</span></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a66c4bc51f37a922b6b2ccac164cf6e02">  345</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a66c4bc51f37a922b6b2ccac164cf6e02">Tracker::TrackForInitialMap</a>()</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// MiniPatch tracking threshhold.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> gvnMaxSSD = <a class="code" href="../../dd/d4d/a00519.html#a2f9011ce315b516bfec32a2d907bf274">TrackerMiniPatchMaxSSD</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="../../dc/ded/a00252.html#a8028087be984fdecbbc9900f56b20c6d">MiniPatch::mnMaxSSD</a> = gvnMaxSSD;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// What stage of initial tracking are we at?</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">mnInitialStage</a> == <a class="code" href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a13c4ee06a0ff51b4afdd22c386024577">TRAIL_TRACKING_NOT_STARTED</a>) </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a>)  <span class="comment">// First spacebar = this is the first keyframe</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a25750482105d693a6e0cf86ec7134a97">TrailTracking_Start</a>();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">mnInitialStage</a> = <a class="code" href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a3dfd067b352842d1bce15eaf1cb68411">TRAIL_TRACKING_STARTED</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">currentState</a> = <a class="code" href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5a5ddff473d1ee827cd541212a489edbe3">InProgres</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a2a3192b83974be4231d6b47a60397bd5">thresholdReached</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;Point camera at planar scene and press spacebar to start tracking for initial map.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    };</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">mnInitialStage</a> == <a class="code" href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a3dfd067b352842d1bce15eaf1cb68411">TRAIL_TRACKING_STARTED</a>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordtype">int</span> nGoodTrails = <a class="code" href="../../db/d4f/a00420.html#a7cc6e4ebaad3cb97420ce3715b0c514c">TrailTracking_Advance</a>();  <span class="comment">// This call actually tracks the trails</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span>(nGoodTrails &lt; 10) <span class="comment">// if most trails have been wiped out, no point continuing.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#a5a856797c959c03cb9b014100c607e8a">SendStringToUnity</a>(<span class="stringliteral">&quot;Tracker_ResetMM&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// If the user pressed spacebar here, use trails to run stereo and make the intial map..</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a>)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            clock_t startMapMaker, stopMapMaker;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keywordtype">int</span> numOfCorners;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            startMapMaker = clock();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            numOfCorners = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            vector&lt;pair&lt;ImageRef, ImageRef&gt; &gt; vMatches;   <span class="comment">// This is the format the mapmaker wants for the stereo pairs</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">for</span>(list&lt;Trail&gt;::iterator i = <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.begin(); i!=<a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.end(); i++)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                vMatches.push_back(pair&lt;ImageRef, ImageRef&gt;(i-&gt;irInitialPos,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                                            i-&gt;irCurrentPos));</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordtype">bool</span> result = <a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#ad7c06731385e36073b32dba5d8eadb98">InitFromStereo</a>(<a class="code" href="../../db/d4f/a00420.html#a92cfbc71e7c869bddca8833adfd0ca0f">mFirstKF</a>, <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, vMatches, <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>);  <span class="comment">// This will take some time!</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Reset</a>();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a>(<a class="code" href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>, <span class="stringliteral">&quot;MapMaker.InitFromStereo: Failed, Tracker: Reset()&quot;</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="../../dd/d4d/a00519.html#ac4682c5753218d2f91f1a6e91bc592a7">EnableLogging</a>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                stopMapMaker = clock();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                std::ostringstream message;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                message &lt;&lt;<span class="stringliteral">&quot;MapMaker: number of corners : &quot;</span>&lt;&lt; numOfCorners &lt;&lt;<span class="stringliteral">&quot;::Number of trails: &quot;</span>&lt;&lt; vMatches.size()&lt;&lt; <span class="stringliteral">&quot;:: Duration of initFromStereo: &quot;</span> &lt;&lt; (float)(stopMapMaker - startMapMaker)/CLOCKS_PER_SEC*1000 &lt;&lt; endl;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">sendToUnity</a>.<a class="code" href="../../d7/ddb/a00361.html#ad0b992043522ba6263cfb86c2f47707f">SendLogToUnity</a>(message.str().c_str());</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">mnInitialStage</a> = <a class="code" href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67ae500e9a56b6cd9824906d0bcb2d907c6">TRAIL_TRACKING_COMPLETE</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a> &lt;&lt; <span class="stringliteral">&quot;Translate the camera slowly sideways, and press spacebar again to perform stereo init.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">// The current frame is to be the first keyframe!</span></div>
<div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a25750482105d693a6e0cf86ec7134a97">  413</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a25750482105d693a6e0cf86ec7134a97">Tracker::TrailTracking_Start</a>()</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#af87142bc44ffa9ed3d9aa11f7f34ae59">MakeKeyFrame_Rest</a>();  <span class="comment">// This populates the Candidates list, which is Shi-Tomasi thresholded.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a92cfbc71e7c869bddca8833adfd0ca0f">mFirstKF</a> = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    vector&lt;pair&lt;double,ImageRef&gt; &gt; vCornersAndSTScores;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a36ae51f17356652e76d6ef3f9fb94a06">vCandidates</a>.size(); i++)  <span class="comment">// Copy candidates into a trivially sortable vector</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    {                                                                     <span class="comment">// so that we can choose the image corners with max ST score</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../d1/dc6/a00037.html">Candidate</a> &amp;c = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a36ae51f17356652e76d6ef3f9fb94a06">vCandidates</a>[i];</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>.<a class="code" href="../../d1/d98/a00407.html#a0373930f0671990ed3a8dfef265cc2f5">in_image_with_border</a>(c.<a class="code" href="../../d1/dc6/a00037.html#a6a248428aa892f2f571bd280ff4915ee">irLevelPos</a>, <a class="code" href="../../dc/ded/a00252.html#a15c1135b2c3e5650230d14ad050cfc00">MiniPatch::mnHalfPatchSize</a>))</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        vCornersAndSTScores.push_back(pair&lt;double,ImageRef&gt;(-1.0 * c.<a class="code" href="../../d1/dc6/a00037.html#af34c2333962dfc180489358e0a93c93d">dSTScore</a>, c.<a class="code" href="../../d1/dc6/a00037.html#a6a248428aa892f2f571bd280ff4915ee">irLevelPos</a>)); <span class="comment">// negative so highest score first in sorted list</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    };</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    sort(vCornersAndSTScores.begin(), vCornersAndSTScores.end());  <span class="comment">// Sort according to Shi-Tomasi score</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">int</span> nToAdd = <a class="code" href="../../dd/d4d/a00519.html#ab2ea2c2b414852ce200096022e292f96">MaxInitialTrails</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i&lt;vCornersAndSTScores.size() &amp;&amp; nToAdd &gt; 0; i++)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>.<a class="code" href="../../d1/d98/a00407.html#a0373930f0671990ed3a8dfef265cc2f5">in_image_with_border</a>(vCornersAndSTScores[i].second, <a class="code" href="../../dc/ded/a00252.html#a15c1135b2c3e5650230d14ad050cfc00">MiniPatch::mnHalfPatchSize</a>))</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="../../db/d43/a00422.html">Trail</a> t;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        t.<a class="code" href="../../db/d43/a00422.html#a1fea856fb1ebe81a0844cf4a006afc4b">mPatch</a>.<a class="code" href="../../dc/ded/a00252.html#a48ef12c80bc77f31d50bb143f23729d1">SampleFromImage</a>(vCornersAndSTScores[i].second, <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        t.<a class="code" href="../../db/d43/a00422.html#a965551e22a7a844247a428afcd9d89a2">irInitialPos</a> = vCornersAndSTScores[i].second;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        t.<a class="code" href="../../db/d43/a00422.html#a398fc4f3eceb6e72fce8a59fdb3a898f">irCurrentPos</a> = t.<a class="code" href="../../db/d43/a00422.html#a965551e22a7a844247a428afcd9d89a2">irInitialPos</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.push_back(t);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        nToAdd--;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a729dc9cf0ed10d423d4339a1651f81b5">mPreviousFrameKF</a> = <a class="code" href="../../db/d4f/a00420.html#a92cfbc71e7c869bddca8833adfd0ca0f">mFirstKF</a>;  <span class="comment">// Always store the previous frame so married-matching can work.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">// Steady-state trail tracking: Advance from the previous frame, remove duds.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a7cc6e4ebaad3cb97420ce3715b0c514c">  442</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../db/d4f/a00420.html#a7cc6e4ebaad3cb97420ce3715b0c514c">Tracker::TrailTracking_Advance</a>()</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">int</span> nGoodTrails = 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="../../dc/ded/a00252.html">MiniPatch</a> BackwardsPatch;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="../../d0/d53/a00232.html">Level</a> &amp;lCurrentFrame = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0];</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="../../d0/d53/a00232.html">Level</a> &amp;lPreviousFrame = <a class="code" href="../../db/d4f/a00420.html#a729dc9cf0ed10d423d4339a1651f81b5">mPreviousFrameKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0];</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;number of trails: &quot;</span> &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a>(<a class="code" href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>, <span class="stringliteral">&quot;number of trails: %i&quot;</span>, <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.size());</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span>(list&lt;Trail&gt;::iterator i = <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.begin(); i!=<a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.end();)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        list&lt;Trail&gt;::iterator next = i; next++;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="../../db/d43/a00422.html">Trail</a> &amp;trail = *i;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> irStart = trail.<a class="code" href="../../db/d43/a00422.html#a398fc4f3eceb6e72fce8a59fdb3a898f">irCurrentPos</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> irEnd = irStart;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordtype">bool</span> bFound = trail.<a class="code" href="../../db/d43/a00422.html#a1fea856fb1ebe81a0844cf4a006afc4b">mPatch</a>.<a class="code" href="../../dc/ded/a00252.html#ac24001169d1b9a76bb38a04fdc445801">FindPatch</a>(irEnd, lCurrentFrame.<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>, 10, lCurrentFrame.<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span>(bFound)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">// Also find backwards in a married-matches check</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            BackwardsPatch.<a class="code" href="../../dc/ded/a00252.html#a48ef12c80bc77f31d50bb143f23729d1">SampleFromImage</a>(irEnd, lCurrentFrame.<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> irBackWardsFound = irEnd;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            bFound = BackwardsPatch.<a class="code" href="../../dc/ded/a00252.html#ac24001169d1b9a76bb38a04fdc445801">FindPatch</a>(irBackWardsFound, lPreviousFrame.<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>, 10, lPreviousFrame.<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">if</span>((irBackWardsFound - irStart).mag_squared() &gt; 2)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            trail.<a class="code" href="../../db/d43/a00422.html#a398fc4f3eceb6e72fce8a59fdb3a898f">irCurrentPos</a> = irEnd;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            nGoodTrails++;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span>(!bFound) <span class="comment">// Erase from list of trails if not found this frame.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">mlTrails</a>.erase(i);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        i = next;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a729dc9cf0ed10d423d4339a1651f81b5">mPreviousFrameKF</a> = <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> nGoodTrails;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">// TrackMap is the main purpose of the Tracker.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">// It first projects all map points into the image to find a potentially-visible-set (PVS);</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">// Then it tries to find some points of the PVS in the image;</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">// Then it updates camera pose according to any points found.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">// Above may happen twice if a coarse tracking stage is performed.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">// Finally it updates the tracker&#39;s current-frame-KeyFrame struct with any</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">// measurements made.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">// A lot of low-level functionality is split into helper classes:</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">// class TrackerData handles the projection of a MapPoint and stores intermediate results;</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">// class PatchFinder finds a projected MapPoint in the current-frame-KeyFrame.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#ab1aa69f8ff571ded66dadc5d03995bce">  493</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#ab1aa69f8ff571ded66dadc5d03995bce">Tracker::TrackMap</a>()</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">mbUserPressedSpacebar</a>) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a71624b9805dd120f82c9830fc6fc6390">StopTracking</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// Some accounting which will be used for tracking quality assessment:</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>; i++)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">manMeasAttempted</a>[i] = <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[i] = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// The Potentially-Visible-Set (PVS) is split into pyramid levels.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    vector&lt;TrackerData*&gt; avPVS[<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>]; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>; i++)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        avPVS[i].reserve(500);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// For all points in the map..</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">mMap</a>.<a class="code" href="../../d4/d08/a00237.html#a7a2a1024fff77881aaac79ec166f824c">vpPoints</a>.size(); i++)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="../../d9/d21/a00240.html">MapPoint</a> &amp;p= *(<a class="code" href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">mMap</a>.<a class="code" href="../../d4/d08/a00237.html#a7a2a1024fff77881aaac79ec166f824c">vpPoints</a>[i]); </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">// Ensure that this map point has an associated TrackerData struct.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span>(!p.<a class="code" href="../../d9/d21/a00240.html#a95bb7b2c70aaabd5435b8189f6b042be">pTData</a>) p.<a class="code" href="../../d9/d21/a00240.html#a95bb7b2c70aaabd5435b8189f6b042be">pTData</a> = <span class="keyword">new</span> <a class="code" href="../../d2/de1/a00421.html">TrackerData</a>(&amp;p);   </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="../../d2/de1/a00421.html">TrackerData</a> &amp;TData = *p.<a class="code" href="../../d9/d21/a00240.html#a95bb7b2c70aaabd5435b8189f6b042be">pTData</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// Project according to current view, and if it&#39;s not in the image, skip.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        TData.<a class="code" href="../../d2/de1/a00421.html#a7b0b1e73dead9f3d7abb29cf2a61bb62">Project</a>(<a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>); </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span>(!TData.<a class="code" href="../../d2/de1/a00421.html#a10a6acf3f065773eb89e3068b481fe08">bInImage</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">continue</span>;   </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Calculate camera projection derivatives of this point.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        TData.<a class="code" href="../../d2/de1/a00421.html#a6df9723f0eae28d20337a6d254037501">GetDerivsUnsafe</a>(<a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// And check what the PatchFinder (included in TrackerData) makes of the mappoint in this view..</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        TData.<a class="code" href="../../d2/de1/a00421.html#ab0d040785a2c2c7403b9d4435936d82c">nSearchLevel</a> = TData.<a class="code" href="../../d2/de1/a00421.html#afbfe08d6630d0198d0da5b2f805cde8f">Finder</a>.<a class="code" href="../../d7/df2/a00312.html#a5229e920912bc780042293dd184dea66">CalcSearchLevelAndWarpMatrix</a>(TData.<a class="code" href="../../d2/de1/a00421.html#a177c6a63938a71fd86a776a0b2ebbfd9">Point</a>, <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, TData.<a class="code" href="../../d2/de1/a00421.html#adda55346841728473de106805a2d401f">m2CamDerivs</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">if</span>(TData.<a class="code" href="../../d2/de1/a00421.html#ab0d040785a2c2c7403b9d4435936d82c">nSearchLevel</a> == -1)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">continue</span>;   <span class="comment">// a negative search pyramid level indicates an inappropriate warp for this view, so skip.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// Otherwise, this point is suitable to be searched in the current image! Add to the PVS.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        TData.<a class="code" href="../../d2/de1/a00421.html#a253cbc7e93d53d76f29c6305169e88f0">bSearched</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        TData.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        avPVS[TData.<a class="code" href="../../d2/de1/a00421.html#ab0d040785a2c2c7403b9d4435936d82c">nSearchLevel</a>].push_back(&amp;TData);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    };</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Next: A large degree of faffing about and deciding which points are going to be measured!</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// First, randomly shuffle the individual levels of the PVS.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>; i++)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        random_shuffle(avPVS[i].begin(), avPVS[i].end());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">// The next two data structs contain the list of points which will next </span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// be searched for in the image, and then used in pose update.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    vector&lt;TrackerData*&gt; vNextToSearch;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    vector&lt;TrackerData*&gt; vIterationSet;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// Tunable parameters to do with the coarse tracking stage:</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gvnCoarseMin=<a class="code" href="../../dd/d4d/a00519.html#aad9380f4e152b168206993aca03f0b2a">TrackerCoarseMin</a>;   <span class="comment">// Min number of large-scale features for coarse stage</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gvnCoarseMax=<a class="code" href="../../dd/d4d/a00519.html#ad34407164303257b4c2cbf5a63d00dee">TrackerCoarseMax</a>;   <span class="comment">// Max number of large-scale features for coarse stage</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gvnCoarseRange=<a class="code" href="../../dd/d4d/a00519.html#a72297fc488a8d7272019e6ac5e4f7e48">TrackerCoarseRange</a>;       <span class="comment">// Pixel search radius for coarse features</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> gvnCoarseSubPixIts=<a class="code" href="../../dd/d4d/a00519.html#a5907a7cf8a8a9fb0ddc3aa80f6a2b759">TrackerCoarseSubPixIts</a>; <span class="comment">// Max sub-pixel iterations for coarse features</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> gvnCoarseDisabled=<a class="code" href="../../dd/d4d/a00519.html#a7c9fa7dca8ad1c19a7861c570e45e1c7">TrackerDisableCoarse</a>;    <span class="comment">// Set this to 1 to disable coarse stage (except after recovery)</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span> gvdCoarseMinVel=<a class="code" href="../../dd/d4d/a00519.html#a2d13a65a6cbe33ad1920b21934f48dcc">TrackerCoarseMinVelocity</a>;  <span class="comment">// Speed above which coarse stage is used.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nCoarseMax = gvnCoarseMax;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nCoarseRange = gvnCoarseRange;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">mbDidCoarse</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// Set of heuristics to check if we should do a coarse tracking stage.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordtype">bool</span> bTryCoarse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span>(gvnCoarseDisabled || </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;       <a class="code" href="../../db/d4f/a00420.html#a4a2bc67bb156bf730a8bf5c060787edd">mdMSDScaledVelocityMagnitude</a> &lt; gvdCoarseMinVel  ||</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;       nCoarseMax == 0)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        bTryCoarse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a211af2d79bae2e17c9c06a587b7b477b">mbJustRecoveredSoUseCoarse</a>)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        bTryCoarse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        nCoarseMax *=2;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        nCoarseRange *=2;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a211af2d79bae2e17c9c06a587b7b477b">mbJustRecoveredSoUseCoarse</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    };</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// If we do want to do a coarse stage, also check that there&#39;s enough high-level </span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// PV map points. We use the lowest-res two pyramid levels (LEVELS-1 and LEVELS-2),</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// with preference to LEVELS-1.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span>(bTryCoarse &amp;&amp; avPVS[LEVELS-1].size() + avPVS[LEVELS-2].size() &gt; gvnCoarseMin )</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// Now, fill the vNextToSearch struct with an appropriate number of </span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">// TrackerDatas corresponding to coarse map points! This depends on how many</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="comment">// there are in different pyramid levels compared to CoarseMin and CoarseMax.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span>(avPVS[LEVELS-1].size() &lt;= nCoarseMax) </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        { <span class="comment">// Fewer than CoarseMax in LEVELS-1? then take all of them, and remove them from the PVS list.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            vNextToSearch = avPVS[LEVELS-1];</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            avPVS[LEVELS-1].clear();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        { <span class="comment">// ..otherwise choose nCoarseMax at random, again removing from the PVS list.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;nCoarseMax; i++)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                vNextToSearch.push_back(avPVS[LEVELS-1][i]);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            avPVS[LEVELS-1].erase(avPVS[LEVELS-1].begin(), avPVS[LEVELS-1].begin() + nCoarseMax);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// If didn&#39;t source enough from LEVELS-1, get some from LEVELS-2... same as above.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span>(vNextToSearch.size() &lt; nCoarseMax)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMoreCoarseNeeded = nCoarseMax - vNextToSearch.size();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span>(avPVS[LEVELS-2].size() &lt;= nMoreCoarseNeeded)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                vNextToSearch = avPVS[LEVELS-2];</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                avPVS[LEVELS-2].clear();</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;nMoreCoarseNeeded; i++)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    vNextToSearch.push_back(avPVS[LEVELS-2][i]);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                avPVS[LEVELS-2].erase(avPVS[LEVELS-2].begin(), avPVS[LEVELS-2].begin() + nMoreCoarseNeeded);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// Now go and attempt to find these points in the image!</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nFound = <a class="code" href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">SearchForPoints</a>(vNextToSearch, nCoarseRange, gvnCoarseSubPixIts);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        vIterationSet = vNextToSearch;  <span class="comment">// Copy over into the to-be-optimised list.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span>(nFound &gt;= gvnCoarseMin)  <span class="comment">// Were enough found to do any meaningful optimisation?</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">mbDidCoarse</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iter = 0; iter&lt;10; iter++) <span class="comment">// If so: do ten Gauss-Newton pose updates iterations.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="keywordflow">if</span>(iter != 0)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                { <span class="comment">// Re-project the points on all but the first iteration.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vIterationSet.size(); i++)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        <span class="keywordflow">if</span>(vIterationSet[i]-&gt;bFound)  </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                            vIterationSet[i]-&gt;ProjectAndDerivs(<a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vIterationSet.size(); i++)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <span class="keywordflow">if</span>(vIterationSet[i]-&gt;bFound)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                        vIterationSet[i]-&gt;CalcJacobian();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="keywordtype">double</span> dOverrideSigma = 0.0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="comment">// Hack: force the MEstimator to be pretty brutal </span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="comment">// with outliers beyond the fifth iteration.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">if</span>(iter &gt; 5)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                    dOverrideSigma = 1.0;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="comment">// Calculate and apply the pose update...</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6Update = </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#af2941ecf13b40a0bbaf0602b2b3a18a7">CalcPoseUpdate</a>(vIterationSet, dOverrideSigma);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a> = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">SE3&lt;&gt;::exp</a>(v6Update) * <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    };</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// So, at this stage, we may or may not have done a coarse tracking stage.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// Now do the fine tracking stage. This needs many more points!</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordtype">int</span> nFineRange = 10;  <span class="comment">// Pixel search range for the fine stage. </span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">mbDidCoarse</a>)       <span class="comment">// Can use a tighter search if the coarse stage was already done.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        nFineRange = 5;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// What patches shall we use this time? The high-level ones are quite important,</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// so do all of these, with sub-pixel refinement.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordtype">int</span> l = LEVELS - 1;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;avPVS[l].size(); i++)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            avPVS[l][i]-&gt;ProjectAndDerivs(<a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">SearchForPoints</a>(avPVS[l], nFineRange, 8);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;avPVS[l].size(); i++)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            vIterationSet.push_back(avPVS[l][i]);  <span class="comment">// Again, plonk all searched points onto the (maybe already populate) vIterationSet.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    };</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// All the others levels: Initially, put all remaining potentially visible patches onto vNextToSearch.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    vNextToSearch.clear();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l=LEVELS - 2; l&gt;=0; l--)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;avPVS[l].size(); i++)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            vNextToSearch.push_back(avPVS[l][i]);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// But we haven&#39;t got CPU to track _all_ patches in the map - arbitrarily limit </span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// ourselves to 1000, and choose these randomly.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> gvnMaxPatchesPerFrame=<a class="code" href="../../dd/d4d/a00519.html#a6d552b57098f3f9be9c5526e3e810bec">TrackerMaxPatchesPerFrame</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordtype">int</span> nFinePatchesToUse = gvnMaxPatchesPerFrame - vIterationSet.size();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span>(nFinePatchesToUse &lt; 0)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        nFinePatchesToUse = 0;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span>((<span class="keywordtype">int</span>) vNextToSearch.size() &gt; nFinePatchesToUse)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        random_shuffle(vNextToSearch.begin(), vNextToSearch.end());</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        vNextToSearch.resize(nFinePatchesToUse); <span class="comment">// Chop!</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    };</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// If we did a coarse tracking stage: re-project and find derivs of fine points</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">mbDidCoarse</a>)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vNextToSearch.size(); i++)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            vNextToSearch[i]-&gt;ProjectAndDerivs(<a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">// Find fine points in image:</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">SearchForPoints</a>(vNextToSearch, nFineRange, 0);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">// And attach them all to the end of the optimisation-set.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vNextToSearch.size(); i++)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        vIterationSet.push_back(vNextToSearch[i]);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// Again, ten gauss-newton pose update iterations.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6LastUpdate;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    v6LastUpdate = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iter = 0; iter&lt;10; iter++)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordtype">bool</span> bNonLinearIteration; <span class="comment">// For a bit of time-saving: don&#39;t do full nonlinear</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                  <span class="comment">// reprojection at every iteration - it really isn&#39;t necessary!</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">if</span>(iter == 0 || iter == 4 || iter == 9)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            bNonLinearIteration = <span class="keyword">true</span>;   <span class="comment">// Even this is probably overkill, the reason we do many</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">else</span>                            <span class="comment">// iterations is for M-Estimator convergence rather than </span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            bNonLinearIteration = <span class="keyword">false</span>;  <span class="comment">// linearisation effects.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">if</span>(iter != 0)   <span class="comment">// Either way: first iteration doesn&#39;t need projection update.</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span>(bNonLinearIteration)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vIterationSet.size(); i++)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                    <span class="keywordflow">if</span>(vIterationSet[i]-&gt;bFound)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        vIterationSet[i]-&gt;ProjectAndDerivs(<a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vIterationSet.size(); i++)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    <span class="keywordflow">if</span>(vIterationSet[i]-&gt;bFound)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        vIterationSet[i]-&gt;LinearUpdate(v6LastUpdate);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            };</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span>(bNonLinearIteration)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vIterationSet.size(); i++)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="keywordflow">if</span>(vIterationSet[i]-&gt;bFound)</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    vIterationSet[i]-&gt;CalcJacobian();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="comment">// Again, an M-Estimator hack beyond the fifth iteration.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordtype">double</span> dOverrideSigma = 0.0;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">if</span>(iter &gt; 5)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            dOverrideSigma = 16.0;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment">// Calculate and update pose; also store update vector for linear iteration updates.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6Update = </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af2941ecf13b40a0bbaf0602b2b3a18a7">CalcPoseUpdate</a>(vIterationSet, dOverrideSigma, iter==9);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a> = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">SE3&lt;&gt;::exp</a>(v6Update) * <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        v6LastUpdate = v6Update;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    };</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// Update the current keyframe with info on what was found in the frame.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// Strictly speaking this is unnecessary to do every frame, it&#39;ll only be</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// needed if the KF gets added to MapMaker. Do it anyway.</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// Export pose to current keyframe:</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a11ad67f26985d5400a466e2baa8fafa9">se3CfromW</a> = <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// Record successful measurements. Use the KeyFrame-Measurement struct for this.</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a10f009ec03cf0da1e9d2d22445f492b6">mMeasurements</a>.clear();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">for</span>(vector&lt;TrackerData*&gt;::iterator it = vIterationSet.begin();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        it!= vIterationSet.end(); </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        it++)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">if</span>(! (*it)-&gt;bFound)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="../../d3/d1a/a00251.html">Measurement</a> m;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        m.<a class="code" href="../../d3/d1a/a00251.html#a5f70cb9184ceda4c08eb7a87ec415017">v2RootPos</a> = (*it)-&gt;v2Found;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        m.<a class="code" href="../../d3/d1a/a00251.html#a66c7c032b20703d9e081527bb30f086b">nLevel</a> = (*it)-&gt;nSearchLevel;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        m.<a class="code" href="../../d3/d1a/a00251.html#a94a607fe08b7bc351c58ef685a99cc27">bSubPix</a> = (*it)-&gt;bDidSubPix; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a10f009ec03cf0da1e9d2d22445f492b6">mMeasurements</a>[&amp; ((*it)-&gt;Point)] = m;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// Finally, find the mean scene depth from tracked features</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordtype">double</span> dSum = 0;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordtype">double</span> dSumSq = 0;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordtype">int</span> nNum = 0;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">for</span>(vector&lt;TrackerData*&gt;::iterator it = vIterationSet.begin();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            it!= vIterationSet.end(); </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            it++)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">if</span>((*it)-&gt;bFound)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordtype">double</span> z = (*it)-&gt;v3Cam[2];</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                dSum+= z;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                dSumSq+= z*z;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                nNum++;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            };</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">if</span>(nNum &gt; 20)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">dSceneDepthMean</a> = dSum/nNum;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a666d792dbb1302b0ebfc38f2d8355e76">dSceneDepthSigma</a> = sqrt((dSumSq / nNum) - (<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">dSceneDepthMean</a>) * (<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">dSceneDepthMean</a>));</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">// Find points in the image. Uses the PatchFiner struct stored in TrackerData</span></div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">  776</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">Tracker::SearchForPoints</a>(vector&lt;TrackerData*&gt; &amp;vTD, <span class="keywordtype">int</span> nRange, <span class="keywordtype">int</span> nSubPixIts)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;{</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">int</span> nFound = 0;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vTD.size(); i++)   <span class="comment">// for each point..</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">// First, attempt a search at pixel locations which are FAST corners.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">// (PatchFinder::FindPatchCoarse)</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <a class="code" href="../../d2/de1/a00421.html">TrackerData</a> &amp;TD = *vTD[i];</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="../../d7/df2/a00312.html">PatchFinder</a> &amp;Finder = TD.<a class="code" href="../../d2/de1/a00421.html#afbfe08d6630d0198d0da5b2f805cde8f">Finder</a>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        Finder.<a class="code" href="../../d7/df2/a00312.html#a0741e237872edf9d64e47e46a9e24ce1">MakeTemplateCoarseCont</a>(TD.<a class="code" href="../../d2/de1/a00421.html#a177c6a63938a71fd86a776a0b2ebbfd9">Point</a>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span>(Finder.<a class="code" href="../../d7/df2/a00312.html#a0eec8894904ce79ec503d556ca853106">TemplateBad</a>())</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a10a6acf3f065773eb89e3068b481fe08">bInImage</a> = TD.<a class="code" href="../../d2/de1/a00421.html#a50d6b0cca2184253fcf3d0b0bdfd373f">bPotentiallyVisible</a> = TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">manMeasAttempted</a>[Finder.<a class="code" href="../../d7/df2/a00312.html#ab7a3700856e0d86d37bcce1bbc2c4921">GetLevel</a>()]++;  <span class="comment">// Stats for tracking quality assessmenta</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordtype">bool</span> bFound = </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        Finder.<a class="code" href="../../d7/df2/a00312.html#ab0fd585ba92b6b34eeb3c62ebcc30553">FindPatchCoarse</a>(<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>(TD.<a class="code" href="../../d2/de1/a00421.html#a353cdbfd0e3b72d7e40cdeba900c07fc">v2Image</a>), <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, nRange);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        TD.<a class="code" href="../../d2/de1/a00421.html#a253cbc7e93d53d76f29c6305169e88f0">bSearched</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">if</span>(!bFound) </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        TD.<a class="code" href="../../d2/de1/a00421.html#afd41f4f9de63b1ab2bac03fe6cf587a3">dSqrtInvNoise</a> = (1.0 / Finder.<a class="code" href="../../d7/df2/a00312.html#a069473d96f65120cb3b0c084e7961df6">GetLevelScale</a>());</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        nFound++;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[Finder.<a class="code" href="../../d7/df2/a00312.html#ab7a3700856e0d86d37bcce1bbc2c4921">GetLevel</a>()]++;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="comment">// Found the patch in coarse search - are Sub-pixel iterations wanted too?</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">if</span>(nSubPixIts &gt; 0)</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a6d91a5308a4f54ba378bceba04e40ac1">bDidSubPix</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            Finder.<a class="code" href="../../d7/df2/a00312.html#ae420a3f2a92e22913edbc22d937fe6e9">MakeSubPixTemplate</a>();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <span class="keywordtype">bool</span> bSubPixConverges=Finder.<a class="code" href="../../d7/df2/a00312.html#a8d19042d223df949d37476be75c5c47d">IterateSubPixToConvergence</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>, nSubPixIts);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            <span class="keywordflow">if</span>(!bSubPixConverges)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            { <span class="comment">// If subpix doesn&#39;t converge, the patch location is probably very dubious!</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                nFound--;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[Finder.<a class="code" href="../../d7/df2/a00312.html#ab7a3700856e0d86d37bcce1bbc2c4921">GetLevel</a>()]--;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a227bbc3b15423a799f17f74acc6fd5d8">v2Found</a> = Finder.<a class="code" href="../../d7/df2/a00312.html#a151b80cb6e09bd8f91171f717379e85a">GetSubPixPos</a>();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a227bbc3b15423a799f17f74acc6fd5d8">v2Found</a> = Finder.<a class="code" href="../../d7/df2/a00312.html#a408d56e1452dedb8ea6e422524efc860">GetCoarsePosAsVector</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            TD.<a class="code" href="../../d2/de1/a00421.html#a6d91a5308a4f54ba378bceba04e40ac1">bDidSubPix</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> nFound;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;};</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">//Calculate a pose update 6-vector from a bunch of image measurements.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">//User-selectable M-Estimator.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">//Normally this robustly estimates a sigma-squared for all the measurements</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">//to reduce outlier influence, but this can be overridden if</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">//dOverrideSigma is positive. Also, bMarkOutliers set to true</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">//records any instances of a point being marked an outlier measurement</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">//by the Tukey MEstimator.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#af2941ecf13b40a0bbaf0602b2b3a18a7">  839</a></span>&#160;<a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> <a class="code" href="../../db/d4f/a00420.html#af2941ecf13b40a0bbaf0602b2b3a18a7">Tracker::CalcPoseUpdate</a>(vector&lt;TrackerData*&gt; vTD, <span class="keywordtype">double</span> dOverrideSigma, <span class="keywordtype">bool</span> bMarkOutliers)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;{</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="comment">// Which M-estimator are we using?</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordtype">int</span> nEstimator = 0;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">string</span> gvsEstimator=<a class="code" href="../../dd/d4d/a00519.html#a57c26376c5976beb61681999e30c0e1f">TrackerMEstimator</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span>(gvsEstimator == <span class="stringliteral">&quot;Tukey&quot;</span>)</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        nEstimator = 0;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(gvsEstimator == <span class="stringliteral">&quot;Cauchy&quot;</span>)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        nEstimator = 1;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(gvsEstimator == <span class="stringliteral">&quot;Huber&quot;</span>)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        nEstimator = 2;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a> &lt;&lt; <span class="stringliteral">&quot;Invalid TrackerMEstimator, choices are Tukey, Cauchy, Huber&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        nEstimator = 0;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        gvsEstimator = <span class="stringliteral">&quot;Tukey&quot;</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    };</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// Find the covariance-scaled reprojection error for each measurement.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// Also, store the square of these quantities for M-Estimator sigma squared estimation.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    vector&lt;double&gt; vdErrorSquared;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> f=0; f&lt;vTD.size(); f++)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <a class="code" href="../../d2/de1/a00421.html">TrackerData</a> &amp;TD = *vTD[f];</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">if</span>(!TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a>)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        TD.<a class="code" href="../../d2/de1/a00421.html#ad3b449e3483e814bd02cc5d90674f5c4">v2Error_CovScaled</a> = TD.<a class="code" href="../../d2/de1/a00421.html#afd41f4f9de63b1ab2bac03fe6cf587a3">dSqrtInvNoise</a>* (TD.<a class="code" href="../../d2/de1/a00421.html#a227bbc3b15423a799f17f74acc6fd5d8">v2Found</a> - TD.<a class="code" href="../../d2/de1/a00421.html#a353cdbfd0e3b72d7e40cdeba900c07fc">v2Image</a>);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        vdErrorSquared.push_back(TD.<a class="code" href="../../d2/de1/a00421.html#ad3b449e3483e814bd02cc5d90674f5c4">v2Error_CovScaled</a> * TD.<a class="code" href="../../d2/de1/a00421.html#ad3b449e3483e814bd02cc5d90674f5c4">v2Error_CovScaled</a>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    };</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// No valid measurements? Return null update.</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span>(vdErrorSquared.size() == 0)</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/de7/a00523.html#a0bbd0ef9cb4419e4037c4c6e7e2835e3">makeVector</a>( 0,0,0,0,0,0);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">// What is the distribution of errors?</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordtype">double</span> dSigmaSquared;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">if</span>(dOverrideSigma &gt; 0)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        dSigmaSquared = dOverrideSigma; <span class="comment">// Bit of a waste having stored the vector of square errors in this case!</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">if</span> (nEstimator == 0)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            dSigmaSquared = <a class="code" href="../../dd/d47/a00445.html#ace010a5e9adbd367ee7881fe1b2c89bf">Tukey::FindSigmaSquared</a>(vdErrorSquared);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nEstimator == 1)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            dSigmaSquared = <a class="code" href="../../db/d3a/a00040.html#ab8a0a63248b9dae22e624e8f8ef82a7a">Cauchy::FindSigmaSquared</a>(vdErrorSquared);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            dSigmaSquared = <a class="code" href="../../d6/daa/a00187.html#a08bf55c900bb45559c0e34e301098661">Huber::FindSigmaSquared</a>(vdErrorSquared);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// The TooN WLSCholesky class handles reweighted least squares.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// It just needs errors and jacobians.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <a class="code" href="../../d4/d4b/a00471.html">WLS&lt;6&gt;</a> wls;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    wls.<a class="code" href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">add_prior</a>(100.0); <span class="comment">// Stabilising prior</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> f=0; f&lt;vTD.size(); f++)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <a class="code" href="../../d2/de1/a00421.html">TrackerData</a> &amp;TD = *vTD[f];</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span>(!TD.<a class="code" href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">bFound</a>)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> &amp;v2 = TD.<a class="code" href="../../d2/de1/a00421.html#ad3b449e3483e814bd02cc5d90674f5c4">v2Error_CovScaled</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordtype">double</span> dErrorSq = v2 * v2;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordtype">double</span> dWeight;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">if</span>(nEstimator == 0)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            dWeight= <a class="code" href="../../dd/d47/a00445.html#ad8539d6abe665a29a818b6161059cba4">Tukey::Weight</a>(dErrorSq, dSigmaSquared);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nEstimator == 1)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            dWeight= <a class="code" href="../../db/d3a/a00040.html#aa562a01d570850f5061aea97190fd839">Cauchy::Weight</a>(dErrorSq, dSigmaSquared);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            dWeight= <a class="code" href="../../d6/daa/a00187.html#a8ceb8b36888818396dcfde85a02322bc">Huber::Weight</a>(dErrorSq, dSigmaSquared);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="comment">// Inlier/outlier accounting, only really works for cut-off estimators such as Tukey.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">if</span>(dWeight == 0.0)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordflow">if</span>(bMarkOutliers)</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                TD.<a class="code" href="../../d2/de1/a00421.html#a177c6a63938a71fd86a776a0b2ebbfd9">Point</a>.<a class="code" href="../../d9/d21/a00240.html#a1f48161af9746079917bc36150c5c0df">nMEstimatorOutlierCount</a>++;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            <span class="keywordflow">if</span>(bMarkOutliers)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                TD.<a class="code" href="../../d2/de1/a00421.html#a177c6a63938a71fd86a776a0b2ebbfd9">Point</a>.<a class="code" href="../../d9/d21/a00240.html#af3b32587aca37b06999a3a896e898dff">nMEstimatorInlierCount</a>++;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;2,6&gt;</a> &amp;m26Jac = TD.<a class="code" href="../../d2/de1/a00421.html#a5ba7b657c53c69fc4c53d0f473d6d2a7">m26Jacobian</a>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(v2[0], TD.<a class="code" href="../../d2/de1/a00421.html#afd41f4f9de63b1ab2bac03fe6cf587a3">dSqrtInvNoise</a> * m26Jac[0], dWeight); <span class="comment">// These two lines are currently</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(v2[1], TD.<a class="code" href="../../d2/de1/a00421.html#afd41f4f9de63b1ab2bac03fe6cf587a3">dSqrtInvNoise</a> * m26Jac[1], dWeight); <span class="comment">// the slowest bit of poseits</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    wls.<a class="code" href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">compute</a>();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span> wls.<a class="code" href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">get_mu</a>();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">// Just add the current velocity to the current pose.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">// N.b. this doesn&#39;t actually use time in any way, i.e. it assumes</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">// a one-frame-per-second camera. Skipped frames etc</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">// are not handled properly here.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#aebcd5315208505a06ec6769432afe678">  932</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#aebcd5315208505a06ec6769432afe678">Tracker::ApplyMotionModel</a>()</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a395f0be90e6fe8592e1976a020677ecf">mse3StartPos</a> = <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6Velocity = <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#a096b92ff1d7ca7547032e890f90d6bcd">mbUseSBIInit</a>)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        v6Velocity.slice&lt;3,3&gt;() = <a class="code" href="../../db/d4f/a00420.html#a7cb56151ec12ac53c52d741748421d72">mv6SBIRot</a>.slice&lt;3,3&gt;();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        v6Velocity[0] = 0.0;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        v6Velocity[1] = 0.0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a> = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">SE3&lt;&gt;::exp</a>(v6Velocity) * <a class="code" href="../../db/d4f/a00420.html#a395f0be90e6fe8592e1976a020677ecf">mse3StartPos</a>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;};</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">// The motion model is entirely the tracker&#39;s, and is kept as a decaying</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">// constant velocity model.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#ab9b0b18e15987c60173971c470e98a9e">  948</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#ab9b0b18e15987c60173971c470e98a9e">Tracker::UpdateMotionModel</a>()</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;{</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> se3NewFromOld = <a class="code" href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">mse3CamFromWorld</a> * <a class="code" href="../../db/d4f/a00420.html#a395f0be90e6fe8592e1976a020677ecf">mse3StartPos</a>.<a class="code" href="../../df/d73/a00358.html#ad3b5bb26f63db1896fd8976fe356856b">inverse</a>();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6Motion = <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;::ln</a>(se3NewFromOld);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6OldVel = <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a> = 0.9 * (0.5 * v6Motion + 0.5 * v6OldVel);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aa7dfbc3172a658cbc6ebe311d257082d">mdVelocityMagnitude</a> = sqrt(<a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a> * <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// Also make an estimate of this which has been scaled by the mean scene depth.</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">// This is used to decide if we should use a coarse tracking stage.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// We can tolerate more translational vel when far away from scene!</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="../../d9/d69/a00451.html">Vector&lt;6&gt;</a> v6 = <a class="code" href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">mv6CameraVelocity</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    v6.slice&lt;0,3&gt;() *= 1.0 / <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">dSceneDepthMean</a>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a4a2bc67bb156bf730a8bf5c060787edd">mdMSDScaledVelocityMagnitude</a> = sqrt(v6*v6);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">// Time to add a new keyframe? The MapMaker handles most of this.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a180b9032fc676cd575876a6ed33c0772">  966</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a180b9032fc676cd575876a6ed33c0772">Tracker::AddNewKeyFrame</a>()</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#aa7d96efe0b86dcc43c64bce43d94d0fb">AddKeyFrame</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#aecbcf286d0acc18dcf4d1a4e2f29951f">mnLastKeyFrameDropped</a> = <a class="code" href="../../db/d4f/a00420.html#a9333d0a0755ed26a3734326089abe67f">mnFrame</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">// Some heuristics to decide if tracking is any good, for this frame.</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">// This influences decisions to add key-frames, and eventually</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">// causes the tracker to attempt relocalisation.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#ad6c77bd6b694f4fe2f69eb4de7d14a41">  975</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#ad6c77bd6b694f4fe2f69eb4de7d14a41">Tracker::AssessTrackingQuality</a>()</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;{</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordtype">int</span> nTotalAttempted = 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">int</span> nTotalFound = 0;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordtype">int</span> nLargeAttempted = 0;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordtype">int</span> nLargeFound = 0;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a>; i++)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        nTotalAttempted += <a class="code" href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">manMeasAttempted</a>[i];</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        nTotalFound += <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[i];</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">if</span>(i&gt;=2) nLargeAttempted += <a class="code" href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">manMeasAttempted</a>[i];</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">if</span>(i&gt;=2) nLargeFound += <a class="code" href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">manMeasFound</a>[i];</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span>(nTotalFound == 0 || nTotalAttempted == 0)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">BAD</a>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordtype">double</span> dTotalFracFound = (double) nTotalFound / nTotalAttempted;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordtype">double</span> dLargeFracFound;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span>(nLargeAttempted &gt; 10)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            dLargeFracFound = (double) nLargeFound / nLargeAttempted;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            dLargeFracFound = dTotalFracFound;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> gvdQualityGood=<a class="code" href="../../dd/d4d/a00519.html#a59e4b6b1426336c03b05836bbae9c69b">TrackerTrackingQualityGood</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> gvdQualityLost=<a class="code" href="../../dd/d4d/a00519.html#a1335f1b2f72bb6d85bccfee021b84fab">TrackerTrackingQualityLost</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">if</span>(dTotalFracFound &gt; gvdQualityGood)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb">GOOD</a>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dLargeFracFound &lt; gvdQualityLost)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">BAD</a>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629aa2af2d37e4471913c07b1164c260dc29">DODGY</a>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> == <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629aa2af2d37e4471913c07b1164c260dc29">DODGY</a>)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="comment">// Further heuristics to see if it&#39;s actually bad, not just dodgy...</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="comment">// If the camera pose estimate has run miles away, it&#39;s probably bad.</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">mMapMaker</a>.<a class="code" href="../../da/d2e/a00238.html#ad6e7b73f40be91fe7f58d5ed724db787">IsDistanceToNearestKeyFrameExcessive</a>(<a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>))</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a> = <a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">BAD</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">mTrackingQuality</a>==<a class="code" href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">BAD</a>)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af5e6aa40e2ad54898e7c101c13024a15">mnLostFrames</a>++;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="../../db/d4f/a00420.html#af5e6aa40e2ad54898e7c101c13024a15">mnLostFrames</a> = 0;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div>
<div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a559d6bc30cc6240539b67c6b24180722"> 1027</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="../../db/d4f/a00420.html#a559d6bc30cc6240539b67c6b24180722">Tracker::GetMessageForUser</a>()</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;{</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">mMessageForUser</a>.str();</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a6dc43439a13840577171ab415ee09855"> 1032</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d4f/a00420.html#a6dc43439a13840577171ab415ee09855">Tracker::CalcSBIRotation</a>()</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a>-&gt;<a class="code" href="../../db/d95/a00391.html#ab37342868b42c2cbb25ef28b8663861e">MakeJacs</a>();</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    pair&lt;SE2&lt;&gt;, <span class="keywordtype">double</span>&gt; result_pair;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    result_pair = <a class="code" href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">mpSBIThisFrame</a>-&gt;<a class="code" href="../../db/d95/a00391.html#ac55c52155ae5c9876ec6a54e8312cf0f">IteratePosRelToTarget</a>(*<a class="code" href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">mpSBILastFrame</a>, 6);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> se3Adjust = <a class="code" href="../../db/d95/a00391.html#ac2c88581f0ae3aab540dcc4a78f914d0">SmallBlurryImage::SE3fromSE2</a>(result_pair.first, <a class="code" href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">mCamera</a>);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="../../db/d4f/a00420.html#a7cb56151ec12ac53c52d741748421d72">mv6SBIRot</a> = se3Adjust.<a class="code" href="../../df/d73/a00358.html#a12c0200f4807dedd578b3eee10842986">ln</a>();</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../d2/de1/a00421.html#a36f459fef07a976b57372c6d8c28b845">TrackerData::irImageSize</a>;  <span class="comment">// Static member of TrackerData lives here</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="../../db/d4f/a00420.html#a87afe757cc28a0058b3fab724830eabc"> 1043</a></span>&#160;std::string <a class="code" href="../../db/d4f/a00420.html#a87afe757cc28a0058b3fab724830eabc">Tracker::getVCorners</a>()</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    std::ostringstream corners;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">//    for (int i=0; i&lt;mCurrentKF.aLevels[0].vCorners.size(); i++)//mCurrentKF.aLevels[0].vCorners.size()</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">//        corners &lt;&lt; mCurrentKF.aLevels[0].vCorners[i].x &lt;&lt;&quot;,&quot;&lt;&lt; mCurrentKF.aLevels[0].vCorners[i].y&lt;&lt;&quot;;&quot;;</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">//cout &lt;&lt;   mCurrentKF.aLevels[0].vCorners.size()/2 &lt;&lt; endl;</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    corners &lt;&lt; <a class="code" href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">mCurrentKF</a>.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[0].<a class="code" href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">vCorners</a>.size();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">return</span> corners.str();</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div>
<div class="ttc" id="a00420_html_a0139a15490ed227e3355d4518e45ee6e"><div class="ttname"><a href="../../db/d4f/a00420.html#a0139a15490ed227e3355d4518e45ee6e">Tracker::Tracker</a></div><div class="ttdeci">Tracker(CVD::ImageRef irVideoSize, const ATANCamera &amp;c, Map &amp;m, MapMaker &amp;mm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00028">Tracker.cpp:28</a></div></div>
<div class="ttc" id="a00420_html_a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2"><div class="ttname"><a href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629ab164d3977f2e81862773adae643f87d2">Tracker::BAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00117">Tracker.h:117</a></div></div>
<div class="ttc" id="a00251_html_a94a607fe08b7bc351c58ef685a99cc27"><div class="ttname"><a href="../../d3/d1a/a00251.html#a94a607fe08b7bc351c58ef685a99cc27">Measurement::bSubPix</a></div><div class="ttdeci">bool bSubPix</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00047">KeyFrame.h:47</a></div></div>
<div class="ttc" id="a00422_html"><div class="ttname"><a href="../../db/d43/a00422.html">Trail</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00039">Tracker.h:39</a></div></div>
<div class="ttc" id="a00187_html_a8ceb8b36888818396dcfde85a02322bc"><div class="ttname"><a href="../../d6/daa/a00187.html#a8ceb8b36888818396dcfde85a02322bc">Huber::Weight</a></div><div class="ttdeci">static double Weight(double dErrorSquared, double dSigmaSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00129">MEstimator.h:129</a></div></div>
<div class="ttc" id="a00519_html_a1335f1b2f72bb6d85bccfee021b84fab"><div class="ttname"><a href="../../dd/d4d/a00519.html#a1335f1b2f72bb6d85bccfee021b84fab">TrackerTrackingQualityLost</a></div><div class="ttdeci">const double TrackerTrackingQualityLost</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00042">globals.h:42</a></div></div>
<div class="ttc" id="a00421_html_a6df9723f0eae28d20337a6d254037501"><div class="ttname"><a href="../../d2/de1/a00421.html#a6df9723f0eae28d20337a6d254037501">TrackerData::GetDerivsUnsafe</a></div><div class="ttdeci">void GetDerivsUnsafe(ATANCamera &amp;Cam)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00071">TrackerData.h:71</a></div></div>
<div class="ttc" id="a00519_html_ad34407164303257b4c2cbf5a63d00dee"><div class="ttname"><a href="../../dd/d4d/a00519.html#ad34407164303257b4c2cbf5a63d00dee">TrackerCoarseMax</a></div><div class="ttdeci">const int TrackerCoarseMax</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00033">globals.h:33</a></div></div>
<div class="ttc" id="a00420_html_af2941ecf13b40a0bbaf0602b2b3a18a7"><div class="ttname"><a href="../../db/d4f/a00420.html#af2941ecf13b40a0bbaf0602b2b3a18a7">Tracker::CalcPoseUpdate</a></div><div class="ttdeci">Vector&lt; 6 &gt; CalcPoseUpdate(std::vector&lt; TrackerData * &gt; vTD, double dOverrideSigma=0.0, bool bMarkOutliers=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00839">Tracker.cpp:839</a></div></div>
<div class="ttc" id="a00238_html_ad6e7b73f40be91fe7f58d5ed724db787"><div class="ttname"><a href="../../da/d2e/a00238.html#ad6e7b73f40be91fe7f58d5ed724db787">MapMaker::IsDistanceToNearestKeyFrameExcessive</a></div><div class="ttdeci">bool IsDistanceToNearestKeyFrameExcessive(KeyFrame &amp;kCurrent)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l01046">MapMaker.cpp:1046</a></div></div>
<div class="ttc" id="a00519_html_a72e78bd45df360f888f03e1280e7c09c"><div class="ttname"><a href="../../dd/d4d/a00519.html#a72e78bd45df360f888f03e1280e7c09c">LOGV</a></div><div class="ttdeci">#define LOGV(LOG_TAG,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00010">globals.h:10</a></div></div>
<div class="ttc" id="a00519_html_a72297fc488a8d7272019e6ac5e4f7e48"><div class="ttname"><a href="../../dd/d4d/a00519.html#a72297fc488a8d7272019e6ac5e4f7e48">TrackerCoarseRange</a></div><div class="ttdeci">const int TrackerCoarseRange</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00034">globals.h:34</a></div></div>
<div class="ttc" id="a00391_html_ac55c52155ae5c9876ec6a54e8312cf0f"><div class="ttname"><a href="../../db/d95/a00391.html#ac55c52155ae5c9876ec6a54e8312cf0f">SmallBlurryImage::IteratePosRelToTarget</a></div><div class="ttdeci">std::pair&lt; SE2&lt;&gt;, double &gt; IteratePosRelToTarget(SmallBlurryImage &amp;other, int nIterations=10)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00098">SmallBlurryImage.cpp:98</a></div></div>
<div class="ttc" id="a00519_html_a7ce0df38eb467e59f209470c8f5ac4e6"><div class="ttname"><a href="../../dd/d4d/a00519.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a></div><div class="ttdeci">#define LOG_TAG</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00009">globals.h:9</a></div></div>
<div class="ttc" id="a00519_html_a2d13a65a6cbe33ad1920b21934f48dcc"><div class="ttname"><a href="../../dd/d4d/a00519.html#a2d13a65a6cbe33ad1920b21934f48dcc">TrackerCoarseMinVelocity</a></div><div class="ttdeci">const double TrackerCoarseMinVelocity</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00038">globals.h:38</a></div></div>
<div class="ttc" id="a00420_html_adb575d9b6ec08a332c38b0d1624c1160"><div class="ttname"><a href="../../db/d4f/a00420.html#adb575d9b6ec08a332c38b0d1624c1160">Tracker::mpSBILastFrame</a></div><div class="ttdeci">SmallBlurryImage * mpSBILastFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00125">Tracker.h:125</a></div></div>
<div class="ttc" id="a00027_html"><div class="ttname"><a href="../../d0/d33/a00027.html">ATANCamera</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc5/a00480_source.html#l00066">ATANCamera.h:66</a></div></div>
<div class="ttc" id="a00519_html_a2f9011ce315b516bfec32a2d907bf274"><div class="ttname"><a href="../../dd/d4d/a00519.html#a2f9011ce315b516bfec32a2d907bf274">TrackerMiniPatchMaxSSD</a></div><div class="ttdeci">const int TrackerMiniPatchMaxSSD</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00031">globals.h:31</a></div></div>
<div class="ttc" id="a00391_html"><div class="ttname"><a href="../../db/d95/a00391.html">SmallBlurryImage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00017">SmallBlurryImage.h:17</a></div></div>
<div class="ttc" id="a00421_html_a227bbc3b15423a799f17f74acc6fd5d8"><div class="ttname"><a href="../../d2/de1/a00421.html#a227bbc3b15423a799f17f74acc6fd5d8">TrackerData::v2Found</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2Found</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00038">TrackerData.h:38</a></div></div>
<div class="ttc" id="a00240_html_a1f48161af9746079917bc36150c5c0df"><div class="ttname"><a href="../../d9/d21/a00240.html#a1f48161af9746079917bc36150c5c0df">MapPoint::nMEstimatorOutlierCount</a></div><div class="ttdeci">int nMEstimatorOutlierCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddf/a00544_source.html#l00070">MapPoint.h:70</a></div></div>
<div class="ttc" id="a00312_html_ab0fd585ba92b6b34eeb3c62ebcc30553"><div class="ttname"><a href="../../d7/df2/a00312.html#ab0fd585ba92b6b34eeb3c62ebcc30553">PatchFinder::FindPatchCoarse</a></div><div class="ttdeci">bool FindPatchCoarse(CVD::ImageRef ir, KeyFrame &amp;kf, unsigned int nRange)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d75/a00555_source.html#l00179">PatchFinder.cpp:179</a></div></div>
<div class="ttc" id="a00556_html"><div class="ttname"><a href="../../d6/d95/a00556.html">PatchFinder.h</a></div></div>
<div class="ttc" id="a00358_html_a6f349984d701630586ac4955c35733f7"><div class="ttname"><a href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">TooN::SE3::get_rotation</a></div><div class="ttdeci">SO3&lt; Precision &gt; &amp; get_rotation()</div><div class="ttdoc">Returns the rotation part of the transformation as a SO3. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00064">se3.h:64</a></div></div>
<div class="ttc" id="a00421_html_a6d91a5308a4f54ba378bceba04e40ac1"><div class="ttname"><a href="../../d2/de1/a00421.html#a6d91a5308a4f54ba378bceba04e40ac1">TrackerData::bDidSubPix</a></div><div class="ttdeci">bool bDidSubPix</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00037">TrackerData.h:37</a></div></div>
<div class="ttc" id="a00312_html_ab7a3700856e0d86d37bcce1bbc2c4921"><div class="ttname"><a href="../../d7/df2/a00312.html#ab7a3700856e0d86d37bcce1bbc2c4921">PatchFinder::GetLevel</a></div><div class="ttdeci">int GetLevel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00063">PatchFinder.h:63</a></div></div>
<div class="ttc" id="a00420_html_a276f1f7ea681c49854f068863e196757"><div class="ttname"><a href="../../db/d4f/a00420.html#a276f1f7ea681c49854f068863e196757">Tracker::mvQueuedCommands</a></div><div class="ttdeci">std::vector&lt; Command &gt; mvQueuedCommands</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00139">Tracker.h:139</a></div></div>
<div class="ttc" id="a00420_html_ac80746f367622088267855457649e396"><div class="ttname"><a href="../../db/d4f/a00420.html#ac80746f367622088267855457649e396">Tracker::GUICommandCallBack</a></div><div class="ttdeci">static void GUICommandCallBack(void *ptr, std::string sCommand, std::string sParams)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00295">Tracker.cpp:295</a></div></div>
<div class="ttc" id="a00252_html_a48ef12c80bc77f31d50bb143f23729d1"><div class="ttname"><a href="../../dc/ded/a00252.html#a48ef12c80bc77f31d50bb143f23729d1">MiniPatch::SampleFromImage</a></div><div class="ttdeci">void SampleFromImage(CVD::ImageRef irPos, CVD::BasicImage&lt; CVD::byte &gt; &amp;im)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de6/a00548_source.html#l00085">MiniPatch.cpp:85</a></div></div>
<div class="ttc" id="a00420_html_a2050e4644bc7bf2ab8d99fbbd72c0c62"><div class="ttname"><a href="../../db/d4f/a00420.html#a2050e4644bc7bf2ab8d99fbbd72c0c62">Tracker::mv6CameraVelocity</a></div><div class="ttdeci">Vector&lt; 6 &gt; mv6CameraVelocity</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00102">Tracker.h:102</a></div></div>
<div class="ttc" id="a00420_html_af19e9c2a106981394b5b43a33c0b6d86"><div class="ttname"><a href="../../db/d4f/a00420.html#af19e9c2a106981394b5b43a33c0b6d86">Tracker::mMapMaker</a></div><div class="ttdeci">MapMaker &amp; mMapMaker</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00069">Tracker.h:69</a></div></div>
<div class="ttc" id="a00519_html_a57c26376c5976beb61681999e30c0e1f"><div class="ttname"><a href="../../dd/d4d/a00519.html#a57c26376c5976beb61681999e30c0e1f">TrackerMEstimator</a></div><div class="ttdeci">const std::string TrackerMEstimator</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00040">globals.h:40</a></div></div>
<div class="ttc" id="a00532_html_a6458dd35f4831329061f763080655cf7"><div class="ttname"><a href="../../d7/d41/a00532.html#a6458dd35f4831329061f763080655cf7">LEVELS</a></div><div class="ttdeci">#define LEVELS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00033">KeyFrame.h:33</a></div></div>
<div class="ttc" id="a00040_html_aa562a01d570850f5061aea97190fd839"><div class="ttname"><a href="../../db/d3a/a00040.html#aa562a01d570850f5061aea97190fd839">Cauchy::Weight</a></div><div class="ttdeci">static double Weight(double dErrorSquared, double dSigmaSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00095">MEstimator.h:95</a></div></div>
<div class="ttc" id="a00420_html_a944de6e8e520ad5aca4ec51867608629aa2af2d37e4471913c07b1164c260dc29"><div class="ttname"><a href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629aa2af2d37e4471913c07b1164c260dc29">Tracker::DODGY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00117">Tracker.h:117</a></div></div>
<div class="ttc" id="a00422_html_a1fea856fb1ebe81a0844cf4a006afc4b"><div class="ttname"><a href="../../db/d43/a00422.html#a1fea856fb1ebe81a0844cf4a006afc4b">Trail::mPatch</a></div><div class="ttdeci">MiniPatch mPatch</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00041">Tracker.h:41</a></div></div>
<div class="ttc" id="a00601_html"><div class="ttname"><a href="../../d6/db2/a00601.html">Tracker.h</a></div></div>
<div class="ttc" id="a00422_html_a398fc4f3eceb6e72fce8a59fdb3a898f"><div class="ttname"><a href="../../db/d43/a00422.html#a398fc4f3eceb6e72fce8a59fdb3a898f">Trail::irCurrentPos</a></div><div class="ttdeci">CVD::ImageRef irCurrentPos</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00042">Tracker.h:42</a></div></div>
<div class="ttc" id="a00420_html_ab1aa69f8ff571ded66dadc5d03995bce"><div class="ttname"><a href="../../db/d4f/a00420.html#ab1aa69f8ff571ded66dadc5d03995bce">Tracker::TrackMap</a></div><div class="ttdeci">void TrackMap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00493">Tracker.cpp:493</a></div></div>
<div class="ttc" id="a00421_html_a50d6b0cca2184253fcf3d0b0bdfd373f"><div class="ttname"><a href="../../d2/de1/a00421.html#a50d6b0cca2184253fcf3d0b0bdfd373f">TrackerData::bPotentiallyVisible</a></div><div class="ttdeci">bool bPotentiallyVisible</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00032">TrackerData.h:32</a></div></div>
<div class="ttc" id="a00238_html_ab6bd69f268aa8f05416c5071b93d5731"><div class="ttname"><a href="../../da/d2e/a00238.html#ab6bd69f268aa8f05416c5071b93d5731">MapMaker::QueueSize</a></div><div class="ttdeci">int QueueSize()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddb/a00542_source.html#l00058">MapMaker.h:58</a></div></div>
<div class="ttc" id="a00547_html"><div class="ttname"><a href="../../d9/d8b/a00547.html">MEstimator.h</a></div></div>
<div class="ttc" id="a00421_html_a5ba7b657c53c69fc4c53d0f473d6d2a7"><div class="ttname"><a href="../../d2/de1/a00421.html#a5ba7b657c53c69fc4c53d0f473d6d2a7">TrackerData::m26Jacobian</a></div><div class="ttdeci">Matrix&lt; 2, 6 &gt; m26Jacobian</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00044">TrackerData.h:44</a></div></div>
<div class="ttc" id="a00232_html_aa2fda57784edbadc7673541d76d32384"><div class="ttname"><a href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">Level::im</a></div><div class="ttdeci">CVD::Image&lt; CVD::byte &gt; im</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00059">KeyFrame.h:59</a></div></div>
<div class="ttc" id="a00420_html_a323e7dcdde9c3cd16875c88fdab28198"><div class="ttname"><a href="../../db/d4f/a00420.html#a323e7dcdde9c3cd16875c88fdab28198">Tracker::SearchForPoints</a></div><div class="ttdeci">int SearchForPoints(std::vector&lt; TrackerData * &gt; &amp;vTD, int nRange, int nFineIts)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00776">Tracker.cpp:776</a></div></div>
<div class="ttc" id="a00238_html_a63ec8516f1baefda696eeca0f7a2f376"><div class="ttname"><a href="../../da/d2e/a00238.html#a63ec8516f1baefda696eeca0f7a2f376">MapMaker::ResetDone</a></div><div class="ttdeci">bool ResetDone()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l00126">MapMaker.cpp:126</a></div></div>
<div class="ttc" id="a00226_html_a9ec9520a915b479c66d6c36402a48d75"><div class="ttname"><a href="../../dc/d55/a00226.html#a9ec9520a915b479c66d6c36402a48d75">KeyFrame::bFixed</a></div><div class="ttdeci">bool bFixed</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00083">KeyFrame.h:83</a></div></div>
<div class="ttc" id="a00312_html_ae420a3f2a92e22913edbc22d937fe6e9"><div class="ttname"><a href="../../d7/df2/a00312.html#ae420a3f2a92e22913edbc22d937fe6e9">PatchFinder::MakeSubPixTemplate</a></div><div class="ttdeci">void MakeSubPixTemplate()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d75/a00555_source.html#l00254">PatchFinder.cpp:254</a></div></div>
<div class="ttc" id="a00226_html_a666d792dbb1302b0ebfc38f2d8355e76"><div class="ttname"><a href="../../dc/d55/a00226.html#a666d792dbb1302b0ebfc38f2d8355e76">KeyFrame::dSceneDepthSigma</a></div><div class="ttdeci">double dSceneDepthSigma</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00092">KeyFrame.h:92</a></div></div>
<div class="ttc" id="a00420_html_a2a3192b83974be4231d6b47a60397bd5"><div class="ttname"><a href="../../db/d4f/a00420.html#a2a3192b83974be4231d6b47a60397bd5">Tracker::thresholdReached</a></div><div class="ttdeci">bool thresholdReached</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00143">Tracker.h:143</a></div></div>
<div class="ttc" id="a00361_html_afe587d9840262ee7407234d4f6e9e132"><div class="ttname"><a href="../../d7/ddb/a00361.html#afe587d9840262ee7407234d4f6e9e132">SendMessage::SendPoseToUnity</a></div><div class="ttdeci">void SendPoseToUnity(float r1, float r2, float r3, double t1, double t2, double t3)</div><div class="ttdoc">Send pose to Unity3D </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbe/a00574_source.html#l00063">SendMessage.cpp:63</a></div></div>
<div class="ttc" id="a00421_html"><div class="ttname"><a href="../../d2/de1/a00421.html">TrackerData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00017">TrackerData.h:17</a></div></div>
<div class="ttc" id="a00420_html_a71624b9805dd120f82c9830fc6fc6390"><div class="ttname"><a href="../../db/d4f/a00420.html#a71624b9805dd120f82c9830fc6fc6390">Tracker::StopTracking</a></div><div class="ttdeci">void StopTracking()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00054">Tracker.cpp:54</a></div></div>
<div class="ttc" id="a00445_html_ace010a5e9adbd367ee7881fe1b2c89bf"><div class="ttname"><a href="../../dd/d47/a00445.html#ace010a5e9adbd367ee7881fe1b2c89bf">Tukey::FindSigmaSquared</a></div><div class="ttdeci">static double FindSigmaSquared(std::vector&lt; double &gt; &amp;vdErrorSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00077">MEstimator.h:77</a></div></div>
<div class="ttc" id="a00040_html_ab8a0a63248b9dae22e624e8f8ef82a7a"><div class="ttname"><a href="../../db/d3a/a00040.html#ab8a0a63248b9dae22e624e8f8ef82a7a">Cauchy::FindSigmaSquared</a></div><div class="ttdeci">static double FindSigmaSquared(std::vector&lt; double &gt; &amp;vdErrorSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00111">MEstimator.h:111</a></div></div>
<div class="ttc" id="a00420_html_a962ea7c5dadf7f766919af960f069f86"><div class="ttname"><a href="../../db/d4f/a00420.html#a962ea7c5dadf7f766919af960f069f86">Tracker::manMeasFound</a></div><div class="ttdeci">int manMeasFound[LEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00116">Tracker.h:116</a></div></div>
<div class="ttc" id="a00581_html_a025791393b56feb9a61c13b1d7eeafd5ab68c130eb6caa378c2c394e9054bbb63"><div class="ttname"><a href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5ab68c130eb6caa378c2c394e9054bbb63">Finished</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc8/a00581_source.html#l00016">SLAMflex.h:16</a></div></div>
<div class="ttc" id="a00471_html_a4a3b86f43627f63e794e545b456b06dc"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">TooN::WLS::add_mJ</a></div><div class="ttdeci">void add_mJ(Precision m, const Vector&lt; Size, Precision, B2 &gt; &amp;J, Precision weight=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00100">wls.h:100</a></div></div>
<div class="ttc" id="a00420_html_a25750482105d693a6e0cf86ec7134a97"><div class="ttname"><a href="../../db/d4f/a00420.html#a25750482105d693a6e0cf86ec7134a97">Tracker::TrailTracking_Start</a></div><div class="ttdeci">void TrailTracking_Start()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00413">Tracker.cpp:413</a></div></div>
<div class="ttc" id="a00420_html_a1e33cecc2da6e2b29be1dcbb18b20bf8"><div class="ttname"><a href="../../db/d4f/a00420.html#a1e33cecc2da6e2b29be1dcbb18b20bf8">Tracker::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00074">Tracker.cpp:74</a></div></div>
<div class="ttc" id="a00420_html_aebcd5315208505a06ec6769432afe678"><div class="ttname"><a href="../../db/d4f/a00420.html#aebcd5315208505a06ec6769432afe678">Tracker::ApplyMotionModel</a></div><div class="ttdeci">void ApplyMotionModel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00932">Tracker.cpp:932</a></div></div>
<div class="ttc" id="a00312_html_a5229e920912bc780042293dd184dea66"><div class="ttname"><a href="../../d7/df2/a00312.html#a5229e920912bc780042293dd184dea66">PatchFinder::CalcSearchLevelAndWarpMatrix</a></div><div class="ttdeci">int CalcSearchLevelAndWarpMatrix(MapPoint &amp;p, SE3&lt;&gt; se3CFromW, Matrix&lt; 2 &gt; &amp;m2CamDerivs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d75/a00555_source.html#l00033">PatchFinder.cpp:33</a></div></div>
<div class="ttc" id="a00361_html_a5a856797c959c03cb9b014100c607e8a"><div class="ttname"><a href="../../d7/ddb/a00361.html#a5a856797c959c03cb9b014100c607e8a">SendMessage::SendStringToUnity</a></div><div class="ttdeci">void SendStringToUnity(const char *st)</div><div class="ttdoc">Send string to Unity3D </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbe/a00574_source.html#l00046">SendMessage.cpp:46</a></div></div>
<div class="ttc" id="a00420_html_a784953d787bbb4ee4eb5c19b7562e605"><div class="ttname"><a href="../../db/d4f/a00420.html#a784953d787bbb4ee4eb5c19b7562e605">Tracker::GetEulerAnglesFromRotationMatrix</a></div><div class="ttdeci">void GetEulerAnglesFromRotationMatrix(Matrix&lt; 3, 3, double &gt; &amp;m, float &amp;heading, float &amp;attitude, float &amp;bank)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00254">Tracker.cpp:254</a></div></div>
<div class="ttc" id="a00420_html_aa7dfbc3172a658cbc6ebe311d257082d"><div class="ttname"><a href="../../db/d4f/a00420.html#aa7dfbc3172a658cbc6ebe311d257082d">Tracker::mdVelocityMagnitude</a></div><div class="ttdeci">double mdVelocityMagnitude</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00103">Tracker.h:103</a></div></div>
<div class="ttc" id="a00238_html_ae0efe8db35ef6dca5309bdd1d061906d"><div class="ttname"><a href="../../da/d2e/a00238.html#ae0efe8db35ef6dca5309bdd1d061906d">MapMaker::NeedNewKeyFrame</a></div><div class="ttdeci">bool NeedNewKeyFrame(KeyFrame &amp;kCurrent)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l00706">MapMaker.cpp:706</a></div></div>
<div class="ttc" id="a00420_html_a4c1c9f0ac3a7147a15924f73340f9f67a13c4ee06a0ff51b4afdd22c386024577"><div class="ttname"><a href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a13c4ee06a0ff51b4afdd22c386024577">Tracker::TRAIL_TRACKING_NOT_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00080">Tracker.h:80</a></div></div>
<div class="ttc" id="a00420_html_af5e6aa40e2ad54898e7c101c13024a15"><div class="ttname"><a href="../../db/d4f/a00420.html#af5e6aa40e2ad54898e7c101c13024a15">Tracker::mnLostFrames</a></div><div class="ttdeci">int mnLostFrames</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00118">Tracker.h:118</a></div></div>
<div class="ttc" id="a00252_html_ac24001169d1b9a76bb38a04fdc445801"><div class="ttname"><a href="../../dc/ded/a00252.html#ac24001169d1b9a76bb38a04fdc445801">MiniPatch::FindPatch</a></div><div class="ttdeci">bool FindPatch(CVD::ImageRef &amp;irPos, CVD::BasicImage&lt; CVD::byte &gt; &amp;im, int nRange, std::vector&lt; CVD::ImageRef &gt; &amp;vCorners, std::vector&lt; int &gt; *pvRowLUT=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de6/a00548_source.html#l00034">MiniPatch.cpp:34</a></div></div>
<div class="ttc" id="a00358_html_ad3b5bb26f63db1896fd8976fe356856b"><div class="ttname"><a href="../../df/d73/a00358.html#ad3b5bb26f63db1896fd8976fe356856b">TooN::SE3::inverse</a></div><div class="ttdeci">SE3 inverse() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00086">se3.h:86</a></div></div>
<div class="ttc" id="a00420_html_a87afe757cc28a0058b3fab724830eabc"><div class="ttname"><a href="../../db/d4f/a00420.html#a87afe757cc28a0058b3fab724830eabc">Tracker::getVCorners</a></div><div class="ttdeci">std::string getVCorners()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l01043">Tracker.cpp:1043</a></div></div>
<div class="ttc" id="a00618_html"><div class="ttname"><a href="../../de/d85/a00618.html">CVD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d34/a00476_source.html#l00024">abs.h:24</a></div></div>
<div class="ttc" id="a00420_html_ad63c43f9be757654a817444b2cf62311"><div class="ttname"><a href="../../db/d4f/a00420.html#ad63c43f9be757654a817444b2cf62311">Tracker::mbDidCoarse</a></div><div class="ttdeci">bool mbDidCoarse</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00105">Tracker.h:105</a></div></div>
<div class="ttc" id="a00420_html_a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb"><div class="ttname"><a href="../../db/d4f/a00420.html#a944de6e8e520ad5aca4ec51867608629af4c235b9b68dd024ddf2b0d050c26fdb">Tracker::GOOD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00117">Tracker.h:117</a></div></div>
<div class="ttc" id="a00238_html_aa7d96efe0b86dcc43c64bce43d94d0fb"><div class="ttname"><a href="../../da/d2e/a00238.html#aa7d96efe0b86dcc43c64bce43d94d0fb">MapMaker::AddKeyFrame</a></div><div class="ttdeci">void AddKeyFrame(KeyFrame &amp;k)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l00453">MapMaker.cpp:453</a></div></div>
<div class="ttc" id="a00445_html_ad8539d6abe665a29a818b6161059cba4"><div class="ttname"><a href="../../dd/d47/a00445.html#ad8539d6abe665a29a818b6161059cba4">Tukey::Weight</a></div><div class="ttdeci">static double Weight(double dErrorSquared, double dSigmaSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00052">MEstimator.h:52</a></div></div>
<div class="ttc" id="a00420_html_adfbbd9b705f13deafc64fc0495b8b2f4"><div class="ttname"><a href="../../db/d4f/a00420.html#adfbbd9b705f13deafc64fc0495b8b2f4">Tracker::mirSize</a></div><div class="ttdeci">CVD::ImageRef mirSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00073">Tracker.h:73</a></div></div>
<div class="ttc" id="a00241_html"><div class="ttname"><a href="../../d6/db6/a00241.html">TooN::Matrix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/deb/a00545_source.html#l00110">matrix.hh:110</a></div></div>
<div class="ttc" id="a00252_html_a8028087be984fdecbbc9900f56b20c6d"><div class="ttname"><a href="../../dc/ded/a00252.html#a8028087be984fdecbbc9900f56b20c6d">MiniPatch::mnMaxSSD</a></div><div class="ttdeci">static int mnMaxSSD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d21/a00549_source.html#l00034">MiniPatch.h:34</a></div></div>
<div class="ttc" id="a00420_html_a0e8b040d9087445d8da41affbaa8e4bc"><div class="ttname"><a href="../../db/d4f/a00420.html#a0e8b040d9087445d8da41affbaa8e4bc">Tracker::AttemptRecovery</a></div><div class="ttdeci">bool AttemptRecovery()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00279">Tracker.cpp:279</a></div></div>
<div class="ttc" id="a00312_html_a151b80cb6e09bd8f91171f717379e85a"><div class="ttname"><a href="../../d7/df2/a00312.html#a151b80cb6e09bd8f91171f717379e85a">PatchFinder::GetSubPixPos</a></div><div class="ttdeci">Vector&lt; 2 &gt; GetSubPixPos()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00095">PatchFinder.h:95</a></div></div>
<div class="ttc" id="a00420_html_a4a2bc67bb156bf730a8bf5c060787edd"><div class="ttname"><a href="../../db/d4f/a00420.html#a4a2bc67bb156bf730a8bf5c060787edd">Tracker::mdMSDScaledVelocityMagnitude</a></div><div class="ttdeci">double mdMSDScaledVelocityMagnitude</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00104">Tracker.h:104</a></div></div>
<div class="ttc" id="a00237_html_a7a2a1024fff77881aaac79ec166f824c"><div class="ttname"><a href="../../d4/d08/a00237.html#a7a2a1024fff77881aaac79ec166f824c">Map::vpPoints</a></div><div class="ttdeci">std::vector&lt; MapPoint * &gt; vpPoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/a00540_source.html#l00033">Map.h:33</a></div></div>
<div class="ttc" id="a00312_html_a408d56e1452dedb8ea6e422524efc860"><div class="ttname"><a href="../../d7/df2/a00312.html#a408d56e1452dedb8ea6e422524efc860">PatchFinder::GetCoarsePosAsVector</a></div><div class="ttdeci">Vector&lt; 2 &gt; GetCoarsePosAsVector()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00087">PatchFinder.h:87</a></div></div>
<div class="ttc" id="a00587_html"><div class="ttname"><a href="../../de/dde/a00587.html">SmallMatrixOpts.h</a></div></div>
<div class="ttc" id="a00420_html_a498ff5cf515f8a39e715518704a940c1"><div class="ttname"><a href="../../db/d4f/a00420.html#a498ff5cf515f8a39e715518704a940c1">Tracker::mnInitialStage</a></div><div class="ttdeci">enum Tracker::@13 mnInitialStage</div></div>
<div class="ttc" id="a00420_html_ad6c77bd6b694f4fe2f69eb4de7d14a41"><div class="ttname"><a href="../../db/d4f/a00420.html#ad6c77bd6b694f4fe2f69eb4de7d14a41">Tracker::AssessTrackingQuality</a></div><div class="ttdeci">void AssessTrackingQuality()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00975">Tracker.cpp:975</a></div></div>
<div class="ttc" id="a00420_html_aefdb4685736ca3ce1c594f99e53940d7"><div class="ttname"><a href="../../db/d4f/a00420.html#aefdb4685736ca3ce1c594f99e53940d7">Tracker::SetSendMessageToUnity</a></div><div class="ttdeci">void SetSendMessageToUnity(SendMessage sm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00060">Tracker.cpp:60</a></div></div>
<div class="ttc" id="a00471_html_a4d34baf6de02ddc5f9c460a6c8b4c404"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">TooN::WLS::get_mu</a></div><div class="ttdeci">Vector&lt; Size, Precision &gt; &amp; get_mu()</div><div class="ttdoc">Returns the update. With no prior, this is the result of . </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00202">wls.h:202</a></div></div>
<div class="ttc" id="a00420_html_a36f7ff6e7372cf49f4ab5dbc3afab7e3"><div class="ttname"><a href="../../db/d4f/a00420.html#a36f7ff6e7372cf49f4ab5dbc3afab7e3">Tracker::sendToUnity</a></div><div class="ttdeci">SendMessage sendToUnity</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00141">Tracker.h:141</a></div></div>
<div class="ttc" id="a00361_html_ad0b992043522ba6263cfb86c2f47707f"><div class="ttname"><a href="../../d7/ddb/a00361.html#ad0b992043522ba6263cfb86c2f47707f">SendMessage::SendLogToUnity</a></div><div class="ttdeci">void SendLogToUnity(const char *st)</div><div class="ttdoc">Send string to Unity3D </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbe/a00574_source.html#l00034">SendMessage.cpp:34</a></div></div>
<div class="ttc" id="a00519_html_abaf66dc896ddcd855c1813866955a7f9"><div class="ttname"><a href="../../dd/d4d/a00519.html#abaf66dc896ddcd855c1813866955a7f9">TrackerUseRotationEstimator</a></div><div class="ttdeci">const int TrackerUseRotationEstimator</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00030">globals.h:30</a></div></div>
<div class="ttc" id="a00312_html_a8d19042d223df949d37476be75c5c47d"><div class="ttname"><a href="../../d7/df2/a00312.html#a8d19042d223df949d37476be75c5c47d">PatchFinder::IterateSubPixToConvergence</a></div><div class="ttdeci">bool IterateSubPixToConvergence(KeyFrame &amp;kf, int nMaxIts)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d75/a00555_source.html#l00286">PatchFinder.cpp:286</a></div></div>
<div class="ttc" id="a00420_html_a4c1c9f0ac3a7147a15924f73340f9f67ae500e9a56b6cd9824906d0bcb2d907c6"><div class="ttname"><a href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67ae500e9a56b6cd9824906d0bcb2d907c6">Tracker::TRAIL_TRACKING_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00082">Tracker.h:82</a></div></div>
<div class="ttc" id="a00238_html"><div class="ttname"><a href="../../da/d2e/a00238.html">MapMaker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/ddb/a00542_source.html#l00039">MapMaker.h:39</a></div></div>
<div class="ttc" id="a00312_html_a0eec8894904ce79ec503d556ca853106"><div class="ttname"><a href="../../d7/df2/a00312.html#a0eec8894904ce79ec503d556ca853106">PatchFinder::TemplateBad</a></div><div class="ttdeci">bool TemplateBad()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00076">PatchFinder.h:76</a></div></div>
<div class="ttc" id="a00420_html_a559d6bc30cc6240539b67c6b24180722"><div class="ttname"><a href="../../db/d4f/a00420.html#a559d6bc30cc6240539b67c6b24180722">Tracker::GetMessageForUser</a></div><div class="ttdeci">std::string GetMessageForUser()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l01027">Tracker.cpp:1027</a></div></div>
<div class="ttc" id="a00190_html"><div class="ttname"><a href="../../d7/d6e/a00190.html">CVD::Image</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00617">image.h:617</a></div></div>
<div class="ttc" id="a00361_html"><div class="ttname"><a href="../../d7/ddb/a00361.html">SendMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d42/a00575_source.html#l00011">SendMessage.h:11</a></div></div>
<div class="ttc" id="a00226_html_a4962879f78735ad057b1e943a36ae9f6"><div class="ttname"><a href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">KeyFrame::aLevels</a></div><div class="ttdeci">Level aLevels[LEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00084">KeyFrame.h:84</a></div></div>
<div class="ttc" id="a00226_html_a6fcc56f00575edb572beb77eb85a7d36"><div class="ttname"><a href="../../dc/d55/a00226.html#a6fcc56f00575edb572beb77eb85a7d36">KeyFrame::MakeKeyFrame_Lite</a></div><div class="ttdeci">int MakeKeyFrame_Lite(CVD::BasicImage&lt; CVD::byte &gt; &amp;im, int threshold)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2a/a00531_source.html#l00012">KeyFrame.cpp:12</a></div></div>
<div class="ttc" id="a00519_html_a7c9fa7dca8ad1c19a7861c570e45e1c7"><div class="ttname"><a href="../../dd/d4d/a00519.html#a7c9fa7dca8ad1c19a7861c570e45e1c7">TrackerDisableCoarse</a></div><div class="ttdeci">const int TrackerDisableCoarse</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00037">globals.h:37</a></div></div>
<div class="ttc" id="a00422_html_a965551e22a7a844247a428afcd9d89a2"><div class="ttname"><a href="../../db/d43/a00422.html#a965551e22a7a844247a428afcd9d89a2">Trail::irInitialPos</a></div><div class="ttdeci">CVD::ImageRef irInitialPos</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00043">Tracker.h:43</a></div></div>
<div class="ttc" id="a00232_html_a6a78a28fc72de71b2640f6aef2161b07"><div class="ttname"><a href="../../d0/d53/a00232.html#a6a78a28fc72de71b2640f6aef2161b07">Level::vCorners</a></div><div class="ttdeci">std::vector&lt; CVD::ImageRef &gt; vCorners</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00062">KeyFrame.h:62</a></div></div>
<div class="ttc" id="a00421_html_a10a6acf3f065773eb89e3068b481fe08"><div class="ttname"><a href="../../d2/de1/a00421.html#a10a6acf3f065773eb89e3068b481fe08">TrackerData::bInImage</a></div><div class="ttdeci">bool bInImage</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00031">TrackerData.h:31</a></div></div>
<div class="ttc" id="a00312_html"><div class="ttname"><a href="../../d7/df2/a00312.html">PatchFinder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00049">PatchFinder.h:49</a></div></div>
<div class="ttc" id="a00519_html_adec0370f2381b38ea59fbb64ff11b794"><div class="ttname"><a href="../../dd/d4d/a00519.html#adec0370f2381b38ea59fbb64ff11b794">DesiredNumberOfCorners</a></div><div class="ttdeci">const int DesiredNumberOfCorners</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00050">globals.h:50</a></div></div>
<div class="ttc" id="a00420_html_aaac664e77886fd25b7b13adf9663d3e7"><div class="ttname"><a href="../../db/d4f/a00420.html#aaac664e77886fd25b7b13adf9663d3e7">Tracker::GUICommandHandler</a></div><div class="ttdeci">void GUICommandHandler(std::string sCommand, std::string sParams)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00304">Tracker.cpp:304</a></div></div>
<div class="ttc" id="a00512_html"><div class="ttname"><a href="../../d4/dfb/a00512.html">fast_corner.h</a></div></div>
<div class="ttc" id="a00421_html_a177c6a63938a71fd86a776a0b2ebbfd9"><div class="ttname"><a href="../../d2/de1/a00421.html#a177c6a63938a71fd86a776a0b2ebbfd9">TrackerData::Point</a></div><div class="ttdeci">MapPoint &amp; Point</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00021">TrackerData.h:21</a></div></div>
<div class="ttc" id="a00519_html_adea5c9cfe402bb104f588fbaebae1c25"><div class="ttname"><a href="../../dd/d4d/a00519.html#adea5c9cfe402bb104f588fbaebae1c25">SendArrayOfPointsForCornersTex</a></div><div class="ttdeci">const bool SendArrayOfPointsForCornersTex</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00055">globals.h:55</a></div></div>
<div class="ttc" id="a00058_html"><div class="ttname"><a href="../../d7/df7/a00058.html">Tracker::Command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00138">Tracker.h:138</a></div></div>
<div class="ttc" id="a00420_html_a717a023969a00f43e132c19fa0ce6c5d"><div class="ttname"><a href="../../db/d4f/a00420.html#a717a023969a00f43e132c19fa0ce6c5d">Tracker::currentState</a></div><div class="ttdeci">DetectionState currentState</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00144">Tracker.h:144</a></div></div>
<div class="ttc" id="a00358_html"><div class="ttname"><a href="../../df/d73/a00358.html">TooN::SE3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00050">se3.h:50</a></div></div>
<div class="ttc" id="a00238_html_a132fc4c7223676386cb8da420b151796"><div class="ttname"><a href="../../da/d2e/a00238.html#a132fc4c7223676386cb8da420b151796">MapMaker::RequestReset</a></div><div class="ttdeci">void RequestReset()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l00120">MapMaker.cpp:120</a></div></div>
<div class="ttc" id="a00226_html_af87142bc44ffa9ed3d9aa11f7f34ae59"><div class="ttname"><a href="../../dc/d55/a00226.html#af87142bc44ffa9ed3d9aa11f7f34ae59">KeyFrame::MakeKeyFrame_Rest</a></div><div class="ttdeci">void MakeKeyFrame_Rest()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2a/a00531_source.html#l00069">KeyFrame.cpp:69</a></div></div>
<div class="ttc" id="a00237_html_a54fcd84b47c4ddfe95dfb100279d3b50"><div class="ttname"><a href="../../d4/d08/a00237.html#a54fcd84b47c4ddfe95dfb100279d3b50">Map::vpKeyFrames</a></div><div class="ttdeci">std::vector&lt; KeyFrame * &gt; vpKeyFrames</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/a00540_source.html#l00035">Map.h:35</a></div></div>
<div class="ttc" id="a00420_html_a5925b55dceed6321725d630a390ea6bd"><div class="ttname"><a href="../../db/d4f/a00420.html#a5925b55dceed6321725d630a390ea6bd">Tracker::mCamera</a></div><div class="ttdeci">ATANCamera mCamera</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00070">Tracker.h:70</a></div></div>
<div class="ttc" id="a00420_html_af374ed398bbc33a77be9156bf6a1634f"><div class="ttname"><a href="../../db/d4f/a00420.html#af374ed398bbc33a77be9156bf6a1634f">Tracker::mpSBIThisFrame</a></div><div class="ttdeci">SmallBlurryImage * mpSBIThisFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00126">Tracker.h:126</a></div></div>
<div class="ttc" id="a00238_html_ad7c06731385e36073b32dba5d8eadb98"><div class="ttname"><a href="../../da/d2e/a00238.html#ad7c06731385e36073b32dba5d8eadb98">MapMaker::InitFromStereo</a></div><div class="ttdeci">bool InitFromStereo(KeyFrame &amp;kFirst, KeyFrame &amp;kSecond, std::vector&lt; std::pair&lt; CVD::ImageRef, CVD::ImageRef &gt; &gt; &amp;vMatches, SE3&lt;&gt; &amp;se3CameraPos)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d72/a00541_source.html#l00196">MapMaker.cpp:196</a></div></div>
<div class="ttc" id="a00420_html_ad3bb52cd277a54734bcecb8a758a0992"><div class="ttname"><a href="../../db/d4f/a00420.html#ad3bb52cd277a54734bcecb8a758a0992">Tracker::mRelocaliser</a></div><div class="ttdeci">Relocaliser mRelocaliser</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00071">Tracker.h:71</a></div></div>
<div class="ttc" id="a00420_html_a6dc43439a13840577171ab415ee09855"><div class="ttname"><a href="../../db/d4f/a00420.html#a6dc43439a13840577171ab415ee09855">Tracker::CalcSBIRotation</a></div><div class="ttdeci">void CalcSBIRotation()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l01032">Tracker.cpp:1032</a></div></div>
<div class="ttc" id="a00226_html_a11ad67f26985d5400a466e2baa8fafa9"><div class="ttname"><a href="../../dc/d55/a00226.html#a11ad67f26985d5400a466e2baa8fafa9">KeyFrame::se3CfromW</a></div><div class="ttdeci">SE3 se3CfromW</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00082">KeyFrame.h:82</a></div></div>
<div class="ttc" id="a00519_html_a1f3bff50522c88f197e2c7b5cde04606"><div class="ttname"><a href="../../dd/d4d/a00519.html#a1f3bff50522c88f197e2c7b5cde04606">TrackerRotationEstimatorBlur</a></div><div class="ttdeci">const double TrackerRotationEstimatorBlur</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00029">globals.h:29</a></div></div>
<div class="ttc" id="a00519_html_a5c1f648910e022753bf99e7179c6cd61"><div class="ttname"><a href="../../dd/d4d/a00519.html#a5c1f648910e022753bf99e7179c6cd61">UseNumberOfCornersAdjustment</a></div><div class="ttdeci">const bool UseNumberOfCornersAdjustment</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00052">globals.h:52</a></div></div>
<div class="ttc" id="a00523_html_a031ca1778b1ff08a51f74daa820bb5d7"><div class="ttname"><a href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">TooN::exp</a></div><div class="ttdeci">Matrix&lt; R, C, P &gt; exp(const Matrix&lt; R, C, P, B &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00284">helpers.h:284</a></div></div>
<div class="ttc" id="a00420_html_ad00b8e0e584388957899081cdb58df55"><div class="ttname"><a href="../../db/d4f/a00420.html#ad00b8e0e584388957899081cdb58df55">Tracker::mMessageForUser</a></div><div class="ttdeci">std::ostringstream mMessageForUser</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00133">Tracker.h:133</a></div></div>
<div class="ttc" id="a00420_html_a7cc6e4ebaad3cb97420ce3715b0c514c"><div class="ttname"><a href="../../db/d4f/a00420.html#a7cc6e4ebaad3cb97420ce3715b0c514c">Tracker::TrailTracking_Advance</a></div><div class="ttdeci">int TrailTracking_Advance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00442">Tracker.cpp:442</a></div></div>
<div class="ttc" id="a00232_html"><div class="ttname"><a href="../../d0/d53/a00232.html">Level</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00054">KeyFrame.h:54</a></div></div>
<div class="ttc" id="a00237_html_a81c598897a9b30ece4f2a9acffaa6572"><div class="ttname"><a href="../../d4/d08/a00237.html#a81c598897a9b30ece4f2a9acffaa6572">Map::IsGood</a></div><div class="ttdeci">bool IsGood()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/a00540_source.html#l00027">Map.h:27</a></div></div>
<div class="ttc" id="a00632_html"><div class="ttname"><a href="../../d4/d2a/a00632.html">std</a></div></div>
<div class="ttc" id="a00421_html_afbfe08d6630d0198d0da5b2f805cde8f"><div class="ttname"><a href="../../d2/de1/a00421.html#afbfe08d6630d0198d0da5b2f805cde8f">TrackerData::Finder</a></div><div class="ttdeci">PatchFinder Finder</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00024">TrackerData.h:24</a></div></div>
<div class="ttc" id="a00421_html_a7b0b1e73dead9f3d7abb29cf2a61bb62"><div class="ttname"><a href="../../d2/de1/a00421.html#a7b0b1e73dead9f3d7abb29cf2a61bb62">TrackerData::Project</a></div><div class="ttdeci">void Project(const SE3&lt;&gt; &amp;se3CFromW, ATANCamera &amp;Cam)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00049">TrackerData.h:49</a></div></div>
<div class="ttc" id="a00420_html"><div class="ttname"><a href="../../db/d4f/a00420.html">Tracker</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00046">Tracker.h:46</a></div></div>
<div class="ttc" id="a00420_html_a4f84991fb48cda8545c8b1e833c04513"><div class="ttname"><a href="../../db/d4f/a00420.html#a4f84991fb48cda8545c8b1e833c04513">Tracker::mbUserPressedSpacebar</a></div><div class="ttdeci">bool mbUserPressedSpacebar</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00132">Tracker.h:132</a></div></div>
<div class="ttc" id="a00519_html_a5907a7cf8a8a9fb0ddc3aa80f6a2b759"><div class="ttname"><a href="../../dd/d4d/a00519.html#a5907a7cf8a8a9fb0ddc3aa80f6a2b759">TrackerCoarseSubPixIts</a></div><div class="ttdeci">const int TrackerCoarseSubPixIts</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00035">globals.h:35</a></div></div>
<div class="ttc" id="a00420_html_ab9b0b18e15987c60173971c470e98a9e"><div class="ttname"><a href="../../db/d4f/a00420.html#ab9b0b18e15987c60173971c470e98a9e">Tracker::UpdateMotionModel</a></div><div class="ttdeci">void UpdateMotionModel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00948">Tracker.cpp:948</a></div></div>
<div class="ttc" id="a00407_html_a0373930f0671990ed3a8dfef265cc2f5"><div class="ttname"><a href="../../d1/d98/a00407.html#a0373930f0671990ed3a8dfef265cc2f5">CVD::SubImage::in_image_with_border</a></div><div class="ttdeci">bool in_image_with_border(const ImageRef &amp;ir, int border) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00271">image.h:271</a></div></div>
<div class="ttc" id="a00420_html_a17e5929ebbfd063d46bc47c2e84beaaa"><div class="ttname"><a href="../../db/d4f/a00420.html#a17e5929ebbfd063d46bc47c2e84beaaa">Tracker::StartTracking</a></div><div class="ttdeci">void StartTracking()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00049">Tracker.cpp:49</a></div></div>
<div class="ttc" id="a00420_html_a729dc9cf0ed10d423d4339a1651f81b5"><div class="ttname"><a href="../../db/d4f/a00420.html#a729dc9cf0ed10d423d4339a1651f81b5">Tracker::mPreviousFrameKF</a></div><div class="ttdeci">KeyFrame mPreviousFrameKF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00087">Tracker.h:87</a></div></div>
<div class="ttc" id="a00421_html_a353cdbfd0e3b72d7e40cdeba900c07fc"><div class="ttname"><a href="../../d2/de1/a00421.html#a353cdbfd0e3b72d7e40cdeba900c07fc">TrackerData::v2Image</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2Image</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00029">TrackerData.h:29</a></div></div>
<div class="ttc" id="a00037_html"><div class="ttname"><a href="../../d1/dc6/a00037.html">Candidate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00036">KeyFrame.h:36</a></div></div>
<div class="ttc" id="a00251_html_a5f70cb9184ceda4c08eb7a87ec415017"><div class="ttname"><a href="../../d3/d1a/a00251.html#a5f70cb9184ceda4c08eb7a87ec415017">Measurement::v2RootPos</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2RootPos</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00048">KeyFrame.h:48</a></div></div>
<div class="ttc" id="a00519_html_aad9380f4e152b168206993aca03f0b2a"><div class="ttname"><a href="../../dd/d4d/a00519.html#aad9380f4e152b168206993aca03f0b2a">TrackerCoarseMin</a></div><div class="ttdeci">const int TrackerCoarseMin</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00032">globals.h:32</a></div></div>
<div class="ttc" id="a00237_html"><div class="ttname"><a href="../../d4/d08/a00237.html">Map</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d79/a00540_source.html#l00024">Map.h:24</a></div></div>
<div class="ttc" id="a00420_html_aba08d562bd100821c7469379f5cc0818"><div class="ttname"><a href="../../db/d4f/a00420.html#aba08d562bd100821c7469379f5cc0818">Tracker::mlTrails</a></div><div class="ttdeci">std::list&lt; Trail &gt; mlTrails</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00085">Tracker.h:85</a></div></div>
<div class="ttc" id="a00519_html_a004eaa32e2c80b0a08f55a178cc5cfc9"><div class="ttname"><a href="../../dd/d4d/a00519.html#a004eaa32e2c80b0a08f55a178cc5cfc9">DesiredNumberOfCornersOffset</a></div><div class="ttdeci">const int DesiredNumberOfCornersOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00051">globals.h:51</a></div></div>
<div class="ttc" id="a00420_html_af5c9207f950fde702e16a7ca77939342"><div class="ttname"><a href="../../db/d4f/a00420.html#af5c9207f950fde702e16a7ca77939342">Tracker::mTrackingQuality</a></div><div class="ttdeci">enum Tracker::@14 mTrackingQuality</div></div>
<div class="ttc" id="a00251_html_a66c7c032b20703d9e081527bb30f086b"><div class="ttname"><a href="../../d3/d1a/a00251.html#a66c7c032b20703d9e081527bb30f086b">Measurement::nLevel</a></div><div class="ttdeci">int nLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00046">KeyFrame.h:46</a></div></div>
<div class="ttc" id="a00618_html_ab323db82d94f28c3a207b04311136a51"><div class="ttname"><a href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">CVD::ir</a></div><div class="ttdeci">ImageRef ir(const TooN::Vector&lt; 2 &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6e/a00610_source.html#l00043">vector_image_ref.h:43</a></div></div>
<div class="ttc" id="a00420_html_a7cb56151ec12ac53c52d741748421d72"><div class="ttname"><a href="../../db/d4f/a00420.html#a7cb56151ec12ac53c52d741748421d72">Tracker::mv6SBIRot</a></div><div class="ttdeci">Vector&lt; 6 &gt; mv6SBIRot</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00128">Tracker.h:128</a></div></div>
<div class="ttc" id="a00240_html_af3b32587aca37b06999a3a896e898dff"><div class="ttname"><a href="../../d9/d21/a00240.html#af3b32587aca37b06999a3a896e898dff">MapPoint::nMEstimatorInlierCount</a></div><div class="ttdeci">int nMEstimatorInlierCount</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddf/a00544_source.html#l00071">MapPoint.h:71</a></div></div>
<div class="ttc" id="a00421_html_a253cbc7e93d53d76f29c6305169e88f0"><div class="ttname"><a href="../../d2/de1/a00421.html#a253cbc7e93d53d76f29c6305169e88f0">TrackerData::bSearched</a></div><div class="ttdeci">bool bSearched</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00035">TrackerData.h:35</a></div></div>
<div class="ttc" id="a00420_html_a9333d0a0755ed26a3734326089abe67f"><div class="ttname"><a href="../../db/d4f/a00420.html#a9333d0a0755ed26a3734326089abe67f">Tracker::mnFrame</a></div><div class="ttdeci">int mnFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00110">Tracker.h:110</a></div></div>
<div class="ttc" id="a00519_html_ab2ea2c2b414852ce200096022e292f96"><div class="ttname"><a href="../../dd/d4d/a00519.html#ab2ea2c2b414852ce200096022e292f96">MaxInitialTrails</a></div><div class="ttdeci">const int MaxInitialTrails</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00020">globals.h:20</a></div></div>
<div class="ttc" id="a00252_html"><div class="ttname"><a href="../../dc/ded/a00252.html">MiniPatch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d21/a00549_source.html#l00022">MiniPatch.h:22</a></div></div>
<div class="ttc" id="a00420_html_a8694e6f2988217135773cdc6f7fa9d8e"><div class="ttname"><a href="../../db/d4f/a00420.html#a8694e6f2988217135773cdc6f7fa9d8e">Tracker::mbDraw</a></div><div class="ttdeci">bool mbDraw</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00107">Tracker.h:107</a></div></div>
<div class="ttc" id="a00420_html_a66c4bc51f37a922b6b2ccac164cf6e02"><div class="ttname"><a href="../../db/d4f/a00420.html#a66c4bc51f37a922b6b2ccac164cf6e02">Tracker::TrackForInitialMap</a></div><div class="ttdeci">void TrackForInitialMap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00345">Tracker.cpp:345</a></div></div>
<div class="ttc" id="a00613_html"><div class="ttname"><a href="../../d1/d6e/a00613.html">wls.h</a></div></div>
<div class="ttc" id="a00358_html_a0284c7cd9479da896ab29d6c62c41844"><div class="ttname"><a href="../../df/d73/a00358.html#a0284c7cd9479da896ab29d6c62c41844">TooN::SE3::get_translation</a></div><div class="ttdeci">Vector&lt; 3, Precision &gt; &amp; get_translation()</div><div class="ttdoc">Returns the translation part of the transformation as a Vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00069">se3.h:69</a></div></div>
<div class="ttc" id="a00421_html_ad3b449e3483e814bd02cc5d90674f5c4"><div class="ttname"><a href="../../d2/de1/a00421.html#ad3b449e3483e814bd02cc5d90674f5c4">TrackerData::v2Error_CovScaled</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2Error_CovScaled</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00043">TrackerData.h:43</a></div></div>
<div class="ttc" id="a00240_html"><div class="ttname"><a href="../../d9/d21/a00240.html">MapPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddf/a00544_source.html#l00027">MapPoint.h:27</a></div></div>
<div class="ttc" id="a00420_html_aee51d29482d9cb123551147064f6131e"><div class="ttname"><a href="../../db/d4f/a00420.html#aee51d29482d9cb123551147064f6131e">Tracker::mse3CamFromWorld</a></div><div class="ttdeci">SE3 mse3CamFromWorld</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00100">Tracker.h:100</a></div></div>
<div class="ttc" id="a00226_html_a10f009ec03cf0da1e9d2d22445f492b6"><div class="ttname"><a href="../../dc/d55/a00226.html#a10f009ec03cf0da1e9d2d22445f492b6">KeyFrame::mMeasurements</a></div><div class="ttdeci">std::map&lt; MapPoint *, Measurement &gt; mMeasurements</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00085">KeyFrame.h:85</a></div></div>
<div class="ttc" id="a00058_html_a63ca3025eb98136d2b84043dcf3feee6"><div class="ttname"><a href="../../d7/df7/a00058.html#a63ca3025eb98136d2b84043dcf3feee6">Tracker::Command::sCommand</a></div><div class="ttdeci">std::string sCommand</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00138">Tracker.h:138</a></div></div>
<div class="ttc" id="a00420_html_ae369e0d888daa6e3a459228ed1da1a52"><div class="ttname"><a href="../../db/d4f/a00420.html#ae369e0d888daa6e3a459228ed1da1a52">Tracker::TrackFrame</a></div><div class="ttdeci">void TrackFrame(CVD::Image&lt; CVD::byte &gt; &amp;imFrame, uint hnd, bool bDraw)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00110">Tracker.cpp:110</a></div></div>
<div class="ttc" id="a00420_html_a137f242ae0bc8e43325088b97a9cba10"><div class="ttname"><a href="../../db/d4f/a00420.html#a137f242ae0bc8e43325088b97a9cba10">Tracker::manMeasAttempted</a></div><div class="ttdeci">int manMeasAttempted[LEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00115">Tracker.h:115</a></div></div>
<div class="ttc" id="a00523_html_a0bbd0ef9cb4419e4037c4c6e7e2835e3"><div class="ttname"><a href="../../d0/de7/a00523.html#a0bbd0ef9cb4419e4037c4c6e7e2835e3">TooN::makeVector</a></div><div class="ttdeci">Vector&lt; 1 &gt; makeVector(double x1)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5a/a00538_source.html#l00004">make_vector.hh:4</a></div></div>
<div class="ttc" id="a00600_html_a93df586419976747bcc19216ddcf69b8"><div class="ttname"><a href="../../d1/d8c/a00600.html#a93df586419976747bcc19216ddcf69b8">tostr</a></div><div class="ttdeci">string tostr(string w, const T &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00044">Tracker.cpp:44</a></div></div>
<div class="ttc" id="a00611_html"><div class="ttname"><a href="../../dd/dc0/a00611.html">vision.h</a></div></div>
<div class="ttc" id="a00321_html_ac663c7c22b41f2fd7b21c1734575afd8"><div class="ttname"><a href="../../db/d53/a00321.html#ac663c7c22b41f2fd7b21c1734575afd8">Relocaliser::AttemptRecovery</a></div><div class="ttdeci">bool AttemptRecovery(KeyFrame &amp;k)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc2/a00564_source.html#l00020">Relocaliser.cpp:20</a></div></div>
<div class="ttc" id="a00198_html"><div class="ttname"><a href="../../d7/da0/a00198.html">CVD::ImageRef</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00047">image_ref.h:47</a></div></div>
<div class="ttc" id="a00420_html_a096b92ff1d7ca7547032e890f90d6bcd"><div class="ttname"><a href="../../db/d4f/a00420.html#a096b92ff1d7ca7547032e890f90d6bcd">Tracker::mbUseSBIInit</a></div><div class="ttdeci">bool mbUseSBIInit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00129">Tracker.h:129</a></div></div>
<div class="ttc" id="a00581_html_a025791393b56feb9a61c13b1d7eeafd5a5ddff473d1ee827cd541212a489edbe3"><div class="ttname"><a href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5a5ddff473d1ee827cd541212a489edbe3">InProgres</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc8/a00581_source.html#l00014">SLAMflex.h:14</a></div></div>
<div class="ttc" id="a00027_html_a700b037d4c41f7aa2ab1b42ed57759b8"><div class="ttname"><a href="../../d0/d33/a00027.html#a700b037d4c41f7aa2ab1b42ed57759b8">ATANCamera::SetImageSize</a></div><div class="ttdeci">void SetImageSize(Vector&lt; 2 &gt; v2ImageSize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/a00479_source.html#l00021">ATANCamera.cpp:21</a></div></div>
<div class="ttc" id="a00471_html_aa010c5918f0045b229fd3fd9c073a8d7"><div class="ttname"><a href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">TooN::WLS::compute</a></div><div class="ttdeci">void compute()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00180">wls.h:180</a></div></div>
<div class="ttc" id="a00519_html_a6d552b57098f3f9be9c5526e3e810bec"><div class="ttname"><a href="../../dd/d4d/a00519.html#a6d552b57098f3f9be9c5526e3e810bec">TrackerMaxPatchesPerFrame</a></div><div class="ttdeci">const int TrackerMaxPatchesPerFrame</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00039">globals.h:39</a></div></div>
<div class="ttc" id="a00581_html_a025791393b56feb9a61c13b1d7eeafd5ac37ab8a82be99e808fa5ecf053075b08"><div class="ttname"><a href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5ac37ab8a82be99e808fa5ecf053075b08">Started</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc8/a00581_source.html#l00013">SLAMflex.h:13</a></div></div>
<div class="ttc" id="a00420_html_a4c1c9f0ac3a7147a15924f73340f9f67a3dfd067b352842d1bce15eaf1cb68411"><div class="ttname"><a href="../../db/d4f/a00420.html#a4c1c9f0ac3a7147a15924f73340f9f67a3dfd067b352842d1bce15eaf1cb68411">Tracker::TRAIL_TRACKING_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00081">Tracker.h:81</a></div></div>
<div class="ttc" id="a00420_html_a211af2d79bae2e17c9c06a587b7b477b"><div class="ttname"><a href="../../db/d4f/a00420.html#a211af2d79bae2e17c9c06a587b7b477b">Tracker::mbJustRecoveredSoUseCoarse</a></div><div class="ttdeci">bool mbJustRecoveredSoUseCoarse</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00122">Tracker.h:122</a></div></div>
<div class="ttc" id="a00226_html_a994d0023adb8348cfa6ecd4f61db0b8b"><div class="ttname"><a href="../../dc/d55/a00226.html#a994d0023adb8348cfa6ecd4f61db0b8b">KeyFrame::dSceneDepthMean</a></div><div class="ttdeci">double dSceneDepthMean</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00091">KeyFrame.h:91</a></div></div>
<div class="ttc" id="a00421_html_afd41f4f9de63b1ab2bac03fe6cf587a3"><div class="ttname"><a href="../../d2/de1/a00421.html#afd41f4f9de63b1ab2bac03fe6cf587a3">TrackerData::dSqrtInvNoise</a></div><div class="ttdeci">double dSqrtInvNoise</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00039">TrackerData.h:39</a></div></div>
<div class="ttc" id="a00420_html_a9dd35be65a336856b6fb1839b96d1390"><div class="ttname"><a href="../../db/d4f/a00420.html#a9dd35be65a336856b6fb1839b96d1390">Tracker::mCurrentKF</a></div><div class="ttdeci">KeyFrame mCurrentKF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00065">Tracker.h:65</a></div></div>
<div class="ttc" id="a00252_html_a15c1135b2c3e5650230d14ad050cfc00"><div class="ttname"><a href="../../dc/ded/a00252.html#a15c1135b2c3e5650230d14ad050cfc00">MiniPatch::mnHalfPatchSize</a></div><div class="ttdeci">static int mnHalfPatchSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d21/a00549_source.html#l00032">MiniPatch.h:32</a></div></div>
<div class="ttc" id="a00421_html_adda55346841728473de106805a2d401f"><div class="ttname"><a href="../../d2/de1/a00421.html#adda55346841728473de106805a2d401f">TrackerData::m2CamDerivs</a></div><div class="ttdeci">Matrix&lt; 2 &gt; m2CamDerivs</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00030">TrackerData.h:30</a></div></div>
<div class="ttc" id="a00358_html_a12c0200f4807dedd578b3eee10842986"><div class="ttname"><a href="../../df/d73/a00358.html#a12c0200f4807dedd578b3eee10842986">TooN::SE3::ln</a></div><div class="ttdeci">static Vector&lt; 6, Precision &gt; ln(const SE3 &amp;se3)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00430">se3.h:430</a></div></div>
<div class="ttc" id="a00361_html_aac0c506e8bf945d15a39f63fc785ee9a"><div class="ttname"><a href="../../d7/ddb/a00361.html#aac0c506e8bf945d15a39f63fc785ee9a">SendMessage::SendArrayOfPoints</a></div><div class="ttdeci">void SendArrayOfPoints(int arrayOfPoint[], int size)</div><div class="ttdoc">Send array of points to Unity3D </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbe/a00574_source.html#l00075">SendMessage.cpp:75</a></div></div>
<div class="ttc" id="a00421_html_ab0d040785a2c2c7403b9d4435936d82c"><div class="ttname"><a href="../../d2/de1/a00421.html#ab0d040785a2c2c7403b9d4435936d82c">TrackerData::nSearchLevel</a></div><div class="ttdeci">int nSearchLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00034">TrackerData.h:34</a></div></div>
<div class="ttc" id="a00420_html_a395f0be90e6fe8592e1976a020677ecf"><div class="ttname"><a href="../../db/d4f/a00420.html#a395f0be90e6fe8592e1976a020677ecf">Tracker::mse3StartPos</a></div><div class="ttdeci">SE3 mse3StartPos</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00101">Tracker.h:101</a></div></div>
<div class="ttc" id="a00391_html_ab37342868b42c2cbb25ef28b8663861e"><div class="ttname"><a href="../../db/d95/a00391.html#ab37342868b42c2cbb25ef28b8663861e">SmallBlurryImage::MakeJacs</a></div><div class="ttdeci">void MakeJacs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00059">SmallBlurryImage.cpp:59</a></div></div>
<div class="ttc" id="a00312_html_a069473d96f65120cb3b0c084e7961df6"><div class="ttname"><a href="../../d7/df2/a00312.html#a069473d96f65120cb3b0c084e7961df6">PatchFinder::GetLevelScale</a></div><div class="ttdeci">int GetLevelScale()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d95/a00556_source.html#l00064">PatchFinder.h:64</a></div></div>
<div class="ttc" id="a00420_html_ab0a5723b82c7d64dc6e8eb5f59381234"><div class="ttname"><a href="../../db/d4f/a00420.html#ab0a5723b82c7d64dc6e8eb5f59381234">Tracker::mMap</a></div><div class="ttdeci">Map &amp; mMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00068">Tracker.h:68</a></div></div>
<div class="ttc" id="a00577_html"><div class="ttname"><a href="../../d8/d9b/a00577.html">ShiTomasi.h</a></div></div>
<div class="ttc" id="a00519_html_ac4682c5753218d2f91f1a6e91bc592a7"><div class="ttname"><a href="../../dd/d4d/a00519.html#ac4682c5753218d2f91f1a6e91bc592a7">EnableLogging</a></div><div class="ttdeci">const bool EnableLogging</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00054">globals.h:54</a></div></div>
<div class="ttc" id="a00451_html"><div class="ttname"><a href="../../d9/d69/a00451.html">TooN::Vector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8a/a00599_source.html#l00138">TooN.h:138</a></div></div>
<div class="ttc" id="a00471_html_ae559165e2cfb4a9968a1d6bc4aee8602"><div class="ttname"><a href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">TooN::WLS::add_prior</a></div><div class="ttdeci">void add_prior(Precision val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00070">wls.h:70</a></div></div>
<div class="ttc" id="a00420_html_a8773d0381bfa14a6a7f775f9844c5071"><div class="ttname"><a href="../../db/d4f/a00420.html#a8773d0381bfa14a6a7f775f9844c5071">Tracker::GetCurrentDetectionState</a></div><div class="ttdeci">DetectionState GetCurrentDetectionState()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00065">Tracker.cpp:65</a></div></div>
<div class="ttc" id="a00251_html"><div class="ttname"><a href="../../d3/d1a/a00251.html">Measurement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00044">KeyFrame.h:44</a></div></div>
<div class="ttc" id="a00240_html_a95bb7b2c70aaabd5435b8189f6b042be"><div class="ttname"><a href="../../d9/d21/a00240.html#a95bb7b2c70aaabd5435b8189f6b042be">MapPoint::pTData</a></div><div class="ttdeci">TrackerData * pTData</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddf/a00544_source.html#l00067">MapPoint.h:67</a></div></div>
<div class="ttc" id="a00420_html_a180b9032fc676cd575876a6ed33c0772"><div class="ttname"><a href="../../db/d4f/a00420.html#a180b9032fc676cd575876a6ed33c0772">Tracker::AddNewKeyFrame</a></div><div class="ttdeci">void AddNewKeyFrame()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/a00600_source.html#l00966">Tracker.cpp:966</a></div></div>
<div class="ttc" id="a00058_html_aae67cadf43ece5117abad14db33bac9e"><div class="ttname"><a href="../../d7/df7/a00058.html#aae67cadf43ece5117abad14db33bac9e">Tracker::Command::sParams</a></div><div class="ttdeci">std::string sParams</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00138">Tracker.h:138</a></div></div>
<div class="ttc" id="a00037_html_af34c2333962dfc180489358e0a93c93d"><div class="ttname"><a href="../../d1/dc6/a00037.html#af34c2333962dfc180489358e0a93c93d">Candidate::dSTScore</a></div><div class="ttdeci">double dSTScore</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00040">KeyFrame.h:40</a></div></div>
<div class="ttc" id="a00321_html_a533accc88500edadd36aec5f669906e6"><div class="ttname"><a href="../../db/d53/a00321.html#a533accc88500edadd36aec5f669906e6">Relocaliser::BestPose</a></div><div class="ttdeci">SE3 BestPose()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc2/a00564_source.html#l00015">Relocaliser.cpp:15</a></div></div>
<div class="ttc" id="a00581_html_a025791393b56feb9a61c13b1d7eeafd5"><div class="ttname"><a href="../../d8/dc8/a00581.html#a025791393b56feb9a61c13b1d7eeafd5">DetectionState</a></div><div class="ttdeci">DetectionState</div><div class="ttdoc">Enum for state of SLAM detection process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc8/a00581_source.html#l00011">SLAMflex.h:11</a></div></div>
<div class="ttc" id="a00312_html_a0741e237872edf9d64e47e46a9e24ce1"><div class="ttname"><a href="../../d7/df2/a00312.html#a0741e237872edf9d64e47e46a9e24ce1">PatchFinder::MakeTemplateCoarseCont</a></div><div class="ttdeci">void MakeTemplateCoarseCont(MapPoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d75/a00555_source.html#l00081">PatchFinder.cpp:81</a></div></div>
<div class="ttc" id="a00232_html_a36ae51f17356652e76d6ef3f9fb94a06"><div class="ttname"><a href="../../d0/d53/a00232.html#a36ae51f17356652e76d6ef3f9fb94a06">Level::vCandidates</a></div><div class="ttdeci">std::vector&lt; Candidate &gt; vCandidates</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00067">KeyFrame.h:67</a></div></div>
<div class="ttc" id="a00187_html_a08bf55c900bb45559c0e34e301098661"><div class="ttname"><a href="../../d6/daa/a00187.html#a08bf55c900bb45559c0e34e301098661">Huber::FindSigmaSquared</a></div><div class="ttdeci">static double FindSigmaSquared(std::vector&lt; double &gt; &amp;vdErrorSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00155">MEstimator.h:155</a></div></div>
<div class="ttc" id="a00421_html_a7116c10110989f60fe514a3a381732b6"><div class="ttname"><a href="../../d2/de1/a00421.html#a7116c10110989f60fe514a3a381732b6">TrackerData::bFound</a></div><div class="ttdeci">bool bFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00036">TrackerData.h:36</a></div></div>
<div class="ttc" id="a00604_html"><div class="ttname"><a href="../../d6/d75/a00604.html">utility.h</a></div></div>
<div class="ttc" id="a00420_html_a92cfbc71e7c869bddca8833adfd0ca0f"><div class="ttname"><a href="../../db/d4f/a00420.html#a92cfbc71e7c869bddca8833adfd0ca0f">Tracker::mFirstKF</a></div><div class="ttdeci">KeyFrame mFirstKF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00086">Tracker.h:86</a></div></div>
<div class="ttc" id="a00420_html_aecbcf286d0acc18dcf4d1a4e2f29951f"><div class="ttname"><a href="../../db/d4f/a00420.html#aecbcf286d0acc18dcf4d1a4e2f29951f">Tracker::mnLastKeyFrameDropped</a></div><div class="ttdeci">int mnLastKeyFrameDropped</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00111">Tracker.h:111</a></div></div>
<div class="ttc" id="a00602_html"><div class="ttname"><a href="../../d5/d0a/a00602.html">TrackerData.h</a></div></div>
<div class="ttc" id="a00523_html_ae9b2cb48b0a8e681b3dd1ac86f8b9d97"><div class="ttname"><a href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">TooN::Zeros</a></div><div class="ttdeci">static Operator&lt; Internal::Zero &gt; Zeros</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/a00552_source.html#l00727">objects.h:727</a></div></div>
<div class="ttc" id="a00420_html_aa0c705abe4d5c3342e7377ac76f4306f"><div class="ttname"><a href="../../db/d4f/a00420.html#aa0c705abe4d5c3342e7377ac76f4306f">Tracker::threshold</a></div><div class="ttdeci">int threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00142">Tracker.h:142</a></div></div>
<div class="ttc" id="a00519_html_a59e4b6b1426336c03b05836bbae9c69b"><div class="ttname"><a href="../../dd/d4d/a00519.html#a59e4b6b1426336c03b05836bbae9c69b">TrackerTrackingQualityGood</a></div><div class="ttdeci">const double TrackerTrackingQualityGood</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/a00519_source.html#l00041">globals.h:41</a></div></div>
<div class="ttc" id="a00421_html_a36f459fef07a976b57372c6d8c28b845"><div class="ttname"><a href="../../d2/de1/a00421.html#a36f459fef07a976b57372c6d8c28b845">TrackerData::irImageSize</a></div><div class="ttdeci">static CVD::ImageRef irImageSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/a00602_source.html#l00107">TrackerData.h:107</a></div></div>
<div class="ttc" id="a00420_html_a8b76589d689d5d69094145a5a397fd3b"><div class="ttname"><a href="../../db/d4f/a00420.html#a8b76589d689d5d69094145a5a397fd3b">Tracker::RadiansToDegrees</a></div><div class="ttdeci">float RadiansToDegrees(float r)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db2/a00601_source.html#l00077">Tracker.h:77</a></div></div>
<div class="ttc" id="a00391_html_ac2c88581f0ae3aab540dcc4a78f914d0"><div class="ttname"><a href="../../db/d95/a00391.html#ac2c88581f0ae3aab540dcc4a78f914d0">SmallBlurryImage::SE3fromSE2</a></div><div class="ttdeci">static SE3 SE3fromSE2(SE2&lt;&gt; se2, ATANCamera camera)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00210">SmallBlurryImage.cpp:210</a></div></div>
<div class="ttc" id="a00484_html_a101fd144d7d407e15633eba37102f1ed"><div class="ttname"><a href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a></div><div class="ttdeci">#define cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d89/a00484_source.html#l00016">Bundle.cpp:16</a></div></div>
<div class="ttc" id="a00037_html_a6a248428aa892f2f571bd280ff4915ee"><div class="ttname"><a href="../../d1/dc6/a00037.html#a6a248428aa892f2f571bd280ff4915ee">Candidate::irLevelPos</a></div><div class="ttdeci">CVD::ImageRef irLevelPos</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00038">KeyFrame.h:38</a></div></div>
<div class="ttc" id="a00519_html"><div class="ttname"><a href="../../dd/d4d/a00519.html">globals.h</a></div></div>
<div class="ttc" id="a00471_html"><div class="ttname"><a href="../../d4/d4b/a00471.html">TooN::WLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00048">wls.h:48</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 25 2015 17:53:29 for SLAMflex SE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
