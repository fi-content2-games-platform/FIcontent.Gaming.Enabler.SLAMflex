<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SLAMflex SE: libSLAMflex -  android project/jni/convolution.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../thumbnail.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SLAMflex SE
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SLAMflex provides detection and tracking of dominant planes for smartphone devices. This plane can then be used to show AR content relative to the plane orientation. The detection of plane is performed in the field of view of the smartphone camera. In subsequent frames it is tracked. The interface returns the plane position and orientation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_64138f433da6323d37c35d94c20fed44.html">libSLAMflex -  android project</a></li><li class="navelem"><a class="el" href="../../dir_f496a2d090f5040e1d0b8f142d0646a8.html">jni</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">convolution.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/da5/a00493.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">        This file is part of the CVD Library.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">        Copyright (C) 2005 The Authors</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">        This library is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">        modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">        License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">        version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">        This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">        but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">        Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">        You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">        License along with this library; if not, write to the Free Software</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">        Foundation, Inc.,</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifndef CVD_CONVOLUTION_H_</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#define CVD_CONVOLUTION_H_</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d37/a00505.html">exceptions.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d35/a00526.html">image.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/df0/a00557.html">pixel_operations.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dca/a00477.html">aligned_mem.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d75/a00604.html">utility.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../de/d85/a00618.html">CVD</a> {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#ae759e7989ba6c026e604670e7ad14f4d">   47</a></span>&#160;T <a class="code" href="../../de/d85/a00618.html#ae759e7989ba6c026e604670e7ad14f4d">gaussianKernel</a>(std::vector&lt;T&gt;&amp; k, T maxval, <span class="keywordtype">double</span> stddev)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">double</span> sum = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, argmax=0;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    std::vector&lt;double&gt; kernel(k.size());</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">for</span> (i=0;i&lt;k.size();i++) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordtype">double</span> x = i +0.5 - k.size()/2.0;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        sum += kernel[i] = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">exp</a>(-x*x/(2*stddev*stddev));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span> (kernel[i] &gt; kernel[argmax])</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        argmax = i;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    T finalSum = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">for</span> (i=0;i&lt;k.size();i++)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    finalSum += k[i] = (T)(kernel[i]*maxval/kernel[argmax]);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> finalSum;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> S, <span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a14e3e73885cacf5a4dc9bfbeece95293">   72</a></span>&#160;T <a class="code" href="../../de/d85/a00618.html#a14e3e73885cacf5a4dc9bfbeece95293">scaleKernel</a>(<span class="keyword">const</span> std::vector&lt;S&gt;&amp; k, std::vector&lt;T&gt;&amp; scaled, T maxval)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,argmax=0;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">for</span> (i=1;i&lt;k.size();i++)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">if</span> (k[i]&gt;k[argmax])</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            argmax = i;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    scaled.resize(k.size());</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    T sum = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (i=0;i&lt;k.size();i++)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        sum += (scaled[i] = (T)((k[i]*maxval)/k[argmax]));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> sum;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a54febcd070d196d5fcffae0606852206">   86</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a4461f90e37d86b53431b5733701bb5cb">convolveGaussian5_1</a>(<a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">int</span> w = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">int</span> h = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;w;j++) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        T* src = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+j;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        T* end = src + w*(h-4);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">while</span> (src != end) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            T sum= (T)(0.0544887*(src[0]+src[4*w])</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    + 0.2442010*(src[w]+src[3*w])</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    + 0.4026200*src[2*w]);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            *(src) = sum;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            src += w;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> (i=h-5;i&gt;=0;i--) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        T* src = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+i*w;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        T* end = src + w-4;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">while</span> (src != end) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            T sum= (T)(0.0544887*(src[0]+src[4])</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    + 0.2442010*(src[1]+src[3])</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    + 0.4026200*src[2]);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            *(src+2*w+2)=sum;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            ++src;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d6/d6a/a00619.html">  115</a></span>&#160;<span class="keyword">namespace </span>Exceptions {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../dc/d4d/a00620.html">  119</a></span>&#160;    <span class="keyword">namespace </span>Convolution {</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../d1/d2b/a00018.html">  122</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d1/d2b/a00018.html">All</a>: <span class="keyword">public</span> <a class="code" href="../../db/db2/a00020.html">CVD::Exceptions::All</a> {};</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../db/d53/a00202.html">  126</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="../../db/d53/a00202.html">IncompatibleImageSizes</a> : <span class="keyword">public</span> <a class="code" href="../../d1/d2b/a00018.html">All</a> {</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../db/d53/a00202.html#a8dc0a78507f50ddbe6f4ac2901157f43">  127</a></span>&#160;            <a class="code" href="../../db/d53/a00202.html#a8dc0a78507f50ddbe6f4ac2901157f43">IncompatibleImageSizes</a>(<span class="keyword">const</span> std::string &amp; <span class="keyword">function</span>)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <a class="code" href="../../db/db2/a00020.html#adc8fa6e16d84721ee23019e53725f90b">what</a> = <span class="stringliteral">&quot;Incompatible image sizes in &quot;</span> + <span class="keyword">function</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d9/d2a/a00270.html">  136</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d9/d2a/a00270.html">OddSizedKernelRequired</a> : <span class="keyword">public</span> <a class="code" href="../../d1/d2b/a00018.html">All</a> {</div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d9/d2a/a00270.html#a762cfb60e15a23f036c6e727ee5e0848">  137</a></span>&#160;            <a class="code" href="../../d9/d2a/a00270.html#a762cfb60e15a23f036c6e727ee5e0848">OddSizedKernelRequired</a>(<span class="keyword">const</span> std::string &amp; <span class="keyword">function</span>)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <a class="code" href="../../db/db2/a00020.html#adc8fa6e16d84721ee23019e53725f90b">what</a> = <span class="stringliteral">&quot;Odd sized kernel required in &quot;</span> + <span class="keyword">function</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            };</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        };</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">//void convolveGaussian5_1(BasicImage&lt;byte&gt;&amp; I);</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">  150</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; J, <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> hwin)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;T&gt;::wider_type</a> sum_type;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>() != J.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>()) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../db/d53/a00202.html">Exceptions::Convolution::IncompatibleImageSizes</a>(<span class="stringliteral">&quot;convolveWithBox&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> w = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">int</span> h = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> win = 2*hwin+<a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(1,1);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> factor = 1.0/(win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>*win.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    std::vector&lt;sum_type&gt; buffer(w*win.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    std::vector&lt;sum_type&gt; sums_v(w);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    sum_type* sums = &amp;sums_v[0];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    sum_type* next_row = &amp;buffer[0];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    sum_type* oldest_row = &amp;buffer[0];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../de/d85/a00618.html#a2300c7b61e33e1a180b39a08e86396e6">zeroPixels</a>(sums, w);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">const</span> T* input = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    T* output = J[hwin.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>] - hwin.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;h; i++) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    sum_type hsum=sum_type();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> T* back = input;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (j=0; j&lt;win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1; j++)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        hsum += input[j];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">for</span> (; j&lt;w; j++) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        hsum += input[j];</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        next_row[j] = hsum;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        sums[j] += hsum;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        hsum -= *(back++);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (i &gt;= win.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>-1) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="../../de/d85/a00618.html#ab394e79895c60486e6686b3f06431fb3">assign_multiple</a>(sums+win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1, factor, output+win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1, w-win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>+1);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="../../de/d85/a00618.html#a816605a6f587a89ab5fe79d48b2842ea">differences</a>(sums+win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1, oldest_row+win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1, sums+win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>-1, w-win.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>+1);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        output += w;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        oldest_row += w;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> (oldest_row == &amp;buffer[0] + w*win.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        oldest_row = &amp;buffer[0];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }    </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    input += w;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    next_row += w;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (next_row == &amp;buffer[0] + w*win.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        next_row = &amp;buffer[0];</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#abb2e7f59bdea4b7cdc9dc862ff47b1d4">  195</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; J, <span class="keywordtype">int</span> hwin)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(I, J, <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(hwin,hwin));</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#aa77712fedfde9df00f9b3f446d63b2a7">  200</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(<a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <span class="keywordtype">int</span> hwin) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(I,I,hwin);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a9d0f2755f9ac27ad852933321c27298c">  204</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(<a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> hwin) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">convolveWithBox</a>(I,I,hwin);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a43a950256ae4da68d1aef8716e187064">  209</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keywordtype">int</span> A, <span class="keywordtype">int</span> B, <span class="keywordtype">int</span> C&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a43a950256ae4da68d1aef8716e187064">convolveSymmetric</a>(<a class="code" href="../../d7/d6e/a00190.html">Image&lt;T&gt;</a>&amp; I)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;T&gt;::wider_type</a> wider;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> wider S = (A+B+C+B+A);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">int</span> width = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> height = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    T* p = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (i=0; i&lt;height; i++) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      wider a = p[0];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      wider b = p[1];</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      wider c = p[2];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      wider d = p[3];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      p[0] = (T)(((c+c)*A+(b+b)*B + a*C) /S);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      p[1] = (T)(((b+d)*A+(a+c)*B + b*C) /S);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">for</span> (j=0;j&lt;width-4;j++,p++) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        wider e = p[4];</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        p[2] = (T)(((a+e)*A + (b+d)*B + c*C)/S);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        a = b; b = c; c = d; d = e;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      p[2] = (T)(((a+c)*A + (b+d)*B + c*C) /S);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      p[3] = (T)(((b+b)*A + (c+c)*B + d*C) /S);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      p += 4;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;width;j++) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      p = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+j;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      wider a = p[0];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      wider b = p[width];</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      p[0] = (T)(((p[2*width]+p[2*width])*A+(b+b)*B + a*C) /S);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      p[width] = (T)(((b+p[width*3])*A+(a+p[2*width])*B + b*C) /S);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">for</span> (i=0;i&lt;height-4;i++) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        wider c = p[2*width];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        p[2*width] = (T)(((a+p[4*width])*A + (b+p[3*width])*B + c*C)/S);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        a=b; b=c;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        p += width;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      wider c = p[2*width];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      p[2*width] = (T)(((a+c)*A + (b+p[width*3])*B + c*C) /S);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      p[3*width] = (T)(((b+b)*A + (c+c)*B + p[width*3]*C) /S);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a15641eeb86be4070993adb8fb4d444a4">  251</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keywordtype">int</span> A, <span class="keywordtype">int</span> B, <span class="keywordtype">int</span> C, <span class="keywordtype">int</span> D&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a43a950256ae4da68d1aef8716e187064">convolveSymmetric</a>(<a class="code" href="../../d7/d6e/a00190.html">Image&lt;T&gt;</a>&amp; I)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;T&gt;::wider_type</a> wider;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> wider S = (A+B+C+D+C+B+A);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">int</span> width = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">int</span> height = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    T* p = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> (i=0; i&lt;height; i++) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      wider a = p[0];</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      wider b = p[1];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      wider c = p[2];</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      wider d = p[3];</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      p[0] = (T)(((d+d)*A + (c+c)*B + (b+b)*C + a*D)/S);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      p[1] = (T)(((c+p[4])*A + (b+d)*B + (a+c)*C + b*D)/S);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      p[2] = (T)(((b+p[5])*A + (a+p[4])*B + (b+d)*C + c*D)/S);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">for</span> (j=0;j&lt;width-6;j++,p++) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        d = p[3];</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        p[3] = (T)(((a+p[6])*A + (b+p[5])*B + (c+p[4])*C + d*D)/S);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        a=b; b=c; c=d;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      d = p[3];</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      wider e = p[4];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      p[3] = (T)(((a+e)*A + (b+p[5])*B + (c+e)*C + d*D)/S);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      p[4] = (T)(((b+d)*A + (c+e)*B + (d+p[5])*C + e*D)/S);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      p[5] = (T)(((c+c)*A + (d+d)*B + (e+e)*C + p[5]*D)/S);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      p += 6;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;width;j++) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      p = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+j;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      wider a = p[0];</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      wider b = p[width];</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      wider c = p[2*width];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      wider d = p[3*width];</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      p[0] = (T)(((d+d)*A + (c+c)*B + (b+b)*C + a*D)/S);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      p[width] = (T)(((c+p[4*width])*A + (b+d)*B + (a+c)*C + b*D)/S);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      p[2*width] = (T)(((b+p[5*width])*A + (a+p[4*width])*B + (b+d)*C + c*D)/S);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">for</span> (i=0;i&lt;height-6;i++) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        d = p[3*width];</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        p[3*width] = (T)(((a+p[width*6])*A + (b+p[width*5])*B + (c+p[width*4])*C+d*D)/S);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        a=b; b=c; c=d;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        p += width;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      d = p[3*width];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      wider e = p[4*width];</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      p[3*width] = (T)(((a+e)*A + (b+p[5*width])*B + (c+e)*C + d*D)/S);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      p[4*width] = (T)(((b+d)*A + (c+e)*B + (d+p[5*width])*C + e*D)/S);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      p[5*width] = (T)(((c+c)*A + (d+d)*B + (e+e)*C + p[5*width]*D)/S);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a99739eb5b09dd0c092282ecfd10266c4">  302</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> K&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a99739eb5b09dd0c092282ecfd10266c4">convolveSeparableSymmetric</a>(<a class="code" href="../../d7/d6e/a00190.html">Image&lt;T&gt;</a>&amp; I, <span class="keyword">const</span> std::vector&lt;K&gt;&amp; kernel, K divisor)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;T&gt;::wider_type</a> sum_type;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">int</span> w = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">int</span> h = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">int</span> r = (int)kernel.size()/2;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">int</span> i,j;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">int</span> m;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">double</span> factor = 1.0/divisor;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;w;j++) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      T* src = I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+j;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">for</span> (i=0; i&lt;h-2*r; i++,src+=w) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        sum_type sum = src[r*w]*kernel[r], v;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">for</span> (m=0; m&lt;r; m++)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      sum += (src[m*w] + src[(2*r-m)*w]) * kernel[m];</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    *(src) = static_cast&lt;T&gt;(sum * factor);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordtype">int</span> offset = r*w + r;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span> (i=h-2*r-1;i&gt;=0;i--) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      T* src = I[w];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">for</span> (j=0;j&lt;w-2*r;j++, src++) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        sum_type sum = src[r] * kernel[r], v;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">for</span> (m=0; m&lt;r; m++)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      sum += (src[m] + src[2*r-m])*kernel[m];</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    *(src+offset) = static_cast&lt;T&gt;(sum*factor);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="../../de/d45/a00175.html">  333</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> A, <span class="keyword">class</span> B&gt; <span class="keyword">struct </span><a class="code" href="../../de/d45/a00175.html">GetPixelRowTyped</a> {</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../de/d45/a00175.html#a47005001692af8de69a97e95974e5d42">  334</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> B* <span class="keyword">get</span>(<span class="keyword">const</span> A* row, <span class="keywordtype">int</span> w, B* rowbuf) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="../../de/d85/a00618.html#a3f6a09c105077594406c9390dfe1de63">std::copy</a>(row, row+w, rowbuf);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> rowbuf;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;};</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="../../d5/de9/a00176.html">  340</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="../../de/d45/a00175.html">GetPixelRowTyped</a>&lt;T,T&gt; {</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../d5/de9/a00176.html#afbcdc0ec162518c65e0edd9acbd5936d">  341</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> T* <span class="keyword">get</span>(<span class="keyword">const</span> T* row, int , T* ) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> row;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;};</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#af8fd6b28be055b2e2d8feb54e267ee88">  346</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> A, <span class="keyword">class</span> B&gt; <span class="keyword">const</span> B* <a class="code" href="../../de/d85/a00618.html#af8fd6b28be055b2e2d8feb54e267ee88">getPixelRowTyped</a>(<span class="keyword">const</span> A* row, <span class="keywordtype">int</span> n, B* rowbuf) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../de/d45/a00175.html#a47005001692af8de69a97e95974e5d42">GetPixelRowTyped&lt;A,B&gt;::get</a>(row,n,rowbuf);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="../../d8/d41/a00038.html">  350</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> S&gt; <span class="keyword">struct </span><a class="code" href="../../d8/d41/a00038.html">CastCopy</a> {</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="../../d8/d41/a00038.html#a4398bbef2c1e858ca7367349f0052088">  351</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d41/a00038.html#a4398bbef2c1e858ca7367349f0052088">cast_copy</a>(<span class="keyword">const</span> T* from, S* to, <span class="keywordtype">int</span> count) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;count; i++)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      to[i] = static_cast&lt;S&gt;(from[i]);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;};</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../d3/de7/a00039.html">  357</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="../../d8/d41/a00038.html">CastCopy</a>&lt;T,T&gt; {</div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../d3/de7/a00039.html#aff6cad41caf7038684603cfb486c0cad">  358</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/a00039.html#aff6cad41caf7038684603cfb486c0cad">cast_copy</a>(<span class="keyword">const</span> T* from, T* to, <span class="keywordtype">int</span> count) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="../../de/d85/a00618.html#a3f6a09c105077594406c9390dfe1de63">std::copy</a>(from, from+count, to);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;};</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">  363</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> S&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">cast_copy</a>(<span class="keyword">const</span> T* from, S* to, <span class="keywordtype">int</span> count) { <a class="code" href="../../d8/d41/a00038.html#a4398bbef2c1e858ca7367349f0052088">CastCopy&lt;T,S&gt;::cast_copy</a>(from,to,count); }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="../../d1/d09/a00077.html">  365</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class </span>T, <span class="keywordtype">int</span> N=-1, <span class="keywordtype">int</span> C = <a class="code" href="../../d3/d8b/a00059.html">Pixel::Component&lt;T&gt;::count</a>&gt; <span class="keyword">struct </span><a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle</a> {</div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="../../d1/d09/a00077.html#a28fb680cfe2ed37bd9ac6ed74a8690e5">  366</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt; <span class="keyword">static</span> <span class="keyword">inline</span> T <a class="code" href="../../d1/d09/a00077.html#a28fb680cfe2ed37bd9ac6ed74a8690e5">at</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* kernel) { <span class="keywordflow">return</span> <a class="code" href="../../d1/d09/a00077.html#a28fb680cfe2ed37bd9ac6ed74a8690e5">ConvolveMiddle&lt;T,-1,C&gt;::at</a>(input,factor, kernel, N); }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;};</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../d1/d51/a00079.html">  369</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keywordtype">int</span> N&gt; <span class="keyword">struct </span><a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle</a>&lt;T,N,1&gt; {</div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="../../d1/d51/a00079.html#a0e2a2331ff38483f0724f548c21e59bf">  370</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt; <span class="keyword">static</span> <span class="keyword">inline</span> T <a class="code" href="../../d1/d51/a00079.html#a0e2a2331ff38483f0724f548c21e59bf">at</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* kernel) { <span class="keywordflow">return</span> <a class="code" href="../../d1/d09/a00077.html#a28fb680cfe2ed37bd9ac6ed74a8690e5">ConvolveMiddle&lt;T,N-1&gt;::at</a>(input,factor, kernel) + (input[-N]+input[N])*kernel[N-1]; }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;};</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="../../da/dec/a00080.html">  373</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle</a>&lt;T,-1,1&gt; {</div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="../../da/dec/a00080.html#a3621e792e51f6690675893c5464074d1">  374</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt; <span class="keyword">static</span> <span class="keyword">inline</span> T <a class="code" href="../../da/dec/a00080.html#a3621e792e51f6690675893c5464074d1">at</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* kernel, <span class="keywordtype">int</span> ksize) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    T hsum = *input * factor;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      hsum += (input[-k-1] + input[k+1]) * kernel[k];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> hsum;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;};</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="../../d8/d53/a00081.html">  382</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keywordtype">int</span> C&gt; <span class="keyword">struct </span><a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle</a>&lt;T,-1, C&gt; {</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="../../d8/d53/a00081.html#a7d40baf1f020a35dfa8826e0240d5c8a">  383</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt; <span class="keyword">static</span> <span class="keyword">inline</span> T <a class="code" href="../../d8/d53/a00081.html#a7d40baf1f020a35dfa8826e0240d5c8a">at</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* kernel, <span class="keywordtype">int</span> ksize) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    T hsum = *input * factor;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      hsum += (input[-k-1] + input[k+1]) * kernel[k];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> hsum;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;};</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../d9/da4/a00078.html">  391</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle</a>&lt;T,0,1&gt; {</div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="../../d9/da4/a00078.html#a8f3d7bafce2bf04af12e7276b3adc0e0">  392</a></span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">class</span> S&gt; <span class="keyword">static</span> <span class="keyword">inline</span> T <a class="code" href="../../d9/da4/a00078.html#a8f3d7bafce2bf04af12e7276b3adc0e0">at</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* ) { <span class="keywordflow">return</span> *input * factor; }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;};</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a221e2a9541430da5ce183d16a8f86128">  395</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T,<span class="keyword">class</span> S&gt; <span class="keyword">inline</span> <span class="keyword">const</span> T* <a class="code" href="../../de/d85/a00618.html#a221e2a9541430da5ce183d16a8f86128">convolveMiddle</a>(<span class="keyword">const</span> T* input, <span class="keyword">const</span> S&amp; factor, <span class="keyword">const</span> S* kernel, <span class="keywordtype">int</span> ksize, <span class="keywordtype">int</span> n, T* output) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">#define CALL_CM(I) for (int j=0; j&lt;n; ++j, ++input, ++output) { *output = ConvolveMiddle&lt;T,I&gt;::at(input, factor, kernel); } break</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">switch</span> (ksize) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">case</span> 0: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(0);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">case</span> 1: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(1);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">case</span> 2: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(2);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">case</span> 3: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(3);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">case</span> 4: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(4);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">case</span> 5: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(5);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">case</span> 6: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(6);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">case</span> 7: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(7);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">case</span> 8: <a class="code" href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a>(8);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;n; j++, input++) { *(output++) = <a class="code" href="../../d1/d09/a00077.html">ConvolveMiddle&lt;T,-1&gt;::at</a>(input, factor, kernel, ksize); }     </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">return</span> input;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#undef CALL_CM</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">  415</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">convolveGaussian</a>(<a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <span class="keywordtype">double</span> sigma, <span class="keywordtype">double</span> sigmas=3.0)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">convolveGaussian</a>(I,I,sigma,sigmas);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a492681b85096945dda215c06e9866b26">  420</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">convolveGaussian</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; out, <span class="keywordtype">double</span> sigma, <span class="keywordtype">double</span> sigmas=3.0)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;typename Pixel::Component&lt;T&gt;::type</a>&gt;::float_type sum_comp_type;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="../../d1/d05/a00423.html">Pixel::traits&lt;T&gt;::float_type</a> sum_type;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    assert(out.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>() == I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>());</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">int</span> ksize = (int)ceil(sigmas*sigma);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">//std::cerr &lt;&lt; &quot;sigma: &quot; &lt;&lt; sigma &lt;&lt; &quot; kernel: &quot; &lt;&lt; ksize &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    std::vector&lt;sum_comp_type&gt; kernel(ksize);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    sum_comp_type ksum = sum_comp_type();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=ksize; i++)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    ksum += (kernel[i-1] = static_cast&lt;sum_comp_type&gt;(<a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">exp</a>(-i*i/(2*sigma*sigma))));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;ksize; i++)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    kernel[i] /= (2*ksum+1);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">double</span> factor = 1.0/(2*ksum+1);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordtype">int</span> w = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordtype">int</span> h = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">int</span> swin = 2*ksize;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d7/d7a/a00016.html">AlignedMem&lt;sum_type,16&gt;</a> buffer(w*(swin+1));</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="../../d7/d7a/a00016.html">AlignedMem&lt;sum_type,16&gt;</a> aligned_rowbuf(w);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="../../d7/d7a/a00016.html">AlignedMem&lt;sum_type,16&gt;</a> aligned_outbuf(w);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    sum_type* rowbuf = aligned_rowbuf.<a class="code" href="../../d7/d7a/a00016.html#aaefefe2c61be2e79956687705d8cd201">data</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    sum_type* outbuf = aligned_outbuf.<a class="code" href="../../d7/d7a/a00016.html#aaefefe2c61be2e79956687705d8cd201">data</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    std::vector&lt;sum_type*&gt; rows(swin+1);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k&lt;swin+1;k++)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    rows[k] = buffer.<a class="code" href="../../d7/d7a/a00016.html#aaefefe2c61be2e79956687705d8cd201">data</a>() + k*w;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    T* output = out.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;h; i++) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    sum_type* next_row = rows[swin];</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">const</span> sum_type* input = <a class="code" href="../../de/d85/a00618.html#af8fd6b28be055b2e2d8feb54e267ee88">getPixelRowTyped</a>(I[i], w, rowbuf);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// beginning of row</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;ksize; j++) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        sum_type hsum = <span class="keyword">static_cast&lt;</span>sum_type<span class="keyword">&gt;</span>(input[j] * factor);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        hsum += (input[std::max(j-k-1,0)] + input[j+k+1]) * kernel[k];</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        next_row[j] = hsum;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// middle of row</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    input += ksize;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    input = convolveMiddle&lt;sum_type, sum_comp_type&gt;(input, <span class="keyword">static_cast&lt;</span>sum_comp_type<span class="keyword">&gt;</span>(factor), &amp;kernel.front(), ksize, w-swin, next_row+ksize);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// end of row</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=w-ksize; j&lt;w; j++, input++) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        sum_type hsum = <span class="keyword">static_cast&lt;</span>sum_type<span class="keyword">&gt;</span>(*input * factor);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> room = w-j;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        hsum += (input[-k-1] + input[std::min(k+1,room-1)]) * kernel[k];</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        next_row[j] = hsum;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment">// vertical</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (i &gt;= swin) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keyword">const</span> sum_type* middle_row = rows[ksize];</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="../../de/d85/a00618.html#ab394e79895c60486e6686b3f06431fb3">assign_multiple</a>(middle_row, factor, outbuf, w);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keyword">const</span> sum_comp_type m = kernel[k];</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keyword">const</span> sum_type* row1 = rows[ksize-k-1];</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keyword">const</span> sum_type* row2 = rows[ksize+k+1]; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="../../de/d85/a00618.html#a337d1535fb7107b23bc875d9cc17fae0">add_multiple_of_sum</a>(row1, row2, m, outbuf, w);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">cast_copy</a>(outbuf, output, w);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        output += w;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (i == h-1) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r=0; r&lt;ksize; r++) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keyword">const</span> sum_type* middle_row = rows[ksize+r+1];</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <a class="code" href="../../de/d85/a00618.html#ab394e79895c60486e6686b3f06431fb3">assign_multiple</a>(middle_row, factor, outbuf, w);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keyword">const</span> sum_comp_type m = kernel[k];</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keyword">const</span> sum_type* row1 = rows[ksize+r-k];</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keyword">const</span> sum_type* row2 = rows[std::min(ksize+r+k+2, swin)];</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="../../de/d85/a00618.html#a337d1535fb7107b23bc875d9cc17fae0">add_multiple_of_sum</a>(row1, row2, m, outbuf, w);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">cast_copy</a>(outbuf, output, w);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            output += w;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        }   </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == swin-1) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r=0; r&lt;ksize; r++) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keyword">const</span> sum_type* middle_row = rows[r+1];</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="../../de/d85/a00618.html#ab394e79895c60486e6686b3f06431fb3">assign_multiple</a>(middle_row, factor, outbuf, w);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;ksize; k++) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keyword">const</span> sum_comp_type m = kernel[k];</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keyword">const</span> sum_type* row1 = rows[std::max(r-k-1,0)+1];</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keyword">const</span> sum_type* row2 = rows[r+k+2]; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <a class="code" href="../../de/d85/a00618.html#a337d1535fb7107b23bc875d9cc17fae0">add_multiple_of_sum</a>(row1, row2, m, outbuf, w);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <a class="code" href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">cast_copy</a>(outbuf, output, w);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        output += w;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    sum_type* tmp = rows[0];</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r=0;r&lt;swin; r++)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        rows[r] = rows[r+1];</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    rows[swin] = tmp;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a0e3eeb0cc74e17a7ae10578541183751">compute_van_vliet_b</a>(<span class="keywordtype">double</span> sigma, <span class="keywordtype">double</span> b[]);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a93bea6f79e1d4ab6777d2c8a39244032">compute_triggs_M</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> b[], <span class="keywordtype">double</span> M[][3]);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a5d388c91444d87752c575d0b0c852b29">van_vliet_blur</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> b[], <span class="keyword">const</span> SubImage&lt;float&gt; in, SubImage&lt;float&gt; out);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">convolveGaussian</a>(<span class="keyword">const</span> BasicImage&lt;float&gt;&amp; I, BasicImage&lt;float&gt;&amp; out, <span class="keywordtype">double</span> sigma, <span class="keywordtype">double</span> sigmas=3.0);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#af792197f005e3356bac7f19582e72d8a">convolveGaussian_fir</a>(<span class="keyword">const</span> BasicImage&lt;float&gt;&amp; I, BasicImage&lt;float&gt;&amp; out, <span class="keywordtype">double</span> sigma, <span class="keywordtype">double</span> sigmas=3.0);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="../../de/d85/a00618.html#a7279cddb5482e83eca0c41a9cc265c81">  527</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> O, <span class="keyword">class</span> K&gt; <span class="keywordtype">void</span> <a class="code" href="../../de/d85/a00618.html#a7279cddb5482e83eca0c41a9cc265c81">convolve_gaussian_3</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;T&gt;</a>&amp; I, <a class="code" href="../../dc/d87/a00032.html">BasicImage&lt;O&gt;</a>&amp; out, K k1, K k2)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;{    </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    assert(I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>() == out.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>());</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">const</span> T* a=I.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>();</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> w = I.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>().<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    O* o = out.<a class="code" href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">data</a>()+w+1;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">int</span> total = I.<a class="code" href="../../d1/d98/a00407.html#a0a3441def2aad6878fd3ee807151cfbb">totalsize</a>() - 2*w-2;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> cross = k1*k2;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    k1 *= k1;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    k2 *= k2;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">while</span> (total--) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> sum = k1*(a[0] + a[2] + a[w*2] + a[w*2+2]) + cross*(a[1] + a[w*2+1] + a[w] + a[w+2]) + k2*a[w+1];</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    *o++ = Pixel::scalar_convert&lt;O,T,double&gt;(sum);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    ++a;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;} <span class="comment">// namespace CVD</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="a00077_html_a28fb680cfe2ed37bd9ac6ed74a8690e5"><div class="ttname"><a href="../../d1/d09/a00077.html#a28fb680cfe2ed37bd9ac6ed74a8690e5">CVD::ConvolveMiddle::at</a></div><div class="ttdeci">static T at(const T *input, const S &amp;factor, const S *kernel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00366">convolution.h:366</a></div></div>
<div class="ttc" id="a00618_html_ac19be7b5e49fc88c72a4e768220892e7"><div class="ttname"><a href="../../de/d85/a00618.html#ac19be7b5e49fc88c72a4e768220892e7">CVD::cast_copy</a></div><div class="ttdeci">void cast_copy(const T *from, S *to, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00363">convolution.h:363</a></div></div>
<div class="ttc" id="a00618_html_a99739eb5b09dd0c092282ecfd10266c4"><div class="ttname"><a href="../../de/d85/a00618.html#a99739eb5b09dd0c092282ecfd10266c4">CVD::convolveSeparableSymmetric</a></div><div class="ttdeci">void convolveSeparableSymmetric(Image&lt; T &gt; &amp;I, const std::vector&lt; K &gt; &amp;kernel, K divisor)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00302">convolution.h:302</a></div></div>
<div class="ttc" id="a00407_html_a0a3441def2aad6878fd3ee807151cfbb"><div class="ttname"><a href="../../d1/d98/a00407.html#a0a3441def2aad6878fd3ee807151cfbb">CVD::SubImage::totalsize</a></div><div class="ttdeci">int totalsize() const </div><div class="ttdoc">What is the total number of elements in the image (i.e. size().x * size().y), including padding...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00382">image.h:382</a></div></div>
<div class="ttc" id="a00198_html_a8ee9bd31bce429b1b498bb2ff62b7d72"><div class="ttname"><a href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">CVD::ImageRef::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">The y co-ordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00180">image_ref.h:180</a></div></div>
<div class="ttc" id="a00198_html_a0a48eec7b69010efb9a67eb0533531aa"><div class="ttname"><a href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">CVD::ImageRef::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">The x co-ordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00179">image_ref.h:179</a></div></div>
<div class="ttc" id="a00493_html_ad9c7ebead2d69a8c8c69ff9614ddd8ed"><div class="ttname"><a href="../../d9/da5/a00493.html#ad9c7ebead2d69a8c8c69ff9614ddd8ed">CALL_CM</a></div><div class="ttdeci">#define CALL_CM(I)</div></div>
<div class="ttc" id="a00618_html_af792197f005e3356bac7f19582e72d8a"><div class="ttname"><a href="../../de/d85/a00618.html#af792197f005e3356bac7f19582e72d8a">CVD::convolveGaussian_fir</a></div><div class="ttdeci">void convolveGaussian_fir(const BasicImage&lt; float &gt; &amp;I, BasicImage&lt; float &gt; &amp;out, double sigma, double sigmas=3.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0f/a00494_source.html#l00019">convolve_gaussian.cpp:19</a></div></div>
<div class="ttc" id="a00618_html_ae759e7989ba6c026e604670e7ad14f4d"><div class="ttname"><a href="../../de/d85/a00618.html#ae759e7989ba6c026e604670e7ad14f4d">CVD::gaussianKernel</a></div><div class="ttdeci">T gaussianKernel(std::vector&lt; T &gt; &amp;k, T maxval, double stddev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00047">convolution.h:47</a></div></div>
<div class="ttc" id="a00059_html"><div class="ttname"><a href="../../d3/d8b/a00059.html">CVD::Pixel::Component</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8e/a00482_source.html#l00051">builtin_components.h:51</a></div></div>
<div class="ttc" id="a00618_html_a8ac170fcfe5208bd3743c082cf319390"><div class="ttname"><a href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">CVD::convolveGaussian</a></div><div class="ttdeci">void convolveGaussian(BasicImage&lt; T &gt; &amp;I, double sigma, double sigmas=3.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00415">convolution.h:415</a></div></div>
<div class="ttc" id="a00423_html"><div class="ttname"><a href="../../d1/d05/a00423.html">CVD::Pixel::traits</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dea/a00558_source.html#l00040">pixel_traits.h:40</a></div></div>
<div class="ttc" id="a00618_html_a221e2a9541430da5ce183d16a8f86128"><div class="ttname"><a href="../../de/d85/a00618.html#a221e2a9541430da5ce183d16a8f86128">CVD::convolveMiddle</a></div><div class="ttdeci">const T * convolveMiddle(const T *input, const S &amp;factor, const S *kernel, int ksize, int n, T *output)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00395">convolution.h:395</a></div></div>
<div class="ttc" id="a00018_html"><div class="ttname"><a href="../../d1/d2b/a00018.html">CVD::Exceptions::Convolution::All</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00122">convolution.h:122</a></div></div>
<div class="ttc" id="a00081_html_a7d40baf1f020a35dfa8826e0240d5c8a"><div class="ttname"><a href="../../d8/d53/a00081.html#a7d40baf1f020a35dfa8826e0240d5c8a">CVD::ConvolveMiddle&lt; T,-1, C &gt;::at</a></div><div class="ttdeci">static T at(const T *input, const S &amp;factor, const S *kernel, int ksize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00383">convolution.h:383</a></div></div>
<div class="ttc" id="a00618_html"><div class="ttname"><a href="../../de/d85/a00618.html">CVD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d34/a00476_source.html#l00024">abs.h:24</a></div></div>
<div class="ttc" id="a00202_html_a8dc0a78507f50ddbe6f4ac2901157f43"><div class="ttname"><a href="../../db/d53/a00202.html#a8dc0a78507f50ddbe6f4ac2901157f43">CVD::Exceptions::Convolution::IncompatibleImageSizes::IncompatibleImageSizes</a></div><div class="ttdeci">IncompatibleImageSizes(const std::string &amp;function)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00127">convolution.h:127</a></div></div>
<div class="ttc" id="a00270_html"><div class="ttname"><a href="../../d9/d2a/a00270.html">CVD::Exceptions::Convolution::OddSizedKernelRequired</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00136">convolution.h:136</a></div></div>
<div class="ttc" id="a00038_html_a4398bbef2c1e858ca7367349f0052088"><div class="ttname"><a href="../../d8/d41/a00038.html#a4398bbef2c1e858ca7367349f0052088">CVD::CastCopy::cast_copy</a></div><div class="ttdeci">static void cast_copy(const T *from, S *to, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00351">convolution.h:351</a></div></div>
<div class="ttc" id="a00618_html_a3f6a09c105077594406c9390dfe1de63"><div class="ttname"><a href="../../de/d85/a00618.html#a3f6a09c105077594406c9390dfe1de63">CVD::copy</a></div><div class="ttdeci">void copy(const BasicImage&lt; S &gt; &amp;in, BasicImage&lt; T &gt; &amp;out, ImageRef size=ImageRef(-1,-1), ImageRef begin=ImageRef(), ImageRef dst=ImageRef())</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/a00604_source.html#l00026">utility.h:26</a></div></div>
<div class="ttc" id="a00270_html_a762cfb60e15a23f036c6e727ee5e0848"><div class="ttname"><a href="../../d9/d2a/a00270.html#a762cfb60e15a23f036c6e727ee5e0848">CVD::Exceptions::Convolution::OddSizedKernelRequired::OddSizedKernelRequired</a></div><div class="ttdeci">OddSizedKernelRequired(const std::string &amp;function)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00137">convolution.h:137</a></div></div>
<div class="ttc" id="a00175_html"><div class="ttname"><a href="../../de/d45/a00175.html">CVD::GetPixelRowTyped</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00333">convolution.h:333</a></div></div>
<div class="ttc" id="a00038_html"><div class="ttname"><a href="../../d8/d41/a00038.html">CVD::CastCopy</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00350">convolution.h:350</a></div></div>
<div class="ttc" id="a00190_html"><div class="ttname"><a href="../../d7/d6e/a00190.html">CVD::Image</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00617">image.h:617</a></div></div>
<div class="ttc" id="a00526_html"><div class="ttname"><a href="../../d0/d35/a00526.html">image.h</a></div></div>
<div class="ttc" id="a00618_html_a4461f90e37d86b53431b5733701bb5cb"><div class="ttname"><a href="../../de/d85/a00618.html#a4461f90e37d86b53431b5733701bb5cb">CVD::convolveGaussian5_1</a></div><div class="ttdeci">void convolveGaussian5_1(Image&lt; byte &gt; &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7e/a00492_source.html#l00043">convolution.cpp:43</a></div></div>
<div class="ttc" id="a00618_html_a2300c7b61e33e1a180b39a08e86396e6"><div class="ttname"><a href="../../de/d85/a00618.html#a2300c7b61e33e1a180b39a08e86396e6">CVD::zeroPixels</a></div><div class="ttdeci">void zeroPixels(T *pixels, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/a00604_source.html#l00085">utility.h:85</a></div></div>
<div class="ttc" id="a00039_html_aff6cad41caf7038684603cfb486c0cad"><div class="ttname"><a href="../../d3/de7/a00039.html#aff6cad41caf7038684603cfb486c0cad">CVD::CastCopy&lt; T, T &gt;::cast_copy</a></div><div class="ttdeci">static void cast_copy(const T *from, T *to, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00358">convolution.h:358</a></div></div>
<div class="ttc" id="a00032_html"><div class="ttname"><a href="../../dc/d87/a00032.html">CVD::BasicImage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00471">image.h:471</a></div></div>
<div class="ttc" id="a00505_html"><div class="ttname"><a href="../../d7/d37/a00505.html">exceptions.h</a></div></div>
<div class="ttc" id="a00523_html_a031ca1778b1ff08a51f74daa820bb5d7"><div class="ttname"><a href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">TooN::exp</a></div><div class="ttdeci">Matrix&lt; R, C, P &gt; exp(const Matrix&lt; R, C, P, B &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00284">helpers.h:284</a></div></div>
<div class="ttc" id="a00020_html"><div class="ttname"><a href="../../db/db2/a00020.html">CVD::Exceptions::All</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d37/a00505_source.html#l00036">exceptions.h:36</a></div></div>
<div class="ttc" id="a00407_html_a1fe56e4395ac4f7e342c75a222c84e14"><div class="ttname"><a href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">CVD::SubImage::size</a></div><div class="ttdeci">ImageRef size() const </div><div class="ttdoc">What is the size of this image? </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00370">image.h:370</a></div></div>
<div class="ttc" id="a00080_html_a3621e792e51f6690675893c5464074d1"><div class="ttname"><a href="../../da/dec/a00080.html#a3621e792e51f6690675893c5464074d1">CVD::ConvolveMiddle&lt; T,-1, 1 &gt;::at</a></div><div class="ttdeci">static T at(const T *input, const S &amp;factor, const S *kernel, int ksize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00374">convolution.h:374</a></div></div>
<div class="ttc" id="a00407_html_aa5599f5d1a5af77d4c32c2d7a9713cfa"><div class="ttname"><a href="../../d1/d98/a00407.html#aa5599f5d1a5af77d4c32c2d7a9713cfa">CVD::SubImage::data</a></div><div class="ttdeci">const T * data() const </div><div class="ttdoc">Returns the raw image data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00326">image.h:326</a></div></div>
<div class="ttc" id="a00618_html_a14e3e73885cacf5a4dc9bfbeece95293"><div class="ttname"><a href="../../de/d85/a00618.html#a14e3e73885cacf5a4dc9bfbeece95293">CVD::scaleKernel</a></div><div class="ttdeci">T scaleKernel(const std::vector&lt; S &gt; &amp;k, std::vector&lt; T &gt; &amp;scaled, T maxval)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00072">convolution.h:72</a></div></div>
<div class="ttc" id="a00198_html"><div class="ttname"><a href="../../d7/da0/a00198.html">CVD::ImageRef</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00047">image_ref.h:47</a></div></div>
<div class="ttc" id="a00618_html_a7279cddb5482e83eca0c41a9cc265c81"><div class="ttname"><a href="../../de/d85/a00618.html#a7279cddb5482e83eca0c41a9cc265c81">CVD::convolve_gaussian_3</a></div><div class="ttdeci">void convolve_gaussian_3(const BasicImage&lt; T &gt; &amp;I, BasicImage&lt; O &gt; &amp;out, K k1, K k2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00527">convolution.h:527</a></div></div>
<div class="ttc" id="a00557_html"><div class="ttname"><a href="../../d8/df0/a00557.html">pixel_operations.h</a></div></div>
<div class="ttc" id="a00618_html_a337d1535fb7107b23bc875d9cc17fae0"><div class="ttname"><a href="../../de/d85/a00618.html#a337d1535fb7107b23bc875d9cc17fae0">CVD::add_multiple_of_sum</a></div><div class="ttdeci">void add_multiple_of_sum(const A *a, const A *b, const C &amp;c, B *out, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/a00604_source.html#l00137">utility.h:137</a></div></div>
<div class="ttc" id="a00618_html_a43a950256ae4da68d1aef8716e187064"><div class="ttname"><a href="../../de/d85/a00618.html#a43a950256ae4da68d1aef8716e187064">CVD::convolveSymmetric</a></div><div class="ttdeci">void convolveSymmetric(Image&lt; T &gt; &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00209">convolution.h:209</a></div></div>
<div class="ttc" id="a00618_html_ab394e79895c60486e6686b3f06431fb3"><div class="ttname"><a href="../../de/d85/a00618.html#ab394e79895c60486e6686b3f06431fb3">CVD::assign_multiple</a></div><div class="ttdeci">void assign_multiple(const A *a, const B &amp;c, C *out, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/a00604_source.html#l00146">utility.h:146</a></div></div>
<div class="ttc" id="a00618_html_a93bea6f79e1d4ab6777d2c8a39244032"><div class="ttname"><a href="../../de/d85/a00618.html#a93bea6f79e1d4ab6777d2c8a39244032">CVD::compute_triggs_M</a></div><div class="ttdeci">void compute_triggs_M(const double b[], double M[][3])</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7e/a00492_source.html#l00178">convolution.cpp:178</a></div></div>
<div class="ttc" id="a00079_html_a0e2a2331ff38483f0724f548c21e59bf"><div class="ttname"><a href="../../d1/d51/a00079.html#a0e2a2331ff38483f0724f548c21e59bf">CVD::ConvolveMiddle&lt; T, N, 1 &gt;::at</a></div><div class="ttdeci">static T at(const T *input, const S &amp;factor, const S *kernel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00370">convolution.h:370</a></div></div>
<div class="ttc" id="a00618_html_aff7131fca283cfde57a8f966c4164c6a"><div class="ttname"><a href="../../de/d85/a00618.html#aff7131fca283cfde57a8f966c4164c6a">CVD::convolveWithBox</a></div><div class="ttdeci">void convolveWithBox(const BasicImage&lt; T &gt; &amp;I, BasicImage&lt; T &gt; &amp;J, ImageRef hwin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00150">convolution.h:150</a></div></div>
<div class="ttc" id="a00077_html"><div class="ttname"><a href="../../d1/d09/a00077.html">CVD::ConvolveMiddle</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00365">convolution.h:365</a></div></div>
<div class="ttc" id="a00477_html"><div class="ttname"><a href="../../d9/dca/a00477.html">aligned_mem.h</a></div></div>
<div class="ttc" id="a00020_html_adc8fa6e16d84721ee23019e53725f90b"><div class="ttname"><a href="../../db/db2/a00020.html#adc8fa6e16d84721ee23019e53725f90b">CVD::Exceptions::All::what</a></div><div class="ttdeci">std::string what</div><div class="ttdoc">The error message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d37/a00505_source.html#l00038">exceptions.h:38</a></div></div>
<div class="ttc" id="a00618_html_af8fd6b28be055b2e2d8feb54e267ee88"><div class="ttname"><a href="../../de/d85/a00618.html#af8fd6b28be055b2e2d8feb54e267ee88">CVD::getPixelRowTyped</a></div><div class="ttdeci">const B * getPixelRowTyped(const A *row, int n, B *rowbuf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00346">convolution.h:346</a></div></div>
<div class="ttc" id="a00078_html_a8f3d7bafce2bf04af12e7276b3adc0e0"><div class="ttname"><a href="../../d9/da4/a00078.html#a8f3d7bafce2bf04af12e7276b3adc0e0">CVD::ConvolveMiddle&lt; T, 0, 1 &gt;::at</a></div><div class="ttdeci">static T at(const T *input, const S &amp;factor, const S *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00392">convolution.h:392</a></div></div>
<div class="ttc" id="a00618_html_a816605a6f587a89ab5fe79d48b2842ea"><div class="ttname"><a href="../../de/d85/a00618.html#a816605a6f587a89ab5fe79d48b2842ea">CVD::differences</a></div><div class="ttdeci">void differences(const A *a, const A *b, B *diff, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d75/a00604_source.html#l00128">utility.h:128</a></div></div>
<div class="ttc" id="a00016_html_aaefefe2c61be2e79956687705d8cd201"><div class="ttname"><a href="../../d7/d7a/a00016.html#aaefefe2c61be2e79956687705d8cd201">CVD::AlignedMem::data</a></div><div class="ttdeci">T * data()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dca/a00477_source.html#l00063">aligned_mem.h:63</a></div></div>
<div class="ttc" id="a00618_html_a0e3eeb0cc74e17a7ae10578541183751"><div class="ttname"><a href="../../de/d85/a00618.html#a0e3eeb0cc74e17a7ae10578541183751">CVD::compute_van_vliet_b</a></div><div class="ttdeci">void compute_van_vliet_b(double sigma, double b[])</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7e/a00492_source.html#l00171">convolution.cpp:171</a></div></div>
<div class="ttc" id="a00175_html_a47005001692af8de69a97e95974e5d42"><div class="ttname"><a href="../../de/d45/a00175.html#a47005001692af8de69a97e95974e5d42">CVD::GetPixelRowTyped::get</a></div><div class="ttdeci">static const B * get(const A *row, int w, B *rowbuf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00334">convolution.h:334</a></div></div>
<div class="ttc" id="a00016_html"><div class="ttname"><a href="../../d7/d7a/a00016.html">CVD::AlignedMem</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dca/a00477_source.html#l00054">aligned_mem.h:54</a></div></div>
<div class="ttc" id="a00604_html"><div class="ttname"><a href="../../d6/d75/a00604.html">utility.h</a></div></div>
<div class="ttc" id="a00618_html_a5d388c91444d87752c575d0b0c852b29"><div class="ttname"><a href="../../de/d85/a00618.html#a5d388c91444d87752c575d0b0c852b29">CVD::van_vliet_blur</a></div><div class="ttdeci">void van_vliet_blur(const double b[], const CVD::SubImage&lt; float &gt; in, CVD::SubImage&lt; float &gt; out)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d7e/a00492_source.html#l00215">convolution.cpp:215</a></div></div>
<div class="ttc" id="a00202_html"><div class="ttname"><a href="../../db/d53/a00202.html">CVD::Exceptions::Convolution::IncompatibleImageSizes</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00126">convolution.h:126</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 25 2015 17:53:27 for SLAMflex SE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
