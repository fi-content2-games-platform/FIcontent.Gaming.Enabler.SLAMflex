<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SLAMflex SE: libSLAMflex -  android project/jni/HomographyInit.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../thumbnail.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SLAMflex SE
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SLAMflex provides detection and tracking of dominant planes for smartphone devices. This plane can then be used to show AR content relative to the plane orientation. The detection of plane is performed in the field of view of the smartphone camera. In subsequent frames it is tracked. The interface returns the plane position and orientation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_64138f433da6323d37c35d94c20fed44.html">libSLAMflex -  android project</a></li><li class="navelem"><a class="el" href="../../dir_f496a2d090f5040e1d0b8f142d0646a8.html">jni</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HomographyInit.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/d24/a00524.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2008 Isis Innovation Limited</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db7/a00525.html">HomographyInit.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dde/a00587.html">SmallMatrixOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d21/a00573.html">se3.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db1/a00590.html">SVD.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dad/a00591.html">SymEigen.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d6e/a00613.html">wls.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d8b/a00547.html">MEstimator.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d4/d2a/a00632.html">std</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#a590ad9deb37c1131dfba022c81e2cca0">   12</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/df3/a00185.html#a590ad9deb37c1131dfba022c81e2cca0">HomographyInit::IsHomographyInlier</a>(<a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Homography, <a class="code" href="../../d8/d00/a00186.html">HomographyMatch</a> match)</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Projected = <a class="code" href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">project</a>(m3Homography * <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(match.<a class="code" href="../../d8/d00/a00186.html#ad617aa0a0a4b0519a96fea4883a2d18c">v2CamPlaneFirst</a>));</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Error = match.<a class="code" href="../../d8/d00/a00186.html#ac2ba2a37537a9206aae6603d06d0937e">v2CamPlaneSecond</a> - v2Projected;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2PixelError = match.<a class="code" href="../../d8/d00/a00186.html#af17dfb8b7fc2a00fd27329e848067104">m2PixelProjectionJac</a> * v2Error;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  <span class="keywordtype">double</span> dSquaredError = v2PixelError * v2PixelError;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  <span class="keywordflow">return</span> (dSquaredError &lt; mdMaxPixelErrorSquared);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;}</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#ab300db30a57d6061a3ef4c488b0d136d">   21</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="../../de/df3/a00185.html#ab300db30a57d6061a3ef4c488b0d136d">HomographyInit::MLESACScore</a>(<a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Homography, <a class="code" href="../../d8/d00/a00186.html">HomographyMatch</a> match)</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Projected = <a class="code" href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">project</a>(m3Homography * <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(match.<a class="code" href="../../d8/d00/a00186.html#ad617aa0a0a4b0519a96fea4883a2d18c">v2CamPlaneFirst</a>));</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Error = match.<a class="code" href="../../d8/d00/a00186.html#ac2ba2a37537a9206aae6603d06d0937e">v2CamPlaneSecond</a> - v2Projected;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2PixelError = match.<a class="code" href="../../d8/d00/a00186.html#af17dfb8b7fc2a00fd27329e848067104">m2PixelProjectionJac</a> * v2Error;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordtype">double</span> dSquaredError = v2PixelError * v2PixelError;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordflow">if</span>(dSquaredError &gt; mdMaxPixelErrorSquared)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">return</span> mdMaxPixelErrorSquared;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">return</span> dSquaredError;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#a5e1820d32f78f975ade1dd79267214ec">   33</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/df3/a00185.html#a5e1820d32f78f975ade1dd79267214ec">HomographyInit::Compute</a>(vector&lt;HomographyMatch&gt; vMatches, <span class="keywordtype">double</span> dMaxPixelError, <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> &amp;se3SecondFromFirst)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  mdMaxPixelErrorSquared = dMaxPixelError * dMaxPixelError;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  mvMatches = vMatches;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// Find best homography from minimal sets of image matches</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  BestHomographyFromMatches_MLESAC();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Generate the inlier set, and refine the best estimate using this</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  mvHomographyInliers.clear();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvMatches.size(); i++)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">if</span>(IsHomographyInlier(mm3BestHomography, mvMatches[i]))</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      mvHomographyInliers.push_back(mvMatches[i]);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iteration = 0; iteration &lt; 5; iteration++)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    RefineHomographyWithInliers();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// Decompose the best homography into a set of possible decompositions</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  DecomposeHomography();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// At this stage should have eight decomposition options, if all went according to plan</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span>(mvDecompositions.size() != 8)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// And choose the best one based on visibility constraints</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  ChooseBestDecomposition();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  se3SecondFromFirst = mvDecompositions[0].se3SecondFromFirst;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#a8b2472a81d49b7d00ddc3ab7508d5b09">   63</a></span>&#160;<a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> <a class="code" href="../../de/df3/a00185.html#a8b2472a81d49b7d00ddc3ab7508d5b09">HomographyInit::HomographyFromMatches</a>(vector&lt;HomographyMatch&gt; vMatches)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nPoints = vMatches.size();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  assert(nPoints &gt;= 4);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">int</span> nRows = 2*nPoints;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span>(nRows &lt; 9)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    nRows = 9;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;&gt;</a> m2Nx9(nRows, 9);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;nPoints; n++)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordtype">double</span> u = vMatches[n].v2CamPlaneSecond[0];</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordtype">double</span> v = vMatches[n].v2CamPlaneSecond[1];</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordtype">double</span> x = vMatches[n].v2CamPlaneFirst[0];</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordtype">double</span> y = vMatches[n].v2CamPlaneFirst[1];</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <span class="comment">//NSLog(@&quot;%f,%f &lt;=&gt; %f,%f&quot;,u,v,x,y);</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="comment">// [u v]T = H [x y]T</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      m2Nx9[n*2+0][0] = x;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      m2Nx9[n*2+0][1] = y;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      m2Nx9[n*2+0][2] = 1;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      m2Nx9[n*2+0][3] = 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      m2Nx9[n*2+0][4] = 0;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      m2Nx9[n*2+0][5] = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      m2Nx9[n*2+0][6] = -x*u;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      m2Nx9[n*2+0][7] = -y*u;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      m2Nx9[n*2+0][8] = -u;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      m2Nx9[n*2+1][0] = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      m2Nx9[n*2+1][1] = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      m2Nx9[n*2+1][2] = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      m2Nx9[n*2+1][3] = x;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      m2Nx9[n*2+1][4] = y;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      m2Nx9[n*2+1][5] = 1;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      m2Nx9[n*2+1][6] = -x*v;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      m2Nx9[n*2+1][7] = -y*v;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      m2Nx9[n*2+1][8] = -v;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span>(nRows == 9)  </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;9; i++)  <span class="comment">// Zero the last row of the matrix, </span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;     m2Nx9[8][i] = 0.0;  <span class="comment">// TooN SVD leaves out the null-space otherwise</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// The right null-space of the matrix gives the homography...</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="../../d4/dbc/a00414.html">SVD&lt;&gt;</a> svdHomography(m2Nx9);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;9&gt;</a> vH = svdHomography.<a class="code" href="../../d4/dbc/a00414.html#aed67d44bde8f88928223508616471796">get_VT</a>()[8];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Homography;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  m3Homography[0] = vH.slice&lt;0,3&gt;();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  m3Homography[1] = vH.slice&lt;3,3&gt;();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  m3Homography[2] = vH.slice&lt;6,3&gt;();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> m3Homography;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;};</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// Throughout the whole thing,</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// SecondView = Homography * FirstView</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#ad18920a038164d2960fb2e7277bcaefb">  119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/df3/a00185.html#ad18920a038164d2960fb2e7277bcaefb">HomographyInit::RefineHomographyWithInliers</a>()</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="../../d4/d4b/a00471.html">WLS&lt;9&gt;</a> wls;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  wls.<a class="code" href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">add_prior</a>(1.0);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  vector&lt;Matrix&lt;2,9&gt; &gt; vmJacobians;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  vector&lt;Vector&lt;2&gt; &gt; vvErrors;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  vector&lt;double&gt; vdErrorSquared;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//  for(unsigned int i=0; i&lt;5; i++)</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvHomographyInliers.size(); i++)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="comment">// First, find error.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2First = mvHomographyInliers[i].v2CamPlaneFirst;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Second = mm3BestHomography * <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2First);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Second = <a class="code" href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">project</a>(v3Second);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Second_real = mvHomographyInliers[i].v2CamPlaneSecond;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Error = mvHomographyInliers[i].m2PixelProjectionJac * (v2Second_real - v2Second);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      vdErrorSquared.push_back(v2Error* v2Error);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      vvErrors.push_back(v2Error);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;2,9&gt;</a> m29Jacobian;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordtype">double</span> dDenominator = v3Second[2];</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="comment">// Jacobians wrt to the elements of the homography:</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">// For x:</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      m29Jacobian[0].slice&lt;0,3&gt;() = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2First) / dDenominator;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      m29Jacobian[0].slice&lt;3,3&gt;() = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordtype">double</span> dNumerator = v3Second[0];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      m29Jacobian[0].slice&lt;6,3&gt;() = -<a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2First) * dNumerator / (dDenominator * dDenominator);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">// For y:</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      m29Jacobian[1].slice&lt;0,3&gt;() = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      m29Jacobian[1].slice&lt;3,3&gt;()  = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2First) / dDenominator;;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      dNumerator = v3Second[1];</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      m29Jacobian[1].slice&lt;6,3&gt;() = -<a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2First) * dNumerator / (dDenominator * dDenominator);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      vmJacobians.push_back(mvHomographyInliers[i].m2PixelProjectionJac * m29Jacobian);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">// Calculate robust sigma:</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  vector&lt;double&gt; vdd = vdErrorSquared;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">double</span> dSigmaSquared = <a class="code" href="../../dd/d47/a00445.html#ace010a5e9adbd367ee7881fe1b2c89bf">Tukey::FindSigmaSquared</a>(vdd);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Add re-weighted measurements to WLS:</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvHomographyInliers.size(); i++)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordtype">double</span> dWeight = <a class="code" href="../../dd/d47/a00445.html#ad8539d6abe665a29a818b6161059cba4">Tukey::Weight</a>(vdErrorSquared[i], dSigmaSquared);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(vvErrors[i][0], vmJacobians[i][0], dWeight);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(vvErrors[i][1], vmJacobians[i][1], dWeight);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  wls.<a class="code" href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">compute</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;9&gt;</a> v9Update = wls.<a class="code" href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">get_mu</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Update;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  m3Update[0] = v9Update.slice&lt;0,3&gt;();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  m3Update[1] = v9Update.slice&lt;3,3&gt;();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  m3Update[2] = v9Update.slice&lt;6,3&gt;();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  mm3BestHomography += m3Update;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#ac444dad0834283b1319467e28742b94a">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/df3/a00185.html#ac444dad0834283b1319467e28742b94a">HomographyInit::BestHomographyFromMatches_MLESAC</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// Not many matches? Don&#39;t do ransac, throw them all in a pot and see what comes out.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">if</span>(mvMatches.size() &lt; 10)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      mm3BestHomography = HomographyFromMatches(mvMatches);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// Enough matches? Run MLESAC.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordtype">int</span> anIndices[4];</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  mm3BestHomography = <a class="code" href="../../d0/de7/a00523.html#a33cfd229bb53b4055e430bd993782d41">Identity</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordtype">double</span> dBestError = 999999999999999999.9;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// Do 300 MLESAC trials.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> nR = 0; nR &lt; 300 ; nR++)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    { </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// Find set of four unique matches</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;4; i++)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordtype">bool</span> isUnique = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">while</span>(!isUnique)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          n = rand() % mvMatches.size();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          isUnique =<span class="keyword">true</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;i &amp;&amp; isUnique; j++)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span>(anIndices[j] == n)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          isUnique = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        };</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      anIndices[i] = n;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      vector&lt;HomographyMatch&gt; vMinimalMatches;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;4; i++)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    vMinimalMatches.push_back(mvMatches[anIndices[i]]);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// Find a homography from the minimal set..</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Homography = HomographyFromMatches(vMinimalMatches);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="comment">//..and sum resulting MLESAC score</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordtype">double</span> dError = 0.0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvMatches.size(); i++)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    dError += MLESACScore(m3Homography, mvMatches[i]);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span>(dError &lt; dBestError)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      mm3BestHomography = m3Homography;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      dBestError = dError;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    };</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#a102708178d35552aabe921566d93e690">  232</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/df3/a00185.html#a102708178d35552aabe921566d93e690">HomographyInit::DecomposeHomography</a>()</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  mvDecompositions.clear();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="../../d4/dbc/a00414.html">SVD&lt;3&gt;</a> svd(mm3BestHomography);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Diag = svd.<a class="code" href="../../d4/dbc/a00414.html#a96409b9ff4963704e9991e751873c3b4">get_diagonal</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">double</span> d1 = fabs(v3Diag[0]); <span class="comment">// The paper suggests the square of these (e.g. the evalues of AAT)</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordtype">double</span> d2 = fabs(v3Diag[1]); <span class="comment">// should be used, but this is wrong. c.f. Faugeras&#39; book.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordtype">double</span> d3 = fabs(v3Diag[2]);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> U = svd.<a class="code" href="../../d4/dbc/a00414.html#ae91fb2ee885977cd88b5d498180be748">get_U</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> V = svd.<a class="code" href="../../d4/dbc/a00414.html#aed67d44bde8f88928223508616471796">get_VT</a>().T();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordtype">double</span> s = <a class="code" href="../../de/dde/a00587.html#ac4b1692758aaca83761a8d8a4973e46a">M3Det</a>(U) * <a class="code" href="../../de/dde/a00587.html#ac4b1692758aaca83761a8d8a4973e46a">M3Det</a>(V);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">double</span> dPrime_PM = d2;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">int</span> nCase;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">if</span>(d1 != d2 &amp;&amp; d2 != d3)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    nCase = 1;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d1 == d2 &amp;&amp; d2 == d3)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    nCase = 3;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    nCase = 2;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">if</span>(nCase != 1)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a> &lt;&lt; <span class="stringliteral">&quot;  Homographyinit: This motion case is not implemented or is degenerate. Try again. &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordtype">double</span> x1_PM;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">double</span> x2;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">double</span> x3_PM;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// All below deals with the case = 1 case.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// Case 1 implies (d1 != d3) </span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  { <span class="comment">// Eq. 12</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    x1_PM = sqrt((d1*d1 - d2*d2) / (d1*d1 - d3*d3));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    x2    = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    x3_PM = sqrt((d2*d2 - d3*d3) / (d1*d1 - d3*d3));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  };</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordtype">double</span> e1[4] = {1.0,-1.0,1.0,-1.0};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">double</span> e3[4] = {1.0, 1.0, -1.0,-1.0};</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3np;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="../../d2/d94/a00184.html">HomographyDecomposition</a> decomposition;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// Case 1, d&#39; &gt; 0:</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  decomposition.<a class="code" href="../../d2/d94/a00184.html#a608839a8d7682391ada3ff25686ccaaa">d</a> = s * dPrime_PM;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> signs=0; signs&lt;4; signs++)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">// Eq 13</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a> = <a class="code" href="../../d0/de7/a00523.html#a33cfd229bb53b4055e430bd993782d41">Identity</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordtype">double</span> dSinTheta = (d1 - d3) * x1_PM * x3_PM * e1[signs] * e3[signs] / d2;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordtype">double</span> dCosTheta = (d1 * x3_PM * x3_PM + d3 * x1_PM * x1_PM) / d2;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[0][0] = dCosTheta;                </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[0][2] = -dSinTheta;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[2][0] = dSinTheta;                </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[2][2] = dCosTheta;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// Eq 14</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[0] = (d1 - d3) * x1_PM * e1[signs];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[1] = 0.0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[2] = (d1 - d3) * -x3_PM * e3[signs];</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      v3np[0] = x1_PM * e1[signs];</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      v3np[1] = x2;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      v3np[2] = x3_PM * e3[signs];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a910182f744ecf8df1c6ae545b067c73b">v3n</a> = V * v3np;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      mvDecompositions.push_back(decomposition);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// Case 1, d&#39; &lt; 0:</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  decomposition.<a class="code" href="../../d2/d94/a00184.html#a608839a8d7682391ada3ff25686ccaaa">d</a> = s * -dPrime_PM;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> signs=0; signs&lt;4; signs++)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    { </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">// Eq 15</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a> = -1 * <a class="code" href="../../d0/de7/a00523.html#a33cfd229bb53b4055e430bd993782d41">Identity</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordtype">double</span> dSinPhi = (d1 + d3) * x1_PM * x3_PM * e1[signs] * e3[signs] / d2;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordtype">double</span> dCosPhi = (d3 * x1_PM * x1_PM - d1 * x3_PM * x3_PM) / d2;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[0][0] = dCosPhi;                </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[0][2] = dSinPhi;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[2][0] = dSinPhi;                </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">m3Rp</a>[2][2] = -dCosPhi;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// Eq 16</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[0] = (d1 + d3) * x1_PM * e1[signs];</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[1] = 0.0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">v3Tp</a>[2] = (d1 + d3) * x3_PM * e3[signs];</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      v3np[0] = x1_PM * e1[signs];</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      v3np[1] = x2;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      v3np[2] = x3_PM * e3[signs];</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      decomposition.<a class="code" href="../../d2/d94/a00184.html#a910182f744ecf8df1c6ae545b067c73b">v3n</a> = V * v3np;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      mvDecompositions.push_back(decomposition);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// While we have the SVD results calculated here, store the decomposition R and t results as well..</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvDecompositions.size(); i++)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      mvDecompositions[i].se3SecondFromFirst.get_rotation() = </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    s * U * mvDecompositions[i].m3Rp * V.T();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      mvDecompositions[i].se3SecondFromFirst.get_translation() = </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    U * mvDecompositions[i].v3Tp;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../d9/d24/a00524.html#af44a9731b28dab395b1b88b39d6c9348">  341</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d9/d24/a00524.html#af44a9731b28dab395b1b88b39d6c9348">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="../../d2/d94/a00184.html">HomographyDecomposition</a> lhs, <span class="keyword">const</span> <a class="code" href="../../d2/d94/a00184.html">HomographyDecomposition</a> rhs)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;{</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">return</span> lhs.<a class="code" href="../../d2/d94/a00184.html#a3860d5aefd43bd1c367d023ad186e137">nScore</a> &lt; rhs.<a class="code" href="../../d2/d94/a00184.html#a3860d5aefd43bd1c367d023ad186e137">nScore</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="../../d9/d24/a00524.html#aa4e2c0a11dd0d7520df1071c437037f3">  346</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="../../d9/d24/a00524.html#aa4e2c0a11dd0d7520df1071c437037f3">SampsonusError</a>(<a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> &amp;v2Dash, <span class="keyword">const</span> <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> &amp;m3Essential, <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> &amp;v2)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Dash = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2Dash);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3 = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(v2);  </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordtype">double</span> dError = v3Dash * m3Essential * v3;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> fv3 = m3Essential * v3;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> fTv3Dash = m3Essential.T() * v3Dash;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> fv3Slice = fv3.slice&lt;0,2&gt;();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> fTv3DashSlice = fTv3Dash.slice&lt;0,2&gt;();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> (dError * dError / (fv3Slice * fv3Slice + fTv3DashSlice * fTv3DashSlice));</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../de/df3/a00185.html#aec1c0cd76bc9ec06adcf57852098c892">  363</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/df3/a00185.html#aec1c0cd76bc9ec06adcf57852098c892">HomographyInit::ChooseBestDecomposition</a>()</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  assert(mvDecompositions.size() == 8);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvDecompositions.size(); i++)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../d2/d94/a00184.html">HomographyDecomposition</a> &amp;decom = mvDecompositions[i];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordtype">int</span> nPositive = 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m=0; m&lt;mvHomographyInliers.size(); m++)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> &amp;v2 = mvHomographyInliers[m].v2CamPlaneFirst;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordtype">double</span> dVisibilityTest = (mm3BestHomography[2][0] * v2[0] + mm3BestHomography[2][1] * v2[1] + mm3BestHomography[2][2]) / decom.<a class="code" href="../../d2/d94/a00184.html#a608839a8d7682391ada3ff25686ccaaa">d</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">if</span>(dVisibilityTest &gt; 0.0)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        nPositive++;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    };</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      decom.<a class="code" href="../../d2/d94/a00184.html#a3860d5aefd43bd1c367d023ad186e137">nScore</a> = -nPositive;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  sort(mvDecompositions.begin(), mvDecompositions.end());</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  mvDecompositions.resize(4);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;mvDecompositions.size(); i++)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../d2/d94/a00184.html">HomographyDecomposition</a> &amp;decom = mvDecompositions[i];</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordtype">int</span> nPositive = 0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m=0; m&lt;mvHomographyInliers.size(); m++)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3 = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(mvHomographyInliers[m].v2CamPlaneFirst);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordtype">double</span> dVisibilityTest = v3 * decom.<a class="code" href="../../d2/d94/a00184.html#a910182f744ecf8df1c6ae545b067c73b">v3n</a> / decom.<a class="code" href="../../d2/d94/a00184.html#a608839a8d7682391ada3ff25686ccaaa">d</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">if</span>(dVisibilityTest &gt; 0.0)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        nPositive++;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    };</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      decom.<a class="code" href="../../d2/d94/a00184.html#a3860d5aefd43bd1c367d023ad186e137">nScore</a> = -nPositive;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  sort(mvDecompositions.begin(), mvDecompositions.end());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  mvDecompositions.resize(2);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// According to Faugeras and Lustman, ambiguity exists if the two scores are equal</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// but in practive, better to look at the ratio!</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordtype">double</span> dRatio = (double) mvDecompositions[1].nScore / (<span class="keywordtype">double</span>) mvDecompositions[0].nScore;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">if</span>(dRatio &lt; 0.9) <span class="comment">// no ambiguity!</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    mvDecompositions.erase(mvDecompositions.begin() + 1);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">else</span>             <span class="comment">// two-way ambiguity. Resolve by sampsonus score of all points.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordtype">double</span> dErrorSquaredLimit  = mdMaxPixelErrorSquared * 4;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordtype">double</span> adSampsonusScores[2];</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;2; i++)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> se3 = mvDecompositions[i].se3SecondFromFirst;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;3&gt;</a> m3Essential;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        m3Essential.T()[j] = se3.<a class="code" href="../../df/d73/a00358.html#a0284c7cd9479da896ab29d6c62c41844">get_translation</a>() ^ se3.<a class="code" href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">get_rotation</a>().get_matrix().T()[j];</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordtype">double</span> dSumError = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m=0; m &lt; mvMatches.size(); m++ )</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;          <span class="keywordtype">double</span> d = <a class="code" href="../../d9/d24/a00524.html#aa4e2c0a11dd0d7520df1071c437037f3">SampsonusError</a>(mvMatches[m].v2CamPlaneSecond, m3Essential, mvMatches[m].v2CamPlaneFirst);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;          <span class="keywordflow">if</span>(d &gt; dErrorSquaredLimit)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        d = dErrorSquaredLimit;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          dSumError += d;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      adSampsonusScores[i] = dSumError;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">if</span>(adSampsonusScores[0] &lt;= adSampsonusScores[1])</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    mvDecompositions.erase(mvDecompositions.begin() + 1);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    mvDecompositions.erase(mvDecompositions.begin());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="ttc" id="a00185_html_ad18920a038164d2960fb2e7277bcaefb"><div class="ttname"><a href="../../de/df3/a00185.html#ad18920a038164d2960fb2e7277bcaefb">HomographyInit::RefineHomographyWithInliers</a></div><div class="ttdeci">void RefineHomographyWithInliers()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00119">HomographyInit.cpp:119</a></div></div>
<div class="ttc" id="a00185_html_a5e1820d32f78f975ade1dd79267214ec"><div class="ttname"><a href="../../de/df3/a00185.html#a5e1820d32f78f975ade1dd79267214ec">HomographyInit::Compute</a></div><div class="ttdeci">bool Compute(std::vector&lt; HomographyMatch &gt; vMatches, double dMaxPixelError, SE3&lt;&gt; &amp;se3SecondCameraPose)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00033">HomographyInit.cpp:33</a></div></div>
<div class="ttc" id="a00184_html_a910182f744ecf8df1c6ae545b067c73b"><div class="ttname"><a href="../../d2/d94/a00184.html#a910182f744ecf8df1c6ae545b067c73b">HomographyDecomposition::v3n</a></div><div class="ttdeci">Vector&lt; 3 &gt; v3n</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00037">HomographyInit.h:37</a></div></div>
<div class="ttc" id="a00184_html_a0889f6b4f99d27a0f759fe57fbdb0a2b"><div class="ttname"><a href="../../d2/d94/a00184.html#a0889f6b4f99d27a0f759fe57fbdb0a2b">HomographyDecomposition::m3Rp</a></div><div class="ttdeci">Matrix&lt; 3 &gt; m3Rp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00035">HomographyInit.h:35</a></div></div>
<div class="ttc" id="a00591_html"><div class="ttname"><a href="../../d9/dad/a00591.html">SymEigen.h</a></div></div>
<div class="ttc" id="a00358_html_a6f349984d701630586ac4955c35733f7"><div class="ttname"><a href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">TooN::SE3::get_rotation</a></div><div class="ttdeci">SO3&lt; Precision &gt; &amp; get_rotation()</div><div class="ttdoc">Returns the rotation part of the transformation as a SO3. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00064">se3.h:64</a></div></div>
<div class="ttc" id="a00523_html_a33cfd229bb53b4055e430bd993782d41"><div class="ttname"><a href="../../d0/de7/a00523.html#a33cfd229bb53b4055e430bd993782d41">TooN::Identity</a></div><div class="ttdeci">static Operator&lt; Internal::Identity&lt; Internal::One &gt; &gt; Identity</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/a00552_source.html#l00748">objects.h:748</a></div></div>
<div class="ttc" id="a00414_html_ae91fb2ee885977cd88b5d498180be748"><div class="ttname"><a href="../../d4/dbc/a00414.html#ae91fb2ee885977cd88b5d498180be748">TooN::SVD::get_U</a></div><div class="ttdeci">Matrix&lt; Rows, Min_Dim, Precision, Reference::RowMajor &gt; get_U()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db1/a00590_source.html#l00238">SVD.h:238</a></div></div>
<div class="ttc" id="a00184_html_aed1c6a83b603a44546c01131d0979b1e"><div class="ttname"><a href="../../d2/d94/a00184.html#aed1c6a83b603a44546c01131d0979b1e">HomographyDecomposition::v3Tp</a></div><div class="ttdeci">Vector&lt; 3 &gt; v3Tp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00034">HomographyInit.h:34</a></div></div>
<div class="ttc" id="a00547_html"><div class="ttname"><a href="../../d9/d8b/a00547.html">MEstimator.h</a></div></div>
<div class="ttc" id="a00445_html_ace010a5e9adbd367ee7881fe1b2c89bf"><div class="ttname"><a href="../../dd/d47/a00445.html#ace010a5e9adbd367ee7881fe1b2c89bf">Tukey::FindSigmaSquared</a></div><div class="ttdeci">static double FindSigmaSquared(std::vector&lt; double &gt; &amp;vdErrorSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00077">MEstimator.h:77</a></div></div>
<div class="ttc" id="a00523_html_addcb08d3afb49cc2c43beb32546b9aa2"><div class="ttname"><a href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">TooN::unproject</a></div><div class="ttdeci">Vector&lt;(Size==Dynamic?Dynamic:Size+1), Precision &gt; unproject(const Vector&lt; Size, Precision, Base &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00166">helpers.h:166</a></div></div>
<div class="ttc" id="a00185_html_a590ad9deb37c1131dfba022c81e2cca0"><div class="ttname"><a href="../../de/df3/a00185.html#a590ad9deb37c1131dfba022c81e2cca0">HomographyInit::IsHomographyInlier</a></div><div class="ttdeci">bool IsHomographyInlier(Matrix&lt; 3 &gt; m3Homography, HomographyMatch match)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00012">HomographyInit.cpp:12</a></div></div>
<div class="ttc" id="a00471_html_a4a3b86f43627f63e794e545b456b06dc"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">TooN::WLS::add_mJ</a></div><div class="ttdeci">void add_mJ(Precision m, const Vector&lt; Size, Precision, B2 &gt; &amp;J, Precision weight=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00100">wls.h:100</a></div></div>
<div class="ttc" id="a00184_html"><div class="ttname"><a href="../../d2/d94/a00184.html">HomographyDecomposition</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00032">HomographyInit.h:32</a></div></div>
<div class="ttc" id="a00185_html_a8b2472a81d49b7d00ddc3ab7508d5b09"><div class="ttname"><a href="../../de/df3/a00185.html#a8b2472a81d49b7d00ddc3ab7508d5b09">HomographyInit::HomographyFromMatches</a></div><div class="ttdeci">Matrix&lt; 3 &gt; HomographyFromMatches(std::vector&lt; HomographyMatch &gt; vMatches)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00063">HomographyInit.cpp:63</a></div></div>
<div class="ttc" id="a00587_html_ac4b1692758aaca83761a8d8a4973e46a"><div class="ttname"><a href="../../de/dde/a00587.html#ac4b1692758aaca83761a8d8a4973e46a">M3Det</a></div><div class="ttdeci">double M3Det(Matrix&lt; 3 &gt; m)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dde/a00587_source.html#l00030">SmallMatrixOpts.h:30</a></div></div>
<div class="ttc" id="a00445_html_ad8539d6abe665a29a818b6161059cba4"><div class="ttname"><a href="../../dd/d47/a00445.html#ad8539d6abe665a29a818b6161059cba4">Tukey::Weight</a></div><div class="ttdeci">static double Weight(double dErrorSquared, double dSigmaSquared)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8b/a00547_source.html#l00052">MEstimator.h:52</a></div></div>
<div class="ttc" id="a00241_html"><div class="ttname"><a href="../../d6/db6/a00241.html">TooN::Matrix&lt; 3 &gt;</a></div></div>
<div class="ttc" id="a00587_html"><div class="ttname"><a href="../../de/dde/a00587.html">SmallMatrixOpts.h</a></div></div>
<div class="ttc" id="a00471_html_a4d34baf6de02ddc5f9c460a6c8b4c404"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">TooN::WLS::get_mu</a></div><div class="ttdeci">Vector&lt; Size, Precision &gt; &amp; get_mu()</div><div class="ttdoc">Returns the update. With no prior, this is the result of . </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00202">wls.h:202</a></div></div>
<div class="ttc" id="a00184_html_a3860d5aefd43bd1c367d023ad186e137"><div class="ttname"><a href="../../d2/d94/a00184.html#a3860d5aefd43bd1c367d023ad186e137">HomographyDecomposition::nScore</a></div><div class="ttdeci">int nScore</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00041">HomographyInit.h:41</a></div></div>
<div class="ttc" id="a00414_html_a96409b9ff4963704e9991e751873c3b4"><div class="ttname"><a href="../../d4/dbc/a00414.html#a96409b9ff4963704e9991e751873c3b4">TooN::SVD::get_diagonal</a></div><div class="ttdeci">Vector&lt; Min_Dim, Precision &gt; &amp; get_diagonal()</div><div class="ttdoc">Return the singular values as a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db1/a00590_source.html#l00249">SVD.h:249</a></div></div>
<div class="ttc" id="a00590_html"><div class="ttname"><a href="../../d7/db1/a00590.html">SVD.h</a></div></div>
<div class="ttc" id="a00414_html"><div class="ttname"><a href="../../d4/dbc/a00414.html">TooN::SVD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db1/a00590_source.html#l00089">SVD.h:89</a></div></div>
<div class="ttc" id="a00185_html_ac444dad0834283b1319467e28742b94a"><div class="ttname"><a href="../../de/df3/a00185.html#ac444dad0834283b1319467e28742b94a">HomographyInit::BestHomographyFromMatches_MLESAC</a></div><div class="ttdeci">void BestHomographyFromMatches_MLESAC()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00179">HomographyInit.cpp:179</a></div></div>
<div class="ttc" id="a00358_html"><div class="ttname"><a href="../../df/d73/a00358.html">TooN::SE3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00050">se3.h:50</a></div></div>
<div class="ttc" id="a00186_html_af17dfb8b7fc2a00fd27329e848067104"><div class="ttname"><a href="../../d8/d00/a00186.html#af17dfb8b7fc2a00fd27329e848067104">HomographyMatch::m2PixelProjectionJac</a></div><div class="ttdeci">Matrix&lt; 2 &gt; m2PixelProjectionJac</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00028">HomographyInit.h:28</a></div></div>
<div class="ttc" id="a00185_html_ab300db30a57d6061a3ef4c488b0d136d"><div class="ttname"><a href="../../de/df3/a00185.html#ab300db30a57d6061a3ef4c488b0d136d">HomographyInit::MLESACScore</a></div><div class="ttdeci">double MLESACScore(Matrix&lt; 3 &gt; m3Homography, HomographyMatch match)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00021">HomographyInit.cpp:21</a></div></div>
<div class="ttc" id="a00632_html"><div class="ttname"><a href="../../d4/d2a/a00632.html">std</a></div></div>
<div class="ttc" id="a00185_html_a102708178d35552aabe921566d93e690"><div class="ttname"><a href="../../de/df3/a00185.html#a102708178d35552aabe921566d93e690">HomographyInit::DecomposeHomography</a></div><div class="ttdeci">void DecomposeHomography()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00232">HomographyInit.cpp:232</a></div></div>
<div class="ttc" id="a00525_html"><div class="ttname"><a href="../../d7/db7/a00525.html">HomographyInit.h</a></div></div>
<div class="ttc" id="a00613_html"><div class="ttname"><a href="../../d1/d6e/a00613.html">wls.h</a></div></div>
<div class="ttc" id="a00358_html_a0284c7cd9479da896ab29d6c62c41844"><div class="ttname"><a href="../../df/d73/a00358.html#a0284c7cd9479da896ab29d6c62c41844">TooN::SE3::get_translation</a></div><div class="ttdeci">Vector&lt; 3, Precision &gt; &amp; get_translation()</div><div class="ttdoc">Returns the translation part of the transformation as a Vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00069">se3.h:69</a></div></div>
<div class="ttc" id="a00414_html_aed67d44bde8f88928223508616471796"><div class="ttname"><a href="../../d4/dbc/a00414.html#aed67d44bde8f88928223508616471796">TooN::SVD::get_VT</a></div><div class="ttdeci">Matrix&lt; Min_Dim, Cols, Precision, Reference::RowMajor &gt; get_VT()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db1/a00590_source.html#l00254">SVD.h:254</a></div></div>
<div class="ttc" id="a00186_html"><div class="ttname"><a href="../../d8/d00/a00186.html">HomographyMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00023">HomographyInit.h:23</a></div></div>
<div class="ttc" id="a00186_html_ad617aa0a0a4b0519a96fea4883a2d18c"><div class="ttname"><a href="../../d8/d00/a00186.html#ad617aa0a0a4b0519a96fea4883a2d18c">HomographyMatch::v2CamPlaneFirst</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2CamPlaneFirst</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00026">HomographyInit.h:26</a></div></div>
<div class="ttc" id="a00471_html_aa010c5918f0045b229fd3fd9c073a8d7"><div class="ttname"><a href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">TooN::WLS::compute</a></div><div class="ttdeci">void compute()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00180">wls.h:180</a></div></div>
<div class="ttc" id="a00185_html_aec1c0cd76bc9ec06adcf57852098c892"><div class="ttname"><a href="../../de/df3/a00185.html#aec1c0cd76bc9ec06adcf57852098c892">HomographyInit::ChooseBestDecomposition</a></div><div class="ttdeci">void ChooseBestDecomposition()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00363">HomographyInit.cpp:363</a></div></div>
<div class="ttc" id="a00184_html_a608839a8d7682391ada3ff25686ccaaa"><div class="ttname"><a href="../../d2/d94/a00184.html#a608839a8d7682391ada3ff25686ccaaa">HomographyDecomposition::d</a></div><div class="ttdeci">double d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00036">HomographyInit.h:36</a></div></div>
<div class="ttc" id="a00524_html_aa4e2c0a11dd0d7520df1071c437037f3"><div class="ttname"><a href="../../d9/d24/a00524.html#aa4e2c0a11dd0d7520df1071c437037f3">SampsonusError</a></div><div class="ttdeci">static double SampsonusError(Vector&lt; 2 &gt; &amp;v2Dash, const Matrix&lt; 3 &gt; &amp;m3Essential, Vector&lt; 2 &gt; &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00346">HomographyInit.cpp:346</a></div></div>
<div class="ttc" id="a00451_html"><div class="ttname"><a href="../../d9/d69/a00451.html">TooN::Vector&lt; 2 &gt;</a></div></div>
<div class="ttc" id="a00471_html_ae559165e2cfb4a9968a1d6bc4aee8602"><div class="ttname"><a href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">TooN::WLS::add_prior</a></div><div class="ttdeci">void add_prior(Precision val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00070">wls.h:70</a></div></div>
<div class="ttc" id="a00523_html_ae9b2cb48b0a8e681b3dd1ac86f8b9d97"><div class="ttname"><a href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">TooN::Zeros</a></div><div class="ttdeci">static Operator&lt; Internal::Zero &gt; Zeros</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/a00552_source.html#l00727">objects.h:727</a></div></div>
<div class="ttc" id="a00523_html_aba317fcd024f7f6e135433caa8d0d6c4"><div class="ttname"><a href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">TooN::project</a></div><div class="ttdeci">Vector&lt;(Size==Dynamic?Dynamic:Size-1), Precision &gt; project(const Vector&lt; Size, Precision, Base &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00157">helpers.h:157</a></div></div>
<div class="ttc" id="a00524_html_af44a9731b28dab395b1b88b39d6c9348"><div class="ttname"><a href="../../d9/d24/a00524.html#af44a9731b28dab395b1b88b39d6c9348">operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const HomographyDecomposition lhs, const HomographyDecomposition rhs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d24/a00524_source.html#l00341">HomographyInit.cpp:341</a></div></div>
<div class="ttc" id="a00186_html_ac2ba2a37537a9206aae6603d06d0937e"><div class="ttname"><a href="../../d8/d00/a00186.html#ac2ba2a37537a9206aae6603d06d0937e">HomographyMatch::v2CamPlaneSecond</a></div><div class="ttdeci">Vector&lt; 2 &gt; v2CamPlaneSecond</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/a00525_source.html#l00027">HomographyInit.h:27</a></div></div>
<div class="ttc" id="a00573_html"><div class="ttname"><a href="../../d6/d21/a00573.html">se3.h</a></div></div>
<div class="ttc" id="a00484_html_a101fd144d7d407e15633eba37102f1ed"><div class="ttname"><a href="../../d8/d89/a00484.html#a101fd144d7d407e15633eba37102f1ed">cout</a></div><div class="ttdeci">#define cout</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d89/a00484_source.html#l00016">Bundle.cpp:16</a></div></div>
<div class="ttc" id="a00471_html"><div class="ttname"><a href="../../d4/d4b/a00471.html">TooN::WLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00048">wls.h:48</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 25 2015 17:53:28 for SLAMflex SE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
