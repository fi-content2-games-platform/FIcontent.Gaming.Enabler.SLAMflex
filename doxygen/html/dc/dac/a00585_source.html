<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SLAMflex SE: libSLAMflex -  android project/jni/SmallBlurryImage.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../thumbnail.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SLAMflex SE
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SLAMflex provides detection and tracking of dominant planes for smartphone devices. This plane can then be used to show AR content relative to the plane orientation. The detection of plane is performed in the field of view of the smartphone camera. In subsequent frames it is tracked. The interface returns the plane position and orientation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_64138f433da6323d37c35d94c20fed44.html">libSLAMflex -  android project</a></li><li class="navelem"><a class="el" href="../../dir_f496a2d090f5040e1d0b8f142d0646a8.html">jni</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SmallBlurryImage.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/dac/a00585.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2008 Isis Innovation Limited</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d92/a00586.html">SmallBlurryImage.h</a>&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d75/a00604.html">utility.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/da5/a00493.html">convolution.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/dc0/a00611.html">vision.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d06/a00572.html">se2.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d9c/a00487.html">Cholesky.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d6e/a00613.html">wls.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../de/d85/a00618.html">CVD</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d4/d2a/a00632.html">std</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../db/d95/a00391.html#a08370a33eb90f38889ca999135d273e9">SmallBlurryImage::mirSize</a>(-1,-1);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#a789b2d8fb6958362aefcc90e57770a42">   15</a></span>&#160;<a class="code" href="../../db/d95/a00391.html#ae2da68e01ab79facc36a95f8c9b08c67">SmallBlurryImage::SmallBlurryImage</a>(<a class="code" href="../../dc/d55/a00226.html">KeyFrame</a> &amp;kf, <span class="keywordtype">double</span> dBlur)</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;{</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  mbMadeJacs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  MakeFromKF(kf, dBlur);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;}</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#ae2da68e01ab79facc36a95f8c9b08c67">   21</a></span>&#160;<a class="code" href="../../db/d95/a00391.html#ae2da68e01ab79facc36a95f8c9b08c67">SmallBlurryImage::SmallBlurryImage</a>()</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  mbMadeJacs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;}</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Make a SmallBlurryImage from a KeyFrame This fills in the mimSmall</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// image (Which is just a small un-blurred version of the KF) and</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// mimTemplate (which is a floating-point, zero-mean blurred version</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// of the above)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#a9de44381714f6da3243c36c89581bb72">   30</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d95/a00391.html#a9de44381714f6da3243c36c89581bb72">SmallBlurryImage::MakeFromKF</a>(<a class="code" href="../../dc/d55/a00226.html">KeyFrame</a> &amp;kf, <span class="keywordtype">double</span> dBlur)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">if</span>(mirSize[0] == -1)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    mirSize = kf.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[3].<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>.<a class="code" href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">size</a>() / 2;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  mbMadeJacs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  mimSmall.resize(mirSize);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  mimTemplate.resize(mirSize);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  mbMadeJacs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="../../de/d85/a00618.html#afe6b48e426185860e5c373965baee6df">halfSample</a>(kf.<a class="code" href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">aLevels</a>[3].<a class="code" href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">im</a>, mimSmall);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nSum = 0;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    nSum += mimSmall[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">while</span>(ir.<a class="code" href="../../d7/da0/a00198.html#a0eb956391ba9f250ee00f15a294dc334">next</a>(mirSize));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">float</span> fMean = ((float) nSum) / mirSize.<a class="code" href="../../d7/da0/a00198.html#aa000fde49688b284af64547a0e252d87">area</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  ir.<a class="code" href="../../d7/da0/a00198.html#a9d617002d2e63b9a7f97edcca440792a">home</a>();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    mimTemplate[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>] = mimSmall[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>] - fMean;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">while</span>(ir.<a class="code" href="../../d7/da0/a00198.html#a0eb956391ba9f250ee00f15a294dc334">next</a>(mirSize));</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">convolveGaussian</a>(mimTemplate, dBlur);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// Make the jacobians (actually, no more than a gradient image)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// of the blurred template</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#ab37342868b42c2cbb25ef28b8663861e">   59</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../db/d95/a00391.html#ab37342868b42c2cbb25ef28b8663861e">SmallBlurryImage::MakeJacs</a>()</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  mimImageJacs.resize(mirSize);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// Fill in the gradient image</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> &amp;v2Grad = mimImageJacs[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>];</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordflow">if</span>(mimTemplate.in_image_with_border(ir,1))</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      v2Grad[0] = mimTemplate[ir + <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(1,0)] - mimTemplate[ir - <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(1,0)];</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      v2Grad[1] = mimTemplate[ir + <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(0,1)] - mimTemplate[ir - <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(0,1)];</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="comment">// N.b. missing 0.5 factor in above, this will be added later.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    v2Grad = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">while</span>(ir.<a class="code" href="../../d7/da0/a00198.html#a0eb956391ba9f250ee00f15a294dc334">next</a>(mirSize));</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  mbMadeJacs = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Calculate the zero-mean SSD between one image and the next.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// Since both are zero mean already, just calculate the SSD...</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#a72b70aac5dcd48f21dbb3bc2da77d9e6">   82</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="../../db/d95/a00391.html#a72b70aac5dcd48f21dbb3bc2da77d9e6">SmallBlurryImage::ZMSSD</a>(<a class="code" href="../../db/d95/a00391.html">SmallBlurryImage</a> &amp;other)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordtype">double</span> dSSD = 0.0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordtype">double</span> dDiff = mimTemplate[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>] - other.<a class="code" href="../../db/d95/a00391.html#adcbc042e90975c185a0c761f5001bf93">mimTemplate</a>[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>];</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      dSSD += dDiff * dDiff;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">while</span>(ir.<a class="code" href="../../d7/da0/a00198.html#a0eb956391ba9f250ee00f15a294dc334">next</a>(mirSize));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">return</span> dSSD;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// Find an SE2 which best aligns an SBI to a target</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// Do this by ESM-tracking a la Benhimane &amp; Malis</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#ac55c52155ae5c9876ec6a54e8312cf0f">   98</a></span>&#160;pair&lt;SE2&lt;&gt;,<span class="keywordtype">double</span>&gt; <a class="code" href="../../db/d95/a00391.html#ac55c52155ae5c9876ec6a54e8312cf0f">SmallBlurryImage::IteratePosRelToTarget</a>(<a class="code" href="../../db/d95/a00391.html">SmallBlurryImage</a> &amp;other, <span class="keywordtype">int</span> nIterations)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="../../d3/dc9/a00355.html">SE2&lt;&gt;</a> se2CtoC;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="../../d3/dc9/a00355.html">SE2&lt;&gt;</a> se2WfromC;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> irCenter = mirSize / 2;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  se2WfromC.<a class="code" href="../../d3/dc9/a00355.html#adcfd505ca53848fa3f783b5cc6b05294">get_translation</a>() = <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(irCenter);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  pair&lt;SE2&lt;&gt;, <span class="keywordtype">double</span>&gt; result_pair;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">if</span>(!other.<a class="code" href="../../db/d95/a00391.html#a23efee4628b0553cf68385ea37cbfa74">mbMadeJacs</a>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      cerr &lt;&lt; <span class="stringliteral">&quot;You spanner, you didn&#39;t make the jacs for the target.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      assert(other.<a class="code" href="../../db/d95/a00391.html#a23efee4628b0553cf68385ea37cbfa74">mbMadeJacs</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    };</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">double</span> dMeanOffset = 0.0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;4&gt;</a> v4Accum;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;10&gt;</a> v10Triangle;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="../../d7/d6e/a00190.html">Image&lt;float&gt;</a> imWarped(mirSize);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordtype">double</span> dFinalScore = 0.0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> it = 0; it&lt;nIterations; it++)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      dFinalScore = 0.0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      v4Accum = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      v10Triangle = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>; <span class="comment">// Holds the bottom-left triangle of JTJ</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;4&gt;</a> v4Jac;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      v4Jac[3] = 1.0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="../../d3/dc9/a00355.html">SE2&lt;&gt;</a> se2XForm = se2WfromC * se2CtoC * se2WfromC.<a class="code" href="../../d3/dc9/a00355.html#a16b53608cc9b345e10a095c899e59bff">inverse</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="comment">// Make the warped current image template:</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Zero = <a class="code" href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">Zeros</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="../../de/d85/a00618.html#adffa5bba45e2953e9525190d02a54764">CVD::transform</a>(mimTemplate, imWarped, se2XForm.<a class="code" href="../../d3/dc9/a00355.html#a044ce9b6f9bd98fb2a66a0611aa3175e">get_rotation</a>().get_matrix(), se2XForm.<a class="code" href="../../d3/dc9/a00355.html#adcfd505ca53848fa3f783b5cc6b05294">get_translation</a>(), v2Zero, -9e20f);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// Now compare images, calc differences, and current image jacobian:</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../d7/da0/a00198.html">ImageRef</a> <a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span>(!imWarped.<a class="code" href="../../d1/d98/a00407.html#a0373930f0671990ed3a8dfef265cc2f5">in_image_with_border</a>(ir,1))</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordtype">float</span> l,r,u,d,here;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      l = imWarped[ir - <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(1,0)];</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      r = imWarped[ir + <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(1,0)];</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      u = imWarped[ir - <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(0,1)];</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      d = imWarped[ir + <a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(0,1)];</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      here = imWarped[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>];</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">if</span>(l + r + u + d + here &lt; -9999.9)   <span class="comment">// This means it&#39;s out of the image; c.f. the -9e20f param to transform.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2CurrentGrad;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      v2CurrentGrad[0] = r - l; <span class="comment">// Missing 0.5 factor</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      v2CurrentGrad[1] = d - u;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2SumGrad = 0.25 * (v2CurrentGrad  + other.<a class="code" href="../../db/d95/a00391.html#ad95977bc62be5e0f78d545d22ec84515">mimImageJacs</a>[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>]); </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="comment">// Why 0.25? This is from missing 0.5 factors: One for </span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="comment">// the fact we average two gradients, the other from </span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="comment">// each gradient missing a 0.5 factor.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      v4Jac[0] = v2SumGrad[0];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      v4Jac[1] = v2SumGrad[1];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      v4Jac[2] = -(ir.y - irCenter.<a class="code" href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">y</a>) * v2SumGrad[0] + (ir.x - irCenter.<a class="code" href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">x</a>) * v2SumGrad[1];</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="comment">//      v4Jac[3] = 1.0;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordtype">double</span> dDiff = imWarped[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>] - other.<a class="code" href="../../db/d95/a00391.html#adcbc042e90975c185a0c761f5001bf93">mimTemplate</a>[<a class="code" href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">ir</a>] + dMeanOffset;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      dFinalScore += dDiff * dDiff;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      v4Accum += dDiff * v4Jac;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="comment">// Speedy fill of the LL triangle of JTJ:</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordtype">double</span> *p = &amp;v10Triangle[0];</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      *p++ += v4Jac[0] * v4Jac[0];</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      *p++ += v4Jac[1] * v4Jac[0];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      *p++ += v4Jac[1] * v4Jac[1];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      *p++ += v4Jac[2] * v4Jac[0];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      *p++ += v4Jac[2] * v4Jac[1];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      *p++ += v4Jac[2] * v4Jac[2];</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      *p++ += v4Jac[0];</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      *p++ += v4Jac[1];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      *p++ += v4Jac[2];</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      *p++ += 1.0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keywordflow">while</span>(ir.next(mirSize));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;4&gt;</a> v4Update;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// Solve for JTJ-1JTv;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;4&gt;</a> m4;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">int</span> v=0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;4; j++)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;=j; i++)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        m4[j][i] = m4[i][j] = v10Triangle[v++];</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d2/dee/a00049.html">Cholesky&lt;4&gt;</a> chol(m4);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    v4Update = chol.<a class="code" href="../../d2/dee/a00049.html#a33a4f83e5cb035c47a4539374b207932">backsub</a>(v4Accum);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="../../d3/dc9/a00355.html">SE2&lt;&gt;</a> se2Update;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      se2Update.<a class="code" href="../../d3/dc9/a00355.html#adcfd505ca53848fa3f783b5cc6b05294">get_translation</a>() = -v4Update.slice&lt;0,2&gt;();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      se2Update.<a class="code" href="../../d3/dc9/a00355.html#a044ce9b6f9bd98fb2a66a0611aa3175e">get_rotation</a>() = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">SO2&lt;&gt;::exp</a>(-v4Update[2]);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      se2CtoC = se2CtoC * se2Update;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      dMeanOffset -= v4Update[3];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  result_pair.first = se2CtoC;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  result_pair.second = dFinalScore;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">return</span> result_pair;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// What is the 3D camera rotation (zero trans) SE3&lt;&gt; which causes an</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">// input image SO2 rotation?</span></div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../db/d95/a00391.html#ac2c88581f0ae3aab540dcc4a78f914d0">  210</a></span>&#160;<a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> <a class="code" href="../../db/d95/a00391.html#ac2c88581f0ae3aab540dcc4a78f914d0">SmallBlurryImage::SE3fromSE2</a>(<a class="code" href="../../d3/dc9/a00355.html">SE2&lt;&gt;</a> se2, <a class="code" href="../../d0/d33/a00027.html">ATANCamera</a> camera) </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// Do this by projecting two points, and then iterating the SE3&lt;&gt; (SO3</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// actually) until convergence. It might seem stupid doing this so</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// precisely when the whole SE2-finding is one big hack, but hey.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  camera.<a class="code" href="../../d0/d33/a00027.html#a700b037d4c41f7aa2ab1b42ed57759b8">SetImageSize</a>(mirSize);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> av2Turned[2];   <span class="comment">// Our two warped points in pixels</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  av2Turned[0] = <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(mirSize / 2) + se2 * <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(<a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(5,0));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  av2Turned[1] = <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(mirSize / 2) + se2 * <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(<a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(-5,0));</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> av3OrigPoints[2];   <span class="comment">// 3D versions of these points.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  av3OrigPoints[0] = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(camera.<a class="code" href="../../d0/d33/a00027.html#ab7a667985d26a7f200303b5d7a068883">UnProject</a>(vec(mirSize / 2) + <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(<a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(5,0))));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  av3OrigPoints[1] = <a class="code" href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">unproject</a>(camera.<a class="code" href="../../d0/d33/a00027.html#ab7a667985d26a7f200303b5d7a068883">UnProject</a>(vec(mirSize / 2) + <a class="code" href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">vec</a>(<a class="code" href="../../d7/da0/a00198.html">ImageRef</a>(-5,0))));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="../../da/dbf/a00393.html">SO3&lt;&gt;</a> so3;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> it = 0; it&lt;3; it++)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="../../d4/d4b/a00471.html">WLS&lt;3&gt;</a> wls;  <span class="comment">// lazy; no need for the &#39;W&#39;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">add_prior</a>(10.0);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;2; i++)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">// Project into the image to find error</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Cam = so3 * av3OrigPoints[i];</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Implane = <a class="code" href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">project</a>(v3Cam);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Pixels = camera.<a class="code" href="../../d0/d33/a00027.html#a7b8759d7fec56601d10e60ae487b96f7">Project</a>(v2Implane);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2Error = av2Turned[i] - v2Pixels;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;2&gt;</a> m2CamDerivs = camera.<a class="code" href="../../d0/d33/a00027.html#ac2d98569d643dc40416fbc5fa1abba19">GetProjectionDerivs</a>();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="../../d6/db6/a00241.html">Matrix&lt;2,3&gt;</a> m23Jacobian;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordtype">double</span> dOneOverCameraZ = 1.0 / v3Cam[2];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m=0; m&lt;3; m++)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Motion = <a class="code" href="../../da/dbf/a00393.html">SO3&lt;&gt;::generator_field</a>(m, v3Cam);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          <a class="code" href="../../d9/d69/a00451.html">Vector&lt;2&gt;</a> v2CamFrameMotion;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          v2CamFrameMotion[0] = (v3Motion[0] - v3Cam[0] * v3Motion[2] * dOneOverCameraZ) * dOneOverCameraZ;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          v2CamFrameMotion[1] = (v3Motion[1] - v3Cam[1] * v3Motion[2] * dOneOverCameraZ) * dOneOverCameraZ;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          m23Jacobian.T()[m] = m2CamDerivs * v2CamFrameMotion;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        };</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(v2Error[0], m23Jacobian[0], 1.0);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">add_mJ</a>(v2Error[1], m23Jacobian[1], 1.0);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    };</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      wls.<a class="code" href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">compute</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="../../d9/d69/a00451.html">Vector&lt;3&gt;</a> v3Res = wls.<a class="code" href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">get_mu</a>();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      so3 = <a class="code" href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">SO3&lt;&gt;::exp</a>(v3Res) * so3;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    };</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <a class="code" href="../../df/d73/a00358.html">SE3&lt;&gt;</a> se3Result;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  se3Result.<a class="code" href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">get_rotation</a>() = so3;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> se3Result;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="ttc" id="a00355_html_a16b53608cc9b345e10a095c899e59bff"><div class="ttname"><a href="../../d3/dc9/a00355.html#a16b53608cc9b345e10a095c899e59bff">TooN::SE2::inverse</a></div><div class="ttdeci">SE2 inverse() const </div><div class="ttdoc">compute the inverse of the transformation </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/a00572_source.html#l00081">se2.h:81</a></div></div>
<div class="ttc" id="a00198_html_a8ee9bd31bce429b1b498bb2ff62b7d72"><div class="ttname"><a href="../../d7/da0/a00198.html#a8ee9bd31bce429b1b498bb2ff62b7d72">CVD::ImageRef::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">The y co-ordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00180">image_ref.h:180</a></div></div>
<div class="ttc" id="a00198_html_a0a48eec7b69010efb9a67eb0533531aa"><div class="ttname"><a href="../../d7/da0/a00198.html#a0a48eec7b69010efb9a67eb0533531aa">CVD::ImageRef::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">The x co-ordinate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00179">image_ref.h:179</a></div></div>
<div class="ttc" id="a00618_html_afe6b48e426185860e5c373965baee6df"><div class="ttname"><a href="../../de/d85/a00618.html#afe6b48e426185860e5c373965baee6df">CVD::halfSample</a></div><div class="ttdeci">void halfSample(const BasicImage&lt; T &gt; &amp;in, BasicImage&lt; T &gt; &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc0/a00611_source.html#l00103">vision.h:103</a></div></div>
<div class="ttc" id="a00493_html"><div class="ttname"><a href="../../d9/da5/a00493.html">convolution.h</a></div></div>
<div class="ttc" id="a00393_html"><div class="ttname"><a href="../../da/dbf/a00393.html">TooN::SO3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da3/a00589_source.html#l00039">so3.h:39</a></div></div>
<div class="ttc" id="a00391_html_ac55c52155ae5c9876ec6a54e8312cf0f"><div class="ttname"><a href="../../db/d95/a00391.html#ac55c52155ae5c9876ec6a54e8312cf0f">SmallBlurryImage::IteratePosRelToTarget</a></div><div class="ttdeci">std::pair&lt; SE2&lt;&gt;, double &gt; IteratePosRelToTarget(SmallBlurryImage &amp;other, int nIterations=10)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00098">SmallBlurryImage.cpp:98</a></div></div>
<div class="ttc" id="a00027_html"><div class="ttname"><a href="../../d0/d33/a00027.html">ATANCamera</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc5/a00480_source.html#l00066">ATANCamera.h:66</a></div></div>
<div class="ttc" id="a00391_html"><div class="ttname"><a href="../../db/d95/a00391.html">SmallBlurryImage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00017">SmallBlurryImage.h:17</a></div></div>
<div class="ttc" id="a00391_html_a9de44381714f6da3243c36c89581bb72"><div class="ttname"><a href="../../db/d95/a00391.html#a9de44381714f6da3243c36c89581bb72">SmallBlurryImage::MakeFromKF</a></div><div class="ttdeci">void MakeFromKF(KeyFrame &amp;kf, double dBlur=2.5)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00030">SmallBlurryImage.cpp:30</a></div></div>
<div class="ttc" id="a00358_html_a6f349984d701630586ac4955c35733f7"><div class="ttname"><a href="../../df/d73/a00358.html#a6f349984d701630586ac4955c35733f7">TooN::SE3::get_rotation</a></div><div class="ttdeci">SO3&lt; Precision &gt; &amp; get_rotation()</div><div class="ttdoc">Returns the rotation part of the transformation as a SO3. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00064">se3.h:64</a></div></div>
<div class="ttc" id="a00027_html_a7b8759d7fec56601d10e60ae487b96f7"><div class="ttname"><a href="../../d0/d33/a00027.html#a7b8759d7fec56601d10e60ae487b96f7">ATANCamera::Project</a></div><div class="ttdeci">Vector&lt; 2 &gt; Project(const Vector&lt; 2 &gt; &amp;camframe)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/a00479_source.html#l00109">ATANCamera.cpp:109</a></div></div>
<div class="ttc" id="a00049_html_a33a4f83e5cb035c47a4539374b207932"><div class="ttname"><a href="../../d2/dee/a00049.html#a33a4f83e5cb035c47a4539374b207932">TooN::Cholesky::backsub</a></div><div class="ttdeci">Vector&lt; Size, Precision &gt; backsub(const Vector&lt; Size2, P2, B2 &gt; &amp;v) const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9c/a00487_source.html#l00126">Cholesky.h:126</a></div></div>
<div class="ttc" id="a00391_html_a08370a33eb90f38889ca999135d273e9"><div class="ttname"><a href="../../db/d95/a00391.html#a08370a33eb90f38889ca999135d273e9">SmallBlurryImage::mirSize</a></div><div class="ttdeci">static CVD::ImageRef mirSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00033">SmallBlurryImage.h:33</a></div></div>
<div class="ttc" id="a00618_html_a54292001c2bdcba3cc04de6ce55f6735"><div class="ttname"><a href="../../de/d85/a00618.html#a54292001c2bdcba3cc04de6ce55f6735">CVD::vec</a></div><div class="ttdeci">TooN::Vector&lt; 2 &gt; vec(const ImageRef &amp;ir)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6e/a00610_source.html#l00032">vector_image_ref.h:32</a></div></div>
<div class="ttc" id="a00618_html_a8ac170fcfe5208bd3743c082cf319390"><div class="ttname"><a href="../../de/d85/a00618.html#a8ac170fcfe5208bd3743c082cf319390">CVD::convolveGaussian</a></div><div class="ttdeci">void convolveGaussian(BasicImage&lt; T &gt; &amp;I, double sigma, double sigmas=3.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da5/a00493_source.html#l00415">convolution.h:415</a></div></div>
<div class="ttc" id="a00232_html_aa2fda57784edbadc7673541d76d32384"><div class="ttname"><a href="../../d0/d53/a00232.html#aa2fda57784edbadc7673541d76d32384">Level::im</a></div><div class="ttdeci">CVD::Image&lt; CVD::byte &gt; im</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00059">KeyFrame.h:59</a></div></div>
<div class="ttc" id="a00523_html_addcb08d3afb49cc2c43beb32546b9aa2"><div class="ttname"><a href="../../d0/de7/a00523.html#addcb08d3afb49cc2c43beb32546b9aa2">TooN::unproject</a></div><div class="ttdeci">Vector&lt;(Size==Dynamic?Dynamic:Size+1), Precision &gt; unproject(const Vector&lt; Size, Precision, Base &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00166">helpers.h:166</a></div></div>
<div class="ttc" id="a00471_html_a4a3b86f43627f63e794e545b456b06dc"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4a3b86f43627f63e794e545b456b06dc">TooN::WLS::add_mJ</a></div><div class="ttdeci">void add_mJ(Precision m, const Vector&lt; Size, Precision, B2 &gt; &amp;J, Precision weight=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00100">wls.h:100</a></div></div>
<div class="ttc" id="a00198_html_aa000fde49688b284af64547a0e252d87"><div class="ttname"><a href="../../d7/da0/a00198.html#aa000fde49688b284af64547a0e252d87">CVD::ImageRef::area</a></div><div class="ttdeci">int area() const </div><div class="ttdoc">Area (product of x and y; signed) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00407">image_ref.h:407</a></div></div>
<div class="ttc" id="a00355_html"><div class="ttname"><a href="../../d3/dc9/a00355.html">TooN::SE2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/a00572_source.html#l00052">se2.h:52</a></div></div>
<div class="ttc" id="a00618_html"><div class="ttname"><a href="../../de/d85/a00618.html">CVD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d34/a00476_source.html#l00024">abs.h:24</a></div></div>
<div class="ttc" id="a00355_html_a044ce9b6f9bd98fb2a66a0611aa3175e"><div class="ttname"><a href="../../d3/dc9/a00355.html#a044ce9b6f9bd98fb2a66a0611aa3175e">TooN::SE2::get_rotation</a></div><div class="ttdeci">SO2&lt; Precision &gt; &amp; get_rotation()</div><div class="ttdoc">Returns the rotation part of the transformation as a SO2. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/a00572_source.html#l00060">se2.h:60</a></div></div>
<div class="ttc" id="a00241_html"><div class="ttname"><a href="../../d6/db6/a00241.html">TooN::Matrix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/deb/a00545_source.html#l00110">matrix.hh:110</a></div></div>
<div class="ttc" id="a00391_html_adcbc042e90975c185a0c761f5001bf93"><div class="ttname"><a href="../../db/d95/a00391.html#adcbc042e90975c185a0c761f5001bf93">SmallBlurryImage::mimTemplate</a></div><div class="ttdeci">CVD::Image&lt; float &gt; mimTemplate</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00030">SmallBlurryImage.h:30</a></div></div>
<div class="ttc" id="a00027_html_ab7a667985d26a7f200303b5d7a068883"><div class="ttname"><a href="../../d0/d33/a00027.html#ab7a667985d26a7f200303b5d7a068883">ATANCamera::UnProject</a></div><div class="ttdeci">Vector&lt; 2 &gt; UnProject(const Vector&lt; 2 &gt; &amp;imframe)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/a00479_source.html#l00125">ATANCamera.cpp:125</a></div></div>
<div class="ttc" id="a00487_html"><div class="ttname"><a href="../../dd/d9c/a00487.html">Cholesky.h</a></div></div>
<div class="ttc" id="a00471_html_a4d34baf6de02ddc5f9c460a6c8b4c404"><div class="ttname"><a href="../../d4/d4b/a00471.html#a4d34baf6de02ddc5f9c460a6c8b4c404">TooN::WLS::get_mu</a></div><div class="ttdeci">Vector&lt; Size, Precision &gt; &amp; get_mu()</div><div class="ttdoc">Returns the update. With no prior, this is the result of . </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00202">wls.h:202</a></div></div>
<div class="ttc" id="a00391_html_a23efee4628b0553cf68385ea37cbfa74"><div class="ttname"><a href="../../db/d95/a00391.html#a23efee4628b0553cf68385ea37cbfa74">SmallBlurryImage::mbMadeJacs</a></div><div class="ttdeci">bool mbMadeJacs</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00032">SmallBlurryImage.h:32</a></div></div>
<div class="ttc" id="a00190_html"><div class="ttname"><a href="../../d7/d6e/a00190.html">CVD::Image&lt; float &gt;</a></div></div>
<div class="ttc" id="a00198_html_a0eb956391ba9f250ee00f15a294dc334"><div class="ttname"><a href="../../d7/da0/a00198.html#a0eb956391ba9f250ee00f15a294dc334">CVD::ImageRef::next</a></div><div class="ttdeci">bool next(const ImageRef &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00220">image_ref.h:220</a></div></div>
<div class="ttc" id="a00226_html"><div class="ttname"><a href="../../dc/d55/a00226.html">KeyFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00076">KeyFrame.h:76</a></div></div>
<div class="ttc" id="a00226_html_a4962879f78735ad057b1e943a36ae9f6"><div class="ttname"><a href="../../dc/d55/a00226.html#a4962879f78735ad057b1e943a36ae9f6">KeyFrame::aLevels</a></div><div class="ttdeci">Level aLevels[LEVELS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d41/a00532_source.html#l00084">KeyFrame.h:84</a></div></div>
<div class="ttc" id="a00358_html"><div class="ttname"><a href="../../df/d73/a00358.html">TooN::SE3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d21/a00573_source.html#l00050">se3.h:50</a></div></div>
<div class="ttc" id="a00618_html_adffa5bba45e2953e9525190d02a54764"><div class="ttname"><a href="../../de/d85/a00618.html#adffa5bba45e2953e9525190d02a54764">CVD::transform</a></div><div class="ttdeci">int transform(const BasicImage&lt; S &gt; &amp;in, BasicImage&lt; T &gt; &amp;out, const TooN::Matrix&lt; 2 &gt; &amp;M, const TooN::Vector&lt; 2 &gt; &amp;inOrig, const TooN::Vector&lt; 2 &gt; &amp;outOrig, const T defaultValue=T())</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dc0/a00611_source.html#l00304">vision.h:304</a></div></div>
<div class="ttc" id="a00523_html_a031ca1778b1ff08a51f74daa820bb5d7"><div class="ttname"><a href="../../d0/de7/a00523.html#a031ca1778b1ff08a51f74daa820bb5d7">TooN::exp</a></div><div class="ttdeci">Matrix&lt; R, C, P &gt; exp(const Matrix&lt; R, C, P, B &gt; &amp;m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00284">helpers.h:284</a></div></div>
<div class="ttc" id="a00632_html"><div class="ttname"><a href="../../d4/d2a/a00632.html">std</a></div></div>
<div class="ttc" id="a00391_html_ad95977bc62be5e0f78d545d22ec84515"><div class="ttname"><a href="../../db/d95/a00391.html#ad95977bc62be5e0f78d545d22ec84515">SmallBlurryImage::mimImageJacs</a></div><div class="ttdeci">CVD::Image&lt; Vector&lt; 2 &gt; &gt; mimImageJacs</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d92/a00586_source.html#l00031">SmallBlurryImage.h:31</a></div></div>
<div class="ttc" id="a00407_html_a1fe56e4395ac4f7e342c75a222c84e14"><div class="ttname"><a href="../../d1/d98/a00407.html#a1fe56e4395ac4f7e342c75a222c84e14">CVD::SubImage::size</a></div><div class="ttdeci">ImageRef size() const </div><div class="ttdoc">What is the size of this image? </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00370">image.h:370</a></div></div>
<div class="ttc" id="a00049_html"><div class="ttname"><a href="../../d2/dee/a00049.html">TooN::Cholesky</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9c/a00487_source.html#l00069">Cholesky.h:69</a></div></div>
<div class="ttc" id="a00407_html_a0373930f0671990ed3a8dfef265cc2f5"><div class="ttname"><a href="../../d1/d98/a00407.html#a0373930f0671990ed3a8dfef265cc2f5">CVD::SubImage::in_image_with_border</a></div><div class="ttdeci">bool in_image_with_border(const ImageRef &amp;ir, int border) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d35/a00526_source.html#l00271">image.h:271</a></div></div>
<div class="ttc" id="a00618_html_ab323db82d94f28c3a207b04311136a51"><div class="ttname"><a href="../../de/d85/a00618.html#ab323db82d94f28c3a207b04311136a51">CVD::ir</a></div><div class="ttdeci">ImageRef ir(const TooN::Vector&lt; 2 &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d6e/a00610_source.html#l00043">vector_image_ref.h:43</a></div></div>
<div class="ttc" id="a00355_html_adcfd505ca53848fa3f783b5cc6b05294"><div class="ttname"><a href="../../d3/dc9/a00355.html#adcfd505ca53848fa3f783b5cc6b05294">TooN::SE2::get_translation</a></div><div class="ttdeci">Vector&lt; 2, Precision &gt; &amp; get_translation()</div><div class="ttdoc">Returns the translation part of the transformation as a Vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/a00572_source.html#l00064">se2.h:64</a></div></div>
<div class="ttc" id="a00613_html"><div class="ttname"><a href="../../d1/d6e/a00613.html">wls.h</a></div></div>
<div class="ttc" id="a00611_html"><div class="ttname"><a href="../../dd/dc0/a00611.html">vision.h</a></div></div>
<div class="ttc" id="a00198_html"><div class="ttname"><a href="../../d7/da0/a00198.html">CVD::ImageRef</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00047">image_ref.h:47</a></div></div>
<div class="ttc" id="a00027_html_a700b037d4c41f7aa2ab1b42ed57759b8"><div class="ttname"><a href="../../d0/d33/a00027.html#a700b037d4c41f7aa2ab1b42ed57759b8">ATANCamera::SetImageSize</a></div><div class="ttdeci">void SetImageSize(Vector&lt; 2 &gt; v2ImageSize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/a00479_source.html#l00021">ATANCamera.cpp:21</a></div></div>
<div class="ttc" id="a00586_html"><div class="ttname"><a href="../../d6/d92/a00586.html">SmallBlurryImage.h</a></div></div>
<div class="ttc" id="a00471_html_aa010c5918f0045b229fd3fd9c073a8d7"><div class="ttname"><a href="../../d4/d4b/a00471.html#aa010c5918f0045b229fd3fd9c073a8d7">TooN::WLS::compute</a></div><div class="ttdeci">void compute()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00180">wls.h:180</a></div></div>
<div class="ttc" id="a00198_html_a9d617002d2e63b9a7f97edcca440792a"><div class="ttname"><a href="../../d7/da0/a00198.html#a9d617002d2e63b9a7f97edcca440792a">CVD::ImageRef::home</a></div><div class="ttdeci">void home()</div><div class="ttdoc">Resets the ImageRef to (0,0) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d81/a00528_source.html#l00240">image_ref.h:240</a></div></div>
<div class="ttc" id="a00572_html"><div class="ttname"><a href="../../d6/d06/a00572.html">se2.h</a></div></div>
<div class="ttc" id="a00391_html_ae2da68e01ab79facc36a95f8c9b08c67"><div class="ttname"><a href="../../db/d95/a00391.html#ae2da68e01ab79facc36a95f8c9b08c67">SmallBlurryImage::SmallBlurryImage</a></div><div class="ttdeci">SmallBlurryImage()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00021">SmallBlurryImage.cpp:21</a></div></div>
<div class="ttc" id="a00391_html_a72b70aac5dcd48f21dbb3bc2da77d9e6"><div class="ttname"><a href="../../db/d95/a00391.html#a72b70aac5dcd48f21dbb3bc2da77d9e6">SmallBlurryImage::ZMSSD</a></div><div class="ttdeci">double ZMSSD(SmallBlurryImage &amp;other)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00082">SmallBlurryImage.cpp:82</a></div></div>
<div class="ttc" id="a00391_html_ab37342868b42c2cbb25ef28b8663861e"><div class="ttname"><a href="../../db/d95/a00391.html#ab37342868b42c2cbb25ef28b8663861e">SmallBlurryImage::MakeJacs</a></div><div class="ttdeci">void MakeJacs()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00059">SmallBlurryImage.cpp:59</a></div></div>
<div class="ttc" id="a00451_html"><div class="ttname"><a href="../../d9/d69/a00451.html">TooN::Vector&lt; 2 &gt;</a></div></div>
<div class="ttc" id="a00471_html_ae559165e2cfb4a9968a1d6bc4aee8602"><div class="ttname"><a href="../../d4/d4b/a00471.html#ae559165e2cfb4a9968a1d6bc4aee8602">TooN::WLS::add_prior</a></div><div class="ttdeci">void add_prior(Precision val)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00070">wls.h:70</a></div></div>
<div class="ttc" id="a00604_html"><div class="ttname"><a href="../../d6/d75/a00604.html">utility.h</a></div></div>
<div class="ttc" id="a00027_html_ac2d98569d643dc40416fbc5fa1abba19"><div class="ttname"><a href="../../d0/d33/a00027.html#ac2d98569d643dc40416fbc5fa1abba19">ATANCamera::GetProjectionDerivs</a></div><div class="ttdeci">Matrix&lt; 2, 2 &gt; GetProjectionDerivs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/a00479_source.html#l00172">ATANCamera.cpp:172</a></div></div>
<div class="ttc" id="a00523_html_ae9b2cb48b0a8e681b3dd1ac86f8b9d97"><div class="ttname"><a href="../../d0/de7/a00523.html#ae9b2cb48b0a8e681b3dd1ac86f8b9d97">TooN::Zeros</a></div><div class="ttdeci">static Operator&lt; Internal::Zero &gt; Zeros</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de9/a00552_source.html#l00727">objects.h:727</a></div></div>
<div class="ttc" id="a00523_html_aba317fcd024f7f6e135433caa8d0d6c4"><div class="ttname"><a href="../../d0/de7/a00523.html#aba317fcd024f7f6e135433caa8d0d6c4">TooN::project</a></div><div class="ttdeci">Vector&lt;(Size==Dynamic?Dynamic:Size-1), Precision &gt; project(const Vector&lt; Size, Precision, Base &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d14/a00522_source.html#l00157">helpers.h:157</a></div></div>
<div class="ttc" id="a00391_html_ac2c88581f0ae3aab540dcc4a78f914d0"><div class="ttname"><a href="../../db/d95/a00391.html#ac2c88581f0ae3aab540dcc4a78f914d0">SmallBlurryImage::SE3fromSE2</a></div><div class="ttdeci">static SE3 SE3fromSE2(SE2&lt;&gt; se2, ATANCamera camera)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/a00585_source.html#l00210">SmallBlurryImage.cpp:210</a></div></div>
<div class="ttc" id="a00471_html"><div class="ttname"><a href="../../d4/d4b/a00471.html">TooN::WLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/a00613_source.html#l00048">wls.h:48</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 25 2015 17:53:29 for SLAMflex SE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
